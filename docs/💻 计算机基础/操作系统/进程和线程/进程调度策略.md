---
sidebar_position: 5
---

## :stopwatch: è°ƒåº¦æœºåˆ¶

1. ä¸€ä¸ªæ“ä½œç³»ç»Ÿä¼šåŒæ—¶ç®¡ç†å¤§é‡çš„è¿›ç¨‹ï¼Œæ•°é‡è¿œè¿œè¶…è¿‡è®¡ç®—æœºçš„ CPU æ ¸å¿ƒæ•°é‡ï¼Œä»–ä»¬ä½¿ç”¨çš„å†…å­˜ä¹Ÿå¯èƒ½ä¼šè¶…è¿‡å¯ç”¨çš„å†…å­˜æ€»é‡ã€‚
2. ä¸ºäº† **åè°ƒå¤šä¸ªè¿›ç¨‹å¯¹ CPU å’Œå†…å­˜çš„ä½¿ç”¨**ï¼Œæ“ä½œç³»ç»Ÿä½¿ç”¨äº†è¿›ç¨‹è°ƒåº¦æœºåˆ¶ï¼Œä¸»è¦è´Ÿè´£è¿›ç¨‹åœ¨ [ä¸åŒçŠ¶æ€](https://ricear.com/project-26/doc-327) çš„åˆ‡æ¢ã€‚
3. è¿›ç¨‹è°ƒåº¦æ ¹æ® **èŒè´£** çš„ä¸åŒï¼Œå¯ä»¥åˆ†ä¸º **é•¿æœŸ**ã€**ä¸­æœŸ** å’Œ **çŸ­æœŸ** è°ƒåº¦ï¼Œä»Žè€Œå¯¹ CPUã€å†…å­˜ã€I/O èµ„æºçš„ä½¿ç”¨è¿›è¡Œç®¡ç†ã€‚

### :clock6: é•¿æœŸè°ƒåº¦

1. å³ä½¿ç”¨æˆ·å·²ç»å‘æ“ä½œç³»ç»Ÿæäº¤äº†æ‰§è¡ŒæŸä¸ªç¨‹åºçš„è¯·æ±‚ï¼Œç³»ç»Ÿä¹Ÿ **ä¸ä¼šç«‹å³å¤„ç†** :no_good: è¯¥è¯·æ±‚ï¼Œè¿™ä¸€å†³ç­–æ˜¯ç”±æ“ä½œç³»ç»Ÿä¸­çš„ **é•¿æœŸè°ƒåº¦** :clock12: è´Ÿè´£çš„ã€‚

   > ðŸ’ å‡å¦‚æ¯ä¸€ä¸ªç¨‹åºå°è¯•è¿è¡Œæ—¶ï¼Œæ“ä½œç³»ç»Ÿéƒ½ç«‹å³ä¸ºå…¶åˆ›å»ºå¯¹åº”çš„è¿›ç¨‹ï¼Œå¹¶å°†è¿›ç¨‹çŠ¶æ€è®¾ç½®ä¸ºé¢„å¤‡çŠ¶æ€ï¼Œé‚£ä¹ˆä¼šå¯¼è‡´å¤§é‡è¿›ç¨‹åœ¨çŸ­æ—¶é—´å†…è¢«åˆ›å»ºå‡ºæ¥ï¼Œä¼šé€ æˆè°ƒåº¦å†³ç­–ï¼ˆå³åŽé¢ä¼šä»‹ç»çš„ **çŸ­æœŸè°ƒåº¦**ï¼‰éœ€è¦è€ƒè™‘çš„è¿›ç¨‹æ•°é‡å‰§å¢žã€è°ƒåº¦å¼€é”€å˜å¤§çš„é—®é¢˜ âŒ ã€‚

2. å½“é•¿æœŸè°ƒåº¦ä¸ºæŸä¸ªç¨‹åº **åˆ›å»º** äº†è¿›ç¨‹å¹¶å°†å…¶çŠ¶æ€è®¾ç½®ä¸º **é¢„å¤‡çŠ¶æ€** åŽï¼Œä¼šç”± **çŸ­æœŸè°ƒåº¦** è¿›ä¸€æ­¥ç®¡ç†è¯¥è¿›ç¨‹ï¼ˆä¾‹å¦‚åšå‡ºè°ƒåº¦å†³ç­–ï¼‰ï¼Œå› æ­¤ï¼Œé•¿æœŸè°ƒåº¦å†³å®šäº†å½“å‰ **çœŸæ­£å¯è¢«è°ƒåº¦çš„è¿›ç¨‹çš„æ•°é‡**ã€‚

   > ðŸ’ é•¿æœŸè°ƒåº¦å°±åƒä¸€ä¸ª **é˜€é—¨**ï¼Œç”¨äºŽ **é™åˆ¶** ç³»ç»Ÿä¸­çœŸæ­£è¢«çŸ­æœŸè°ƒåº¦ç®¡ç†çš„è¿›ç¨‹æ•°é‡ï¼Œé¿å…çŸ­æœŸè°ƒåº¦çš„å¼€é”€è¿‡å¤§ã€‚

3. é•¿æœŸè°ƒåº¦å¯ä»¥æ ¹æ®å½“å‰ç³»ç»Ÿä¸­çš„ CPUã€I/O åˆ©ç”¨çŽ‡æƒ…å†µï¼Œé€‰å–åˆé€‚çš„ **è®¡ç®—å¯†é›†åž‹** æˆ– **I/O å¯†é›†åž‹** è¿›ç¨‹ï¼Œäº¤ç”±çŸ­æœŸè°ƒåº¦ç®¡ç†ï¼Œè¿™æ ·ï¼Œå¯ä»¥æœ‰æ•ˆåœ°æŽ§åˆ¶ç³»ç»Ÿä¸­çš„ **èµ„æºåˆ©ç”¨** æƒ…å†µï¼Œé¿å…å‡ºçŽ°æ¿€çƒˆçš„ **èµ„æºç«žäº‰** æˆ–æŸé¡¹èµ„æºçš„åˆ©ç”¨çŽ‡è¿‡ä½Žçš„æƒ…å†µã€‚

   > ðŸ¤” ä»€ä¹ˆæ˜¯ã€Žè®¡ç®—å¯†é›†åž‹ã€å’Œã€ŽI/O å¯†é›†åž‹ã€è¿›ç¨‹ï¼Ÿ
   >
   > - è®¡ç®—å¯†é›†åž‹è¿›ç¨‹ä¸»è¦åˆ©ç”¨ **CPU** è¿›è¡Œé•¿æ—¶é—´çš„è®¡ç®—ï¼Œå› æ­¤å…¶æ€§èƒ½å— **å¤„ç†å™¨è®¡ç®—æ€§èƒ½** çš„é™åˆ¶ã€‚
   > - I/O å¯†é›†åž‹è¿›ç¨‹ **ç­‰å¾… I/O è¯·æ±‚å®Œæˆ** ä¼šå ç”¨è¯¥ç±»è¿›ç¨‹çš„å¤§éƒ¨åˆ†æ—¶é—´ï¼ŒåŒæ—¶ä»–ä»¬ä¼šä¸é—´æ–­åœ°åœ¨ **çŸ­æ—¶é—´å†…å ç”¨ CPU** ä»¥å¤„ç† I/O è¯·æ±‚ã€‚

### :clock12: çŸ­æœŸè°ƒåº¦

1. å®žé™…åšå‡º **è°ƒåº¦å†³ç­–** çš„æ˜¯ **çŸ­æœŸè°ƒåº¦**ã€‚
2. çŸ­æœŸè°ƒåº¦ä¸»è¦è´Ÿè´£è¿›ç¨‹åœ¨é¢„å¤‡çŠ¶æ€ã€è¿è¡ŒçŠ¶æ€ã€é˜»å¡ž **çŠ¶æ€é—´çš„è½¬æ¢**ï¼š
   1. åœ¨çŸ­æœŸè°ƒåº¦å†³å®šæ‰§è¡Œä¸€ä¸ªè¿›ç¨‹æ—¶ï¼Œä¼šå°†è¯¥è¿›ç¨‹ä»Ž **é¢„å¤‡çŠ¶æ€** è®¾ç½®ä¸º **è¿è¡ŒçŠ¶æ€**ã€‚
   2. å¤„äºŽé¢„å¤‡çŠ¶æ€çš„è¿›ç¨‹éœ€è¦è¢«çŸ­æœŸè°ƒåº¦å…è®¸æ‰èƒ½è¿è¡Œï¼Œè€Œå¤„äºŽè¿è¡ŒçŠ¶æ€çš„è¿›ç¨‹å¯èƒ½ä¼šè¢« **çŸ­æœŸè°ƒåº¦** æ‰“æ–­ï¼Œé¿å…å ç”¨ CPU æ—¶é—´è¿‡é•¿ï¼Œå½±å“è°ƒåº¦çš„å…¬å¹³æ€§ã€‚
   3. å¦‚æžœ **è¿è¡ŒçŠ¶æ€** çš„è¿›ç¨‹å‘èµ· I/O è¯·æ±‚ã€ç­‰å¾…ç”¨æˆ·è¾“å…¥æˆ–ç¡çœ ï¼Œåˆ™ä¼šä¸»åŠ¨è¿›å…¥ **é˜»å¡žçŠ¶æ€**ï¼Œå½“ I/O äº‹ä»¶å®ŒæˆåŽå†é‡æ–°è¿›å…¥ **é¢„å¤‡çŠ¶æ€**ã€‚

### :clock3: ä¸­æœŸè°ƒåº¦

> ðŸ¤” ä¸ºä»€ä¹ˆéœ€è¦ä¸­æœŸè°ƒåº¦ï¼Ÿ
>
> - é•¿æœŸè°ƒåº¦ä¸ŽçŸ­æœŸè°ƒåº¦ä¸€èˆ¬ä¼šä»Ž **CPU**ã€**I/O** èµ„æºçš„è§’åº¦åšå‡ºè°ƒåº¦å†³ç­–ï¼Œç„¶åŽï¼Œæ“ä½œç³»ç»Ÿä¸­çš„ **å†…å­˜èµ„æº** è¿˜æ²¡æœ‰è¢«è€ƒè™‘ã€‚
> - è™½ç„¶é•¿æœŸè°ƒåº¦å·²ç»é™åˆ¶äº†è¢«çŸ­æœŸè°ƒåº¦ç®¡ç†çš„è¿›ç¨‹æ•°é‡ï¼Œä½†æ˜¯ä»–ä»¬çš„å†…å­˜ä½¿ç”¨é‡åœ¨è¿è¡Œæ—¶ä»ç„¶æœ‰å¯èƒ½è¶…å‡ºç³»ç»Ÿä¸­çš„å†…å­˜æ€»é‡ï¼Œæ­¤æ—¶ï¼Œæ“ä½œç³»ç»Ÿéœ€è¦å°† **å†…å­˜ä½¿ç”¨æƒ…å†µ** ä¹Ÿçº³å…¥è€ƒé‡ï¼Œé¿å…å†…å­˜ä½¿ç”¨è¿‡å¤šï¼Œè¿™æ˜¯ç”± **ä¸­æœŸè°ƒåº¦** æ¥è´Ÿè´£çš„ã€‚

1. ä¸­æœŸè°ƒåº¦å®žé™…ä¸Šæ˜¯ [æ¢é¡µæœºåˆ¶](https://ricear.com/project-26/doc-342) çš„ä¸€éƒ¨åˆ†ï¼š
   1. å¦‚æžœå½“å‰ç³»ç»Ÿä¸­çš„è¿›ç¨‹å·²ç» **å ç”¨äº†å¤§é‡å†…å­˜**ï¼Œä¸­æœŸè°ƒåº¦ä¼šæ ¹æ®æŸäº›ç­–ç•¥ **æŒ‚èµ·** ç³»ç»Ÿä¸­è¢«çŸ­æœŸè°ƒåº¦ç®¡ç†çš„è¿›ç¨‹ï¼ˆä¾‹å¦‚ **é¢‘ç¹è§¦å‘ç¼ºé¡µå¼‚å¸¸** çš„è¿›ç¨‹ã€**é•¿æ—¶é—´æœªå“åº”** çš„è¿›ç¨‹ç­‰ï¼‰ï¼Œè¯¥è¿›ç¨‹ä¼šè¢«è®¾ç½®ä¸ºå¯¹åº”çš„ **æŒ‚èµ·** çŠ¶æ€ï¼Œæ ‡å¿—ç€ä»– **ä¸ä¼šå†è¢«è°ƒåº¦æ‰§è¡Œ**ã€‚
   2. åŒæ—¶ï¼Œæ¢é¡µæœºåˆ¶ä¼šå€¾å‘äºŽé€‰æ‹© **è¢«æŒ‚èµ·çš„è¿›ç¨‹** æ‰€ä½¿ç”¨çš„çš„å†…å­˜é¡µæ›¿æ¢å…¥ç£ç›˜ã€‚
   3. ä¸­æœŸè°ƒåº¦ä¹Ÿä¼šç›‘æŽ§å½“å‰å†…å­˜ä½¿ç”¨æƒ…å†µï¼Œå¹¶ **åœ¨é€‚å½“çš„æ—¶æœºæ¿€æ´»æ­¤å‰æŒ‚èµ·çš„è¿›ç¨‹**ã€‚

## :train2: è°ƒåº¦ç­–ç•¥

### :atom_symbol: å•æ ¸è°ƒåº¦ç­–ç•¥

> ä¸‹é¢å°†ä»‹ç»ä¸€äº›å¸¸è§çš„ã€ç»å…¸çš„è°ƒåº¦ç­–ç•¥ï¼Œè¿™äº›è°ƒåº¦ç­–ç•¥éƒ½å‡è®¾å½“å‰ç³»ç»Ÿ **åªæœ‰ä¸€ä¸ªå¯ç”¨çš„ CPU æ ¸å¿ƒ**ï¼Œæ¯ä¸ªä»»åŠ¡éƒ½æœ‰è‡ªå·±çš„åˆ°è¾¾æ—¶é—´å’Œè¿è¡Œæ—¶é—´ã€‚å¦å¤–ï¼Œä¸è€ƒè™‘ä»»åŠ¡è°ƒåº¦å¼€é”€ï¼Œæ‰€æœ‰è°ƒåº¦éƒ½æ˜¯å³æ—¶å®Œæˆçš„ã€‚

#### ç»å…¸è°ƒåº¦

##### å…ˆåˆ°å…ˆå¾—

1. å…ˆåˆ°å…ˆå¾—ï¼ˆFirst Come First Served, FCFSï¼‰ç­–ç•¥ä¼šåœ¨ç³»ç»Ÿä¸­ç»´æŠ¤ä¸€ä¸ª **è¿è¡Œé˜Ÿåˆ—**ï¼Œè¿™ä¸ªé˜Ÿåˆ—ä¸­çš„å…ƒç´ æ˜¯å¤„äºŽ **é¢„å¤‡çŠ¶æ€**ã€ç­‰å¾…æ‰§è¡Œçš„ä»»åŠ¡ã€‚

2. åœ¨å†³å®šéœ€è¦æ‰§è¡Œçš„ä»»åŠ¡æ—¶ï¼ŒFCFS ç­–ç•¥ä¼šé€‰å–è¿è¡Œé˜Ÿåˆ—ä¸­çš„ **ç¬¬ä¸€ä¸ªä»»åŠ¡**ï¼Œå°†å…¶ **ç§»å‡ºè¿è¡Œé˜Ÿåˆ—å¹¶æ‰§è¡Œ**ï¼Œå½“ä¸€ä¸ªä»»åŠ¡ **æ‰§è¡Œå®Œæˆ** åŽï¼Œä»–ä¼šè¢«å†æ¬¡æ”¾å…¥ **è¿è¡Œé˜Ÿåˆ—çš„é˜Ÿå°¾**ã€‚

   > ðŸ’ è¿è¡Œé˜Ÿåˆ—èƒ½å¤Ÿèµ·åˆ°ä¸ºå¤šä¸ªä»»åŠ¡ **ç¡®å®šé¡ºåº** çš„ä½œç”¨ï¼Œä¿è¯ä»»åŠ¡çš„æ‰§è¡Œé¡ºåºä¸Žå…¶è¿›å…¥è¿è¡Œé˜Ÿåˆ—çš„é¡ºåºä¸€è‡´ã€‚

3. FCFS ç­–ç•¥çš„ **ä¼˜ç‚¹**ï¼š

   1. **ç®€å•ç›´è§‚**ï¼š
      1. å¼€å‘è€…åªéœ€è¦ç»´æŠ¤ä¸€ä¸ªé˜Ÿåˆ—å°±å¯ä»¥å®žçŽ° FCFS ç­–ç•¥ï¼ŒåŒæ—¶ï¼ŒFCFS ç­–ç•¥ä¸éœ€è¦é¢„çŸ¥ä»»åŠ¡ä¿¡æ¯ï¼Œä¹Ÿæ²¡æœ‰éœ€è¦å¼€å‘è€…æ‰‹åŠ¨è°ƒè¯•çš„å‚æ•°ã€‚

4. FCFS ç­–ç•¥çš„ **ç¼ºç‚¹**ï¼š

   1. åœ¨ **é•¿çŸ­ä»»åŠ¡æ··åˆ** çš„åœºæ™¯ä¸‹ **å¯¹çŸ­ä»»åŠ¡ä¸å‹å¥½**ï¼š

      > å‡è®¾ä»Žç¬¬ 0 ç§’èµ·ï¼Œä¸€å…±æœ‰ä¸‰ä¸ªè®¡ç®—å¯†é›†åž‹ä»»åŠ¡ $A$ã€$B$ã€$C$ å‡†å¤‡è¢«å¤„ç†ï¼Œä¸”ä»–ä»¬ä¸ä¼šå‘èµ· I/O è¯·æ±‚ã€‚
      >
      > ![image-20220724160714087](https://ricear.com/media/202207/2022-07-24_160719_9130110.09143457590494597.png)
      >
      > è™½ç„¶ä»»åŠ¡ $A$ã€$B$ã€$C$ çš„åˆ°è¾¾æ—¶é—´ç‚¹éƒ½ä¸ºç¬¬ 0 ç§’ï¼Œä½†å‡å®šä»–ä»¬è¿›å…¥é˜Ÿåˆ—çš„é¡ºåºä¸º $A$ã€$B$ã€$C$ã€‚ä¸‹å›¾å±•ç¤ºäº†ä¸Šé¢çš„ä»»åŠ¡åœºæ™¯åŸºäºŽ FCFS ç­–ç•¥çš„æ‰§è¡Œæµï¼Œå¯ä»¥çœ‹åˆ°ä»–ä»¬æ‰§è¡Œçš„é¡ºåºåŒæ ·æ˜¯ $A$ã€$B$ã€$C$ã€‚
      >
      > ![image-20220724160922080](https://ricear.com/media/202207/2022-07-24_160927_5220990.15080912853305262.png)
      >
      > ä¸‹è¡¨å±•ç¤ºäº†ä»»åŠ¡çš„å®Œæˆæ—¶é—´ç‚¹å’Œå‘¨è½¬æ—¶é—´ï¼ˆå‘¨è½¬æ—¶é—´ = å®Œæˆæ—¶é—´ç‚¹ - åˆ°è¾¾æ—¶é—´ç‚¹ï¼‰ï¼š
      >
      > ![image-20220724161220452](https://ricear.com/media/202207/2022-07-24_161226_0863720.9762634020976079.png)
      >
      > 1. å¯¹äºŽä»»åŠ¡ $A$ï¼Œä»–çš„å‘¨è½¬æ—¶é—´ä¸Žè¿è¡Œæ—¶é—´ä¹‹æ¯”ä¸º 1 : 1ï¼Œä¸€èˆ¬ç”¨æˆ·ä¼šæ ¹æ®ä»»åŠ¡çš„è¿è¡Œæ—¶é—´é¢„ä¼°å¤§è‡´çš„å‘¨è½¬æ—¶é—´ï¼Œå› æ­¤ 1 : 1 ä»£è¡¨å‘¨è½¬æ—¶é—´ç¬¦åˆç”¨æˆ·é¢„æœŸï¼Œæ˜¯ç†æƒ³çš„è°ƒåº¦æƒ…å†µã€‚
      > 1. å¯¹äºŽä»»åŠ¡ $B$ å’Œ $C$ï¼Œä»–ä»¬çš„å‘¨è½¬æ—¶é—´ä¸Žè¿è¡Œæ—¶é—´ä¹‹æ¯”é«˜è¾¾ 6 : 1ã€7 : 1ï¼Œè¿™æ—¶ç”±äºŽè°ƒåº¦å™¨é¦–å…ˆè°ƒåº¦ä»»åŠ¡ $A$ï¼Œè€Œä»»åŠ¡ $A$ çš„è¿è¡Œæ—¶é—´è¾ƒé•¿ï¼Œä»»åŠ¡ $B$ å’Œ $C$ ä¸å¾—ä¸ç­‰å¾…è¾ƒé•¿çš„æ—¶é—´æ‰èƒ½å¼€å§‹è¿è¡Œï¼Œç”±äºŽä»»åŠ¡ $B$ å’Œ $C$ çš„è¿è¡Œæ—¶é—´ç›¸å¯¹äºŽ $A$ è¾ƒçŸ­ï¼Œä»–ä»¬çš„å‘¨è½¬æ—¶é—´ä¼šæ˜¾è‘—æ”¶åˆ°ä»»åŠ¡ $A$ çš„å½±å“ï¼Œå¯ä»¥æƒ³è±¡ï¼Œå¦‚æžœä»»åŠ¡ $A$ çš„è¿è¡Œæ—¶é—´å˜å¾—æ›´é•¿ï¼Œé‚£ä¹ˆè¿™ä¸€é—®é¢˜ä¼šæ›´åŠ ä¸¥é‡ã€‚
      > 1. å› æ­¤ï¼Œåœ¨çŸ­ä»»åŠ¡ä¸Žé•¿ä»»åŠ¡æ··åˆçš„åº”ç”¨åœºæ™¯ä¸‹ï¼ŒFCFS ç­–ç•¥å¯èƒ½ä¼šå¯¼è‡´çŸ­ä»»åŠ¡çš„å‘¨è½¬æ—¶é—´ä¸Žè¿è¡Œæ—¶é—´ä¹‹æ¯”è¿‡å¤§ï¼Œå¯¹çŸ­ä»»åŠ¡ä¸å‹å¥½ï¼Œä»Žè€Œä½¿å¾—ç”¨æˆ·ä½“éªŒå¾ˆå·®ã€‚

   2. **å¯¹ I/O å¯†é›†åž‹ä»»åŠ¡ä¸å‹å¥½** ï¼š

      1. I/O å¯†é›†åž‹ä»»åŠ¡é€šå¸¸ä¼š **èŠ±è´¹å¤§éƒ¨åˆ†æ—¶é—´ç­‰å¾… I/O**ï¼Œä»…æœ‰ **å°‘é‡æ—¶é—´è¢«ç”¨åœ¨ CPU ä¸­ä»¥å¤„ç†è¯·æ±‚**ã€‚
      2. FCFS ç­–ç•¥ **å¯¹è®¡ç®—å¯†é›†åž‹ä»»åŠ¡æ›´åŠ å‹å¥½**ï¼Œä½†å¯èƒ½ **ä¼šå¯¼è‡´ I/O å¯†é›†åž‹ä»»åŠ¡é•¿æ—¶é—´å†…æ— æ³•æ‰§è¡Œ**ã€‚

      > å‡è®¾ç³»ç»Ÿä¸­æœ‰ä¸¤ä¸ªä»»åŠ¡ $A$ å’Œ $B$ï¼š
      >
      > - ä»»åŠ¡ $A$ æ˜¯ä¸€ä¸ª **è®¡ç®—å¯†é›†åž‹** ä»»åŠ¡ï¼Œä»–éœ€è¦æ‰§è¡Œ 40 ç§’ã€‚
      > - ä»»åŠ¡ $B$ æ˜¯ä¸€ä¸ª **I/O å¯†é›†åž‹** ä»»åŠ¡ï¼Œå…ˆäºŽä»»åŠ¡ $A$ åˆ°è¾¾ç³»ç»Ÿï¼Œä»–ä¼šå°†ä»¥ä¸‹æ­¥éª¤å¾ªçŽ¯ä¸¤æ¬¡ï¼š
      >   - ä½¿ç”¨ 5 ç§’çš„ CPU æ—¶é—´ã€‚
      >   - å‘èµ·å¹¶ç­‰å¾…ä¸€ä¸ªè€—æ—¶ 15 ç§’çš„ I/O è¯·æ±‚ã€‚
      >
      > ä¸‹å›¾å±•ç¤ºäº†è¿™ä¸ªä¾‹å­åŸºäºŽ FCFS ç­–ç•¥çš„æ‰§è¡Œæµã€‚
      >
      > ![image-20220724171258281](https://ricear.com/media/202207/2022-07-24_171303_9637820.9580488850581617.png)
      >
      > - è™½ç„¶ I/O å¯†é›†åž‹ä»»åŠ¡ $B$ å¯ä»¥å…ˆæ‰§è¡Œï¼Œä½†æ˜¯åœ¨å…¶ç¬¬ä¸€æ¬¡ç­‰å¾… I/O è¯·æ±‚å¹¶å˜ä¸ºé˜»å¡žçŠ¶æ€åŽï¼Œè®¡ç®—å¯†é›†åž‹ä»»åŠ¡ $A$ ä¼šä¸€ç›´æ‰§è¡Œç›´åˆ°ç»“æŸã€‚
      > - å› æ­¤ï¼Œä»»åŠ¡ $B$ å³ä½¿åœ¨å®Œæˆ I/O è¯·æ±‚ä¹‹åŽä¹Ÿä¸èƒ½æ‰§è¡Œï¼Œåªèƒ½å»¶åŽå‘èµ·ä¸‹ä¸€è½®çš„ I/O è¯·æ±‚ï¼Œä½¿å¾— I/O èµ„æºçš„åˆ©ç”¨çŽ‡é™ä½Žã€‚

##### æœ€çŸ­ä»»åŠ¡ä¼˜å…ˆ

   > é’ˆå¯¹ FCFS ç­–ç•¥æ‰€é¢ä¸´çš„ **çŸ­ä»»åŠ¡ç­‰å¾…æ—¶é—´è¿‡é•¿** çš„é—®é¢˜ï¼Œæˆ‘ä»¬åº”è¯¥å¯»æ‰¾å¦ä¸€ç§è°ƒåº¦ç­–ç•¥ï¼Œä»–åº”è®©çŸ­ä»»åŠ¡ç«‹å³æ‰§è¡Œï¼Œè¿™ä¹Ÿå°±æ˜¯æˆ‘ä»¬ä¸‹é¢è¦è®²åˆ°çš„ **æœ€çŸ­ä»»åŠ¡ä¼˜å…ˆ**ï¼ˆShortest Job First, SJFï¼‰ç­–ç•¥ã€‚

   1. SJF ç­–ç•¥åœ¨è°ƒåº¦æ—¶ä¼šé€‰æ‹© **è¿è¡Œæ—¶é—´æœ€çŸ­** çš„ä»»åŠ¡æ‰§è¡Œã€‚

      > ä¸‹è¡¨ç»™å‡ºäº†ä¸Šé¢çš„åœºæ™¯åœ¨ SJF ç­–ç•¥ä¸‹çš„ä»»åŠ¡æ‰§è¡Œä¿¡æ¯å’Œæ‰§è¡Œæµã€‚
      >
      > ![image-20220724172810906](https://ricear.com/media/202207/2022-07-24_172816_7411570.5168883417977074.png)
      >
      > ![image-20220724172837401](https://ricear.com/media/202207/2022-07-24_172842_8404550.6696039136136666.png)
      >
      > ä»Žä¸Šé¢çš„å›¾ä¸­å¯ä»¥çœ‹å‡ºï¼Œåœ¨ SJF ç­–ç•¥ä¸‹ï¼Œä»»åŠ¡çš„å¹³å‡å‘¨è½¬æ—¶é—´ç›¸è¾ƒäºŽ FCFS ç­–ç•¥æ›´çŸ­ã€‚

   1. SJF ç­–ç•¥çš„ **ç¼ºç‚¹**ï¼š

      1. **å¿…é¡»é¢„çŸ¥ä»»åŠ¡çš„è¿è¡Œæ—¶é—´**ï¼š

         1. SJF ç­–ç•¥èƒ½å¤Ÿé€‰å–æœ€çŸ­è¿è¡Œæ—¶é—´æˆ–æœ€çŸ­å®Œæˆæ—¶é—´çš„ä»»åŠ¡çš„å‰ææ˜¯ **ç³»ç»Ÿéœ€è¦é¢„çŸ¥ä»»åŠ¡æ‰€éœ€çš„è¿è¡Œæ—¶é—´**ã€‚
         2. å¯¹äºŽä¸€äº›æ¯”è¾ƒå›ºå®šçš„åº”ç”¨åœºæ™¯ï¼Œè¿™ä¸ªå‰ææ˜¯åˆç†çš„ï¼Œä½†æ˜¯åœ¨æ›´å¤šçš„åœºæ™¯ä¸‹ï¼Œç³»ç»Ÿå¾ˆéš¾é¢„çŸ¥å°†è¦å¤„ç†çš„ä»»åŠ¡ç¡®åˆ‡çš„è¿è¡Œæ—¶é—´ï¼Œå› ä¸ºè¿™å–å†³äºŽå½“å‰ç³»ç»Ÿçš„çŠ¶æ€å’Œå…¶ä»–å½±å“ç¨‹åºæ‰§è¡Œæ€§èƒ½çš„å› ç´ ï¼Œè¿™ä¸€å‰ææ¡ä»¶ä¹Ÿé™åˆ¶äº† SJF çš„åº”ç”¨åœºæ™¯ã€‚

      2. **å…¶è¡¨çŽ°ä¸¥é‡ä¾èµ–äºŽä»»åŠ¡åˆ°è¾¾æ—¶é—´ç‚¹**ï¼š

         > ä¸Šé¢çš„ä¾‹å­ä¸­ä¸‰ä¸ªä»»åŠ¡çš„åˆ°è¾¾æ—¶é—´ç‚¹éƒ½æ˜¯ç¬¬ 0 ç§’ï¼ŒçŽ°åœ¨ï¼Œè®©æˆ‘ä»¬å¯¹è¿™ä¸ªåœºæ™¯è¿›è¡Œä¸€å®šçš„ä¿®æ”¹ï¼Œä»»åŠ¡ $A$ã€$B$ã€$C$ çš„åˆ°è¾¾æ—¶é—´ç‚¹åˆ†åˆ«è¢«è®¾å®šä¸ºç¬¬ 0 ç§’ã€ç¬¬ 1 ç§’å’Œç¬¬ 2 ç§’ï¼Œè¿è¡Œæ—¶é—´ä¸å˜ï¼Œåœ¨è¿™ç§åœºæ™¯ä¸‹ä»»åŠ¡åœ¨ SJF ç­–ç•¥ä¸‹çš„æ‰§è¡Œä¿¡æ¯å’Œæ‰§è¡Œæµå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š
         >
         > ![image-20220724174124786](https://ricear.com/media/202207/2022-07-24_174130_4457000.5381962265428694.png)
         >
         > - è™½ç„¶ä»»åŠ¡ $B$ å’Œ $C$ ä»…ä»…æ™šåˆ°å‡ ç§’ï¼Œä½†æ˜¯ç”±äºŽè°ƒåº¦å™¨åœ¨ç¬¬ 0 ç§’è¿›è¡Œè°ƒåº¦æ—¶å¹¶ä¸çŸ¥æ™“ä»–ä»¬çš„å­˜åœ¨ï¼Œæ‰€ä»¥é€‰æ‹©è°ƒåº¦é•¿ä»»åŠ¡ $A$ã€‚
         > - å½“ä»»åŠ¡ $B$ å’Œ $C$ åˆ°è¾¾æ—¶ï¼Œè°ƒåº¦å™¨å·²ç»æ— æ³•é‡æ–°åšå‡ºé€‰æ‹©ï¼ŒçŽ°åœ¨çš„æ‰§è¡Œæµä¸Žä¸Šé¢ä½¿ç”¨ FCFS çš„æ‰§è¡Œæµä¸€æ ·ï¼Œä»»åŠ¡ $B$ å’Œ $C$ ä»å¿…é¡»ç­‰å¾…ä»»åŠ¡ $A$ æ‰§è¡Œå®Œã€‚

##### æœ€çŸ­å®Œæˆæ—¶é—´ä»»åŠ¡ä¼˜å…ˆ

> SJF ç­–ç•¥é¢ä¸´çš„é—®é¢˜æ˜¯ã€Žè¿Ÿåˆ°ã€çš„çŸ­ä»»åŠ¡æ—¶æ— æ³•å—ç›ŠäºŽ SJF ç­–ç•¥çš„ï¼Œä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œä¸€ä¸ªç›´æŽ¥çš„æ€è·¯æ˜¯ï¼Œæ˜¯å¦å¯ä»¥è®©è°ƒåº¦å™¨åœ¨ä»»åŠ¡ $B$ å’Œ $C$ åˆ°è¾¾æ—¶å¯¹å…¶è¿›è¡Œè°ƒåº¦ï¼ŒæŒ‰ç…§è¿™ä¸ªæ€è·¯äº§ç”Ÿäº† SJF ç­–ç•¥çš„ **æŠ¢å å¼** ç‰ˆæœ¬ï¼Œå³ **æœ€çŸ­å®Œæˆæ—¶é—´ä»»åŠ¡ä¼˜å…ˆ**ï¼ˆShortest Time-to-Completion First, STCFï¼‰ã€‚

1. åœ¨ FCFS ç­–ç•¥å’Œ SJF ç­–ç•¥ä¸­ï¼Œè°ƒåº¦å™¨å¿…é¡»ç­‰å¾…ä¸€ä¸ªä»»åŠ¡æ‰§è¡Œå®Œæˆ–è€…ä¸»åŠ¨é€€å‡ºæ‰§è¡Œæ‰èƒ½å¼€å§‹ä¸‹ä¸€ä¸ªè°ƒåº¦ï¼Œå› æ­¤è¢«ç§°ä¸º **éžæŠ¢å å¼è°ƒåº¦**ã€‚

2. è€Œ STCF ç­–ç•¥åœ¨ **ä»»åŠ¡åˆ°è¾¾ç³»ç»Ÿ** æ—¶ä¹Ÿä¼šè¿›è¡Œè°ƒåº¦ï¼Œæœ‰å¯èƒ½ä¼šä¸­æ–­å½“å‰æ­£åœ¨æ‰§è¡Œçš„ä»»åŠ¡ï¼Œè½¬è€Œæ‰§è¡Œå…¶ä»–ä»»åŠ¡ï¼Œå› æ­¤è¢«ç§°ä¸º **æŠ¢å å¼è°ƒåº¦**ã€‚

   > ä¸‹å›¾æ˜¯ä¸Šé¢çš„ä¾‹å­åœ¨ STCF ç­–ç•¥ä¸‹çš„æ‰§è¡Œæµã€‚
   >
   > ![image-20220724211340391](https://ricear.com/media/202207/2022-07-24_211346_3274790.9443944481394245.png)
   >
   > - ç”±äºŽä»»åŠ¡ $A$ åœ¨ç¬¬ 0 ç§’é¦–å…ˆåˆ°è¾¾ç³»ç»Ÿï¼Œæ‰€ä»¥ä»»åŠ¡ $A$ æ‰§è¡Œäº† 1 ç§’ã€‚
   > - åœ¨ç¬¬ 1 ç§’æ—¶ï¼Œä»»åŠ¡ $B$ åˆ°è¾¾ç³»ç»Ÿï¼Œç”±äºŽå…¶æ‰€éœ€çš„å®Œæˆæ—¶é—´å°‘äºŽä»»åŠ¡ $A$ï¼Œæ‰€ä»¥ä»»åŠ¡ $B$ å¯ä»¥ç«‹å³æŠ¢å ä»»åŠ¡ $A$ å¹¶æ‰§è¡Œã€‚
   > - è€Œå½“ä»»åŠ¡ $C$ åœ¨ç¬¬ 2 ç§’åˆ°è¾¾æ—¶ï¼Œä»»åŠ¡ $B$ å·²ç»è¿è¡Œäº† 1 ç§’ï¼Œä»»åŠ¡ $B$ æ‰€éœ€çš„å‰©ä½™è¿è¡Œæ—¶é—´å°äºŽä»»åŠ¡ $C$ çš„è¿è¡Œæ—¶é—´ï¼Œæ‰€ä»¥ä»»åŠ¡ $C$ ä¸ä¼šæŠ¢å ä»»åŠ¡ $B$ çš„æ‰§è¡Œï¼Œè€Œæ˜¯ä¼šç­‰åˆ°ä»»åŠ¡ $B$ ç»“æŸå†å¼€å§‹æ‰§è¡Œã€‚

3. STCF ç­–ç•¥çš„ **ç¼ºç‚¹**ï¼š

   1. **é•¿ä»»åŠ¡é¥¥é¥¿**ï¼š
      1. STCF æžç«¯å€¾å‘äºŽå®Œæˆæ—¶é—´è¾ƒçŸ­çš„ä»»åŠ¡ï¼Œå› æ­¤å½“ä¸€ä¸ªç³»ç»Ÿä¸­æœ‰ **å¤§é‡çš„çŸ­ä»»åŠ¡** å’Œ **å°‘é‡çš„é•¿ä»»åŠ¡** æ—¶ï¼Œè¿™ä¸ªç³»ç»Ÿçš„é•¿ä»»åŠ¡å¾ˆå¯èƒ½ä¼š **æ— æ³•å ç”¨ CPU èµ„æº**ï¼Œä¸€ç›´å¤„äºŽé¥¥é¥¿ä¸­ï¼Œå³ **æ°¸è¿œæ— æ³•è¢«è°ƒåº¦**ã€‚
      2. åœ¨æŸäº›ç³»ç»Ÿä¸­ï¼Œé€šå¸¸ä¼šæœ‰ **åŽå°æœåŠ¡**ï¼ˆä¾‹å¦‚ç½‘ç»œæœåŠ¡ã€æ•°æ®åº“æœåŠ¡ï¼‰éšå¼€æœºå¯åŠ¨ï¼Œå¹¶ä¸€ç›´æ‰§è¡Œï¼Œä»–ä»¬çš„è¿è¡Œæ—¶é—´ç›¸æ¯”äºŽå…¶ä»–ä»»åŠ¡é•¿å¾ˆå¤šï¼ŒSJF ç­–ç•¥å’Œ STCF ç­–ç•¥å‡ ä¹Žä¸ä¼šè®©ä»–ä»¬èŽ·å¾—æ‰§è¡Œæœºä¼šï¼Œè€Œè¿™ **å¯¹äºŽæ•´ä¸ªç³»ç»Ÿè°ƒåº¦çš„å…¬å¹³æ€§æ˜¯ä¸åˆ©çš„**ã€‚

##### æ—¶é—´ç‰‡è½®è½¬

> ä¹‹å‰è®¨è®ºçš„ç­–ç•¥ä¸»è¦æ˜¯é’ˆå¯¹ **æ‰¹å¤„ç†ä»»åŠ¡** çš„ç­–ç•¥ï¼Œä»–ä»¬ä¸»è¦å…³æ³¨çš„è°ƒåº¦æŒ‡æ ‡æ˜¯ **å‘¨è½¬æ—¶é—´**ã€‚
>
> éšç€æ“ä½œç³»ç»Ÿçš„å‘å±•ï¼Œ**äº¤äº’å¼ç¨‹åº**ï¼ˆå¦‚ç»ˆç«¯ï¼‰é€æ¸æ™®åŠï¼Œä¸Žç”¨æˆ·çš„äº¤äº’ä¸ºè°ƒåº¦å¸¦æ¥äº†æ–°çš„è°ƒåº¦æŒ‡æ ‡ï¼Œå³ **å“åº”æ—¶é—´**ã€‚å“åº”æ—¶é—´æŒ‡çš„æ˜¯ **ä»Žç”¨æˆ·å‘èµ·è¯·æ±‚åˆ°ä»»åŠ¡å“åº”ç”¨æˆ·æ‰€éœ€çš„æ—¶é—´**ã€‚
>
> åœ¨ç”Ÿæ´»ä¸­ï¼Œç›¸æ¯”äºŽä»»åŠ¡èƒ½å¦å¿«é€Ÿå®Œæˆï¼Œç”¨æˆ·å¯èƒ½æ›´åœ¨æ„ä»»åŠ¡èƒ½å¦å¿«é€Ÿå“åº”ç”¨æˆ·çš„è¯·æ±‚ï¼š
>
> - ä¾‹å¦‚ä¸€ä¸ªç¨‹åºéœ€è¦ä¸€æ¬¡æ€§èŠ± 30 ç§’å®ŒæˆæŸé¡¹å·¥ä½œï¼Œä½†æ˜¯è¿‡ç¨‹ä¸­æ²¡æœ‰ä»»ä½•æç¤ºï¼›åŒæ ·çš„å·¥ä½œé‡ï¼Œå¦ä¸€ä¸ªç¨‹åºå¯èƒ½è¦èŠ±è´¹ 40 ç§’å®Œæˆï¼Œä½†æ˜¯ä¼šæ¯éš” 1 ç§’å‘ŠçŸ¥ç”¨æˆ·å½“å‰çš„è¿›åº¦ã€‚
> - åœ¨ä½¿ç”¨å‰è€…æ—¶ï¼Œç”¨æˆ·çš„è€å¿ƒä¼šéšç€æ—¶é—´é€æ¸æµé€ï¼Œå¹¶æœ€ç»ˆå€¾å‘äºŽè®¤ä¸ºè¿™ä¸ªç¨‹åºä¸èƒ½å“åº”ã€‚
> - ç›¸å¯¹åœ°ï¼Œåœ¨ä½¿ç”¨åŽè€…æ—¶ï¼Œç”¨æˆ·ä¼šæœ‰æ›´å¥½çš„ä½“éªŒï¼Œè€Œå‰è€…ç”±äºŽä»–çš„ã€Žå†·æ·¡ã€ï¼Œä¸ä¼šå—åˆ°ç”¨æˆ·çš„é’çã€‚

1. å‰æ–‡è®¨è®ºçš„ç­–ç•¥åªæœ‰åœ¨ä»»åŠ¡åˆ°è¾¾å’Œç»“æŸæ—¶æ‰ä¼šè¿›è¡Œè°ƒåº¦ï¼Œå¦‚æžœä¸€æ®µæ—¶é—´å†…æ²¡æœ‰æ–°çš„ä»»åŠ¡åˆ°è¾¾æˆ–å½“å‰ä»»åŠ¡æ²¡æœ‰æ‰§è¡Œå®Œï¼Œé‚£ä¹ˆè°ƒåº¦å™¨å°±æ— æ³•è¿›è¡Œè°ƒåº¦ï¼Œå› æ­¤ **éžè¿è¡ŒçŠ¶æ€** çš„ä»»åŠ¡ä¹Ÿ **æ— æ³•å®šæ—¶åœ°å“åº”ç”¨æˆ·**ã€‚

2. ä¸ºäº† **å®šæ—¶å“åº”ç”¨æˆ·**ï¼Œéœ€è¦ä¸ºä»»åŠ¡è®¾ç½® **æ—¶é—´ç‰‡**ï¼Œ**é™å®šä»»åŠ¡æ¯æ¬¡æ‰§è¡Œçš„æ—¶é—´**ï¼Œå½“å‰ä»»åŠ¡**æ‰§è¡Œå®Œæ—¶é—´ç‰‡**åŽï¼Œå°±åˆ‡æ¢åˆ° **è¿è¡Œé˜Ÿåˆ—ä¸­çš„ä¸‹ä¸€ä¸ªä»»åŠ¡**ï¼Œè¿™ä¸€æ€æƒ³çš„ä½“çŽ°å°±æ˜¯ **æ—¶é—´ç‰‡è½®è½¬**ï¼ˆRound Robin, RRï¼‰ç­–ç•¥ã€‚

   > ä¸‹å›¾å±•ç¤ºäº†ä¸‰ä¸ªä»»åŠ¡ $A$ã€$B$ã€$C$ åœ¨ RR ç­–ç•¥ä¸‹çš„æ‰§è¡Œæµã€‚
   >
   > ![image-20220724215049156](https://ricear.com/media/202207/2022-07-24_215054_9075200.6514582216772327.png)
   >
   > - è¯¥ RR ç­–ç•¥ä½¿ç”¨ 1 ç§’çš„æ—¶é—´ç‰‡ï¼Œä»¥ 3 ç§’ä¸ºä¸€ä¸ªå¾ªçŽ¯æ‰§è¡Œè¿™ä¸‰ä¸ªä»»åŠ¡ã€‚
   > - ç”±äºŽæ—¶é—´ç‰‡ä¸€èˆ¬ä¼šè®¾å¾—è¶³å¤Ÿå°ï¼Œæ‰€ä»¥æ‰€æœ‰ä»»åŠ¡éƒ½å¯ä»¥åœ¨ä¸€å®šæ—¶é—´å†…æ‰§è¡Œå¹¶å“åº”ç”¨æˆ·ï¼Œä»Žè€Œå°†å“åº”æ—¶é—´é™å®šåœ¨ä¸€ä¸ªå¯æŽ¥å—çš„èŒƒå›´å†…ã€‚
   > - ç›¸æ¯”äºŽ SJF ç­–ç•¥å’Œ STCF ç­–ç•¥ï¼ŒRR ç­–ç•¥ä¸ä»…æ— é¡»é¢„çŸ¥ä»»åŠ¡çš„è¿è¡Œæ—¶é—´ï¼Œè€Œä¸”ä¹Ÿä¸ä¼šå‡ºçŽ°é•¿ä»»åŠ¡é¥¥é¥¿çš„æƒ…å†µã€‚

3. å¯¹äºŽ RR ç­–ç•¥ï¼Œä¸€ä¸ªå…³é”®ç‚¹æ˜¯ä»–çš„ **æ—¶é—´ç‰‡å¤§å°** è¯¥å¦‚ä½•å–ï¼š

   1. ç†æƒ³æƒ…å†µä¸‹ï¼Œæ—¶é—´ç‰‡é€‰å–å¾—è¶Šå°ï¼Œä»»åŠ¡çš„å“åº”æ—¶é—´å°±è¶Šå¿«ã€‚
   2. ä½†æ˜¯ï¼Œä¹‹å‰çš„è®¨è®ºåˆ†æžæ˜¯åŸºäºŽæŠ½è±¡çš„æ¨¡åž‹è¿›è¡Œçš„ï¼Œæ²¡æœ‰è€ƒè™‘ä»¥ä¸‹å› ç´ ï¼š
      1. è°ƒåº¦å™¨çš„**è°ƒåº¦å¼€é”€**ã€‚
      2. ä»»åŠ¡åˆ‡æ¢æ‰€å¯¼è‡´çš„ **ä¸Šä¸‹æ–‡åˆ‡æ¢å¼€é”€**ã€‚
   3. åœ¨å®žé™…åœºæ™¯ä¸­ï¼Œï¼š
      1. **è¿‡å°çš„æ—¶é—´ç‰‡**åè€Œä¼š **å¼•å…¥å¤§é‡å¼€é”€**ï¼Œ**è®©ä»»åŠ¡çš„è°ƒåº¦æˆä¸ºä¸¥é‡çš„æ€§èƒ½ç“¶é¢ˆ**ã€‚
      2. å¦‚æžœ**æ—¶é—´ç‰‡è¿‡é•¿**ï¼Œæ¯”å¦‚ 100 ç§’ï¼ŒRR ç­–ç•¥ä¸ä»…æ— æ³•æ»¡è¶³ç”¨æˆ·å¯¹äºŽå“åº”æ—¶é—´çš„éœ€æ±‚ï¼Œè¿˜å¾ˆå¯èƒ½ **äº§ç”Ÿä¸Ž FCFS ç­–ç•¥ç›¸åŒçš„è´Ÿé¢æ•ˆæžœ**ã€‚
   4. å› æ­¤ï¼Œå¦‚ä½•å°†æ—¶é—´ç‰‡é™ä½Žåˆ°ä¸€ä¸ªåˆç†çš„å€¼å¯¹äºŽå¼€å‘è€…æ˜¯ä¸€å¤§æŒ‘æˆ˜ï¼Œä»–è¦æ±‚å¼€å‘è€…å¯¹æ•´ä¸ªåº”ç”¨åœºæ™¯æœ‰ç€æ˜Žç¡®çš„è®¤çŸ¥ã€‚

4. RR ç­–ç•¥çš„ **ç¼ºç‚¹**ï¼š

   1. åœ¨ **ä»»åŠ¡è¿è¡Œæ—¶é—´ç›¸ä¼¼** çš„åœºæ™¯ä¸‹ **å¹³å‡å‘¨è½¬æ—¶é—´é«˜**ã€‚

      > ä»¥ä¸Šé¢çš„åœºæ™¯ä¸ºä¾‹ï¼Œå‡è®¾ $A$ã€$B$ã€$C$ ä¸‰ä¸ªä»»åŠ¡çš„è¿è¡Œæ—¶é—´éƒ½æ˜¯ 3 ç§’ï¼Œé‚£ä¹ˆä»–ä»¬ä¼šåˆ†åˆ«åœ¨ç¬¬ 7 ç§’ã€ç¬¬ 8 ç§’ã€ç¬¬ 9 ç§’å®Œæˆã€‚
      >
      > è¿™ä¸ªæ‰§è¡Œæµä»£è¡¨äº†æ¯ä¸ªä»»åŠ¡éƒ½åœ¨æœ€åŽæ—¶åˆ»å®Œæˆï¼Œä»–ä»¬çš„å¹³å‡å‘¨è½¬æ—¶é—´éžå¸¸é«˜ã€‚
      >
      > RR ç­–ç•¥ä¸€å®šç¨‹åº¦ä¸Šä¿è¯äº†æ¯ä¸ªä»»åŠ¡ä¹‹é—´çš„ **å…¬å¹³æ€§**ï¼ˆæ¯ä¸ªä»»åŠ¡éƒ½èƒ½åœ¨ä¸€å®šæ—¶é—´å†…è¢«è°ƒåº¦åˆ°ï¼‰ï¼ŒåŒæ—¶ä¹Ÿå¯èŽ·å¾— **è‰¯å¥½çš„å“åº”æ—¶é—´**ï¼Œä½†æ˜¯ï¼Œåœ¨ **ç‰¹å®šåœºæ™¯ä¸‹**ï¼ˆå¦‚æ¯ä¸ªä»»åŠ¡è¿è¡Œæ—¶é—´ç›¸ä¼¼ï¼‰ï¼Œä»»åŠ¡çš„ **å¹³å‡å‘¨è½¬æ—¶é—´å¯èƒ½è¾ƒå·®**ã€‚

#### ä¼˜å…ˆçº§è°ƒåº¦

> çŽ°åœ¨å‡è®¾æœ‰ä»¥ä¸‹åœºæ™¯ï¼š
>
> - å°æ˜Žåœ¨ä¸€ä¸ªå•æ ¸è®¡ç®—æœºä¸Šé€šè¿‡å¤šä¸ªåŽå°ç¨‹åºå¤„ç†ä»–å‡†å¤‡çš„å¤§æ•°æ®é›†ï¼Œè¿™äº›åŽå°ç¨‹åºä¼šåœ¨æŒ‡å®šçš„æ–‡ä»¶ç›®å½•ä¸­è¾“å‡ºä¸­é—´ç»“æžœæ–‡ä»¶ã€‚å°æ˜Žå¸Œæœ›é€šè¿‡å‘½ä»¤è¡Œçš„ `ls` æŒ‡ä»¤çœ‹åˆ°æ•°æ®å¤„ç†çš„è¿›åº¦ã€‚
> - æˆ‘ä»¬å‡è®¾ç³»ç»Ÿä½¿ç”¨ RR ç­–ç•¥è¿›è¡Œè°ƒåº¦ï¼ŒçŽ°åœ¨ç³»ç»Ÿä¸­æœ‰ $N$ ä¸ªæ‰¹å¤„ç†ä»»åŠ¡å’Œä¸€ä¸ªå‘½ä»¤è¡Œçš„äº¤äº’å¼ä»»åŠ¡ï¼ŒåŸºäºŽ RR ç­–ç•¥çš„è°ƒåº¦ä¸ä¼šå¯¹ç®¡ç†çš„ä»»åŠ¡è¿›è¡ŒåŒºåˆ†ï¼Œå› æ­¤å•ä½æ—¶é—´å†…å‘½ä»¤è¡Œåªä¼šå ç”¨ $\frac{1}{N + 1}$ çš„ CPU æ—¶é—´ï¼Œå¤§éƒ¨åˆ†æ—¶é—´ä¸‹ï¼ŒåŽå°ç¨‹åºéƒ½ä¼šé˜»å¡ž `ls` æŒ‡ä»¤çš„æ‰§è¡Œã€‚
> - æ­¤æ—¶å°æ˜Žä¼šæ„Ÿè§‰æ•´ä¸ªç³»ç»Ÿè¢«å¡æ­»ï¼Œå°±è¿ž `ls` éƒ½éœ€è¦å¾ˆé•¿æ—¶é—´æ‰èƒ½å“åº”ï¼Œå¦‚æžœå°æ˜Žè„¾æ°”ä¸å¥½ï¼Œä»–å¾ˆæœ‰å¯èƒ½é©¬ä¸Šé€šè¿‡ `kill` æŒ‡ä»¤å°†ä»–çš„åŽå°ç¨‹åºç»ˆæ­¢ã€‚
> - å› æ­¤ï¼Œä¸ºäº†ä¿æŒè‰¯å¥½çš„ç”¨æˆ·ä½“éªŒï¼Œè°ƒåº¦å™¨åº”å°½é‡é¿å…äº¤äº’å¼ä»»åŠ¡è¢«æ‰¹å¤„ç†ä»»åŠ¡é˜»å¡žã€‚

1. å¦‚æžœæ“ä½œç³»ç»Ÿå¯ä»¥åŒºåˆ† **äº¤äº’å¼ä»»åŠ¡** å’Œ **æ‰¹å¤„ç†ä»»åŠ¡**ï¼Œé‚£ä¹ˆä»–å°±å¯ä»¥è®¾ç½®ä¸€ä¸ªè®©äº¤äº’å¼ä»»åŠ¡ä¼˜å…ˆæ‰§è¡Œçš„è°ƒåº¦ç­–ç•¥ï¼Œä¸ºæ­¤ï¼Œè°ƒåº¦å™¨å¼•å…¥äº† **ä¼˜å…ˆçº§** çš„æ¦‚å¿µï¼š
   1. ä¼˜å…ˆçº§æ˜¯ä¸€ä¸ªå¾ˆç›´æŽ¥ã€æœ‰æ•ˆçš„æ¦‚å¿µï¼Œé€šè¿‡ä¸ºæ¯ä¸ªä»»åŠ¡æŒ‡å®šä¸€ä¸ªä¼˜å…ˆçº§ï¼Œè°ƒåº¦å™¨å¯ä»¥ç¡®å®šå“ªäº›ä»»åŠ¡åº”è¯¥ä¼˜å…ˆæ‰§è¡Œã€‚
   2. é€šè¿‡è®¾ç½®äº¤äº’å¼ä»»åŠ¡çš„ä¼˜å…ˆçº§é«˜äºŽæ‰¹å¤„ç†ä»»åŠ¡ï¼Œæ“ä½œç³»ç»Ÿå¯ä»¥ä¸ºç”¨æˆ·æä¾›æ›´å¥½çš„ä½“éªŒã€‚
2. ä¸ºä»»åŠ¡ç¡®å®šä¼˜å…ˆçº§éœ€è¦è€ƒè™‘å¾ˆå¤šå› ç´ ï¼Œä¸€ä¸ªç›´æŽ¥çš„è®¾ç½®ä¼˜å…ˆçº§çš„æ–¹å¼æ˜¯ï¼Œæ ¹æ® **ä»»åŠ¡åœ¨ç³»ç»Ÿä¸­çš„é‡è¦ç¨‹åº¦** åˆ†é…ä¼˜å…ˆçº§ï¼š
   1. å¯¹äºŽ **æ‹¥æœ‰æ˜Žç¡®çš„æˆªæ­¢æ—¶é—´çš„å®žæ—¶ä»»åŠ¡**ï¼Œæˆ‘ä»¬åº”è¯¥ä¸ºå…¶åˆ†é… **æœ€é«˜ä¼˜å…ˆçº§**ï¼Œå°½é‡ä¿è¯å®žæ—¶ä»»åŠ¡å¯ä»¥åœ¨æˆªæ­¢æ—¶é—´ä»¥å‰å®Œæˆã€‚
   2. **äº¤äº’å¼ä»»åŠ¡** çš„å“åº”æ—¶é—´ç›´æŽ¥å½±å“ç”¨æˆ·ä½“éªŒï¼Œä¸ºäº†é¿å…ç”¨æˆ·ä½“éªŒè¾ƒå·®ï¼Œæˆ‘ä»¬éœ€è¦ä¸ºå…¶åˆ†é… **è¾ƒé«˜çš„ä¼˜å…ˆçº§**ã€‚
   3. **æ‰¹å¤„ç†ä»»åŠ¡** ä¸€èˆ¬ä¸åƒå®žæ—¶ä»»åŠ¡ä¸Žäº¤äº’å¼ä»»åŠ¡é‚£æ ·å¯¹æ—¶å»¶ã€å“åº”æ—¶é—´æœ‰è¾ƒé«˜è¦æ±‚ï¼Œæ‰€ä»¥è¿™ç±»ä»»åŠ¡çš„ä¼˜å…ˆçº§è¾ƒä½Žã€‚
3. ä¸‹é¢æˆ‘ä»¬å°†ä»‹ç»ä¸€ä¸ªç›´è§‚çš„é™æ€ä¼˜å…ˆçº§è°ƒåº¦ç­–ç•¥ï¼Œå³ **å¤šçº§é˜Ÿåˆ—**ï¼ŒåŸºäºŽè¯¥ç­–ç•¥çš„ä»»åŠ¡ä¼šä¸¥æ ¼æ ¹æ®é¢„è®¾çš„ä¼˜å…ˆçº§è¿›è¡Œè°ƒåº¦ã€‚åŸºäºŽå¯¹è¯¥è°ƒåº¦ç­–ç•¥çš„è§‚å¯Ÿï¼ŒåŽé¢ä¼šé€æ­¥ç»™å‡ºä¸€äº›å…³äºŽè®¾ç½®ä¼˜å…ˆçº§çš„å¯å‘ç»éªŒã€‚æœ€åŽï¼Œæˆ‘ä»¬ä¼šä»‹ç»ä¸€ä¸ªç»å…¸çš„åŸºäºŽå¤šçº§é˜Ÿåˆ—çš„åŠ¨æ€ä¼˜å…ˆçº§è°ƒåº¦ç­–ç•¥ï¼Œå³ **å¤šçº§åé¦ˆé˜Ÿåˆ—**ã€‚

##### å¤šçº§é˜Ÿåˆ—

> é¦–å…ˆï¼Œæˆ‘ä»¬å¯ä»¥è¯•æƒ³ä¸€ä¸ªçœŸå®žçš„ç”Ÿæ´»åœºæ™¯ï¼š
>
> - åœ¨æœºåœºæœ‰ä¸€æž¶èˆªç­å‡†å¤‡èµ·é£žï¼Œæˆ‘ä»¬å°†éœ€è¦ç™»æœºçš„äººå‘˜åˆ†ä¸ºä¸‰ç±»ï¼š
>   - ç¬¬ä¸€ç±»æ˜¯é£žè¡Œå‘˜ã€ç©ºä¹˜ã€ç»´æŠ¤äººå‘˜ã€‚
>   - ç¬¬äºŒç±»æ˜¯è´­ä¹°å•†åŠ¡èˆ±æœºç¥¨çš„ VIP ä¹˜å®¢ã€‚
>   - ç¬¬ä¸‰ç±»æ˜¯æ™®é€šä¹˜å®¢ã€‚
> - åœ¨é£žæœºå…è®¸ç™»æœºä»¥å‰ï¼Œç¬¬ä¸€ç±»çš„å·¥ä½œäººå‘˜ä¼šåœ¨ä¸“ç”¨åœºæ‰€ç­‰å¾…ï¼ŒVIP ä¹˜å®¢ä¸€èˆ¬ä¼šåœ¨ VIP å€™æœºå®¤ç­‰å¾…ï¼Œå…¶ä»–ä¹˜å®¢åˆ™ä¼šåœ¨å€™æœºå¤§åŽ…ç­‰å¾…ã€‚
> - åœ¨é£žæœºåˆ°è¾¾åŽï¼Œå·¥ä½œäººå‘˜éœ€è¦ç«‹å³ç™»æœºè¿›è¡Œé£žæœºçš„ç»´æŠ¤ã€æ£€æŸ¥ã€ä¸´èµ·é£žå·¥ä½œï¼Œå¯ä»¥ç†è§£ä¸ºä»–ä»¬çš„ç™»æœºä¼˜å…ˆçº§æœ€é«˜ã€‚å½“å·¥ä½œäººå‘˜å‡†å¤‡å¥½ä»¥åŽï¼ŒåŽä¸¤ç±»ä¹˜å®¢å¯ä»¥å¼€å§‹ç™»æœºã€‚è€Œåœ¨ç™»æœºæ—¶ï¼Œä¸€èˆ¬æ˜¯å…ˆç­‰å¾… VIP ä¹˜å®¢å…¨éƒ¨ç™»æœºå®Œï¼Œæ™®é€šä¹˜å®¢æ‰å¼€å§‹ç™»æœºã€‚
> - æˆ‘ä»¬å°†è¿™ä¸ªåœºæ™¯ä¸Žæ“ä½œç³»ç»Ÿè°ƒåº¦è¿›è¡Œç±»æ¯”ï¼š
>   - å·¥ä½œäººå‘˜å°±æ˜¯å®žæ—¶ä»»åŠ¡ï¼Œä»–ä»¬è´Ÿè´£åœ¨è§„å®šæ—¶é—´å†…ç¡®ä¿é£žæœºå¯ä»¥æŒ‰æ—¶èµ·é£žï¼›VIP ä¹˜å®¢ä¸Žäº¤äº’å¼ä»»åŠ¡ä¸€æ ·æœ‰ç€ç›¸å¯¹è¾ƒé«˜çš„ä¼˜å…ˆçº§ï¼›è€Œå…¶ä»–ä¹˜å®¢åˆ™ä¸Žæ‰¹å¤„ç†ä»»åŠ¡ç±»ä¼¼ï¼Œå…¶ä¼˜å…ˆçº§ä½ŽäºŽå®žæ—¶ä»»åŠ¡å’Œäº¤äº’å¼ä»»åŠ¡ã€‚
>   - ä»¥ä¸Šä¸‰ç±»äººå‘˜è¢«åˆ†åœ¨ä¸åŒçš„åœºæ‰€ç­‰å¾…ï¼Œå°±å¥½åƒæ“ä½œç³»ç»Ÿå°†ä¸åŒä¼˜å…ˆçº§çš„ä»»åŠ¡æ”¾åœ¨ä¸åŒçš„ä»»åŠ¡é˜Ÿåˆ—ä¸­ï¼›å¦å¤–ï¼Œå¯¹äºŽä¼˜å…ˆçº§ç›¸åŒçš„äººå‘˜ï¼Œä»–ä»¬çš„ç™»è®°é¡ºåºå¹¶æ²¡æœ‰æ˜Žç¡®è¦æ±‚ï¼Œå·¥ä½œäººå‘˜åªéœ€è¦æ¯”ä¹˜å®¢å…ˆè¡Œç™»æœºï¼ŒæŒ‰æ—¶åšå¥½å‡†å¤‡å·¥ä½œå³å¯ï¼Œä¹˜å®¢ä¸€èˆ¬é‡‡ç”¨æŽ’é˜Ÿï¼ˆå³å…ˆåˆ°å…ˆå¾—ï¼‰çš„æ–¹å¼å†³å®šç›¸äº’ä¹‹é—´çš„ç™»æœºé¡ºåºã€‚

1. **å¤šçº§é˜Ÿåˆ—**ï¼ˆMulti Level Queue, MLQï¼‰ç­–ç•¥å°±æ˜¯ä»¥ä¸Šé¢ç±»ä¼¼çš„æ€æƒ³è¿›è¡Œè®¾è®¡çš„ï¼š

   ![image-20220725163810567](https://ricear.com/media/202207/2022-07-25_163818_3612650.10028675379274943.png)

   1. æ¯ä¸ªä»»åŠ¡ä¼šè¢«åˆ†é… **é¢„å…ˆè®¾ç½®å¥½çš„ä¼˜å…ˆçº§**ï¼Œ**æ¯ä¸ªä¼˜å…ˆçº§å¯¹åº”ä¸€ä¸ªé˜Ÿåˆ—**ï¼Œä»»åŠ¡ä¼šè¢«å­˜å‚¨åœ¨å¯¹åº”çš„ **ä¼˜å…ˆçº§é˜Ÿåˆ—** ä¸­ã€‚
   2. å¦‚æžœ **ä¼˜å…ˆçº§ä¸åŒ** çš„ä»»åŠ¡åŒæ—¶å¤„äºŽé¢„å¤‡çŠ¶æ€ï¼Œé‚£ä¹ˆè°ƒåº¦å™¨åº”è¯¥å€¾å‘äºŽè°ƒåº¦ **ä¼˜å…ˆçº§è¾ƒé«˜** çš„ä»»åŠ¡ï¼Œå› æ­¤ **ä¸€ä¸ªä»»åŠ¡å¿…é¡»ç­‰åˆ°æ‰€æœ‰ä¼˜å…ˆçº§æ¯”ä»–é«˜çš„ä»»åŠ¡è°ƒåº¦å®Œæ‰å¯ä»¥è¢«è°ƒåº¦**ã€‚
   3. å¤„äºŽ **ç›¸åŒä¼˜å…ˆçº§** é˜Ÿåˆ—çš„ä»»åŠ¡ï¼Œä»–ä»¬å†…éƒ¨çš„è°ƒåº¦æ–¹å¼ **æ²¡æœ‰ç»Ÿä¸€æ ‡å‡†**ï¼Œå¯ä»¥é’ˆå¯¹æ€§åœ°ä¸ºä¸åŒé˜Ÿåˆ—é‡‡ç”¨ä¸åŒè°ƒåº¦ç­–ç•¥ï¼Œä¾‹å¦‚ FCFS ç­–ç•¥ æˆ– RR ç­–ç•¥ã€‚

2. MLQ ç­–ç•¥é€‚åˆ **é™æ€** çš„åº”ç”¨åœºæ™¯ï¼Œè¿™ç±»åœºæ™¯ä¸‹ **ä»»åŠ¡ä¿¡æ¯**ï¼ˆä¾‹å¦‚ä»»åŠ¡çš„å¤§è‡´è¿è¡Œæ—¶é—´ã€èµ„æºä½¿ç”¨æƒ…å†µç­‰ï¼‰**å¯ä»¥åœ¨æ‰§è¡Œå‰å‘ŠçŸ¥**ï¼Œæ ¹æ®ä»»åŠ¡ä¿¡æ¯ï¼Œå¯ä»¥ç”Ÿæˆå¯¹åº”çš„è°ƒåº¦æ¨¡åž‹ï¼Œå¹¶è¿›è€Œè®¡ç®—å‡ºæ¯ç§ä»»åŠ¡é€‚åˆçš„ä¼˜å…ˆçº§ä»¥è¿›è¡Œè°ƒåº¦ã€‚

3. åœ¨è®¾ç½® MLQ ç­–ç•¥çš„ä»»åŠ¡ä¼˜å…ˆçº§æ—¶ï¼Œéœ€è¦æ³¨æ„ **å°† I/O å¯†é›†åž‹ä»»åŠ¡çš„ä¼˜å…ˆçº§æé«˜**ã€‚

   > æˆ‘ä»¬å¯ä»¥è¯•æƒ³ä¸€ç§è®¡ç®—å¯†é›†åž‹ä¸Ž I/O å¯†é›†åž‹ä»»åŠ¡æ··åˆè¿è¡Œçš„åœºæ™¯ï¼Œå‡è®¾è®¡ç®—å¯†é›†åž‹ä»»åŠ¡ä¼˜å…ˆçº§æ¯” I/O å¯†é›†åž‹ä»»åŠ¡ä¼˜å…ˆçº§é«˜ï¼Œé‚£ä¹ˆå°±å¾ˆå¯èƒ½é‡åˆ°ä»¥ä¸‹æƒ…å†µï¼š
   >
   > - å¤§é‡çš„é«˜ä¼˜å…ˆçº§çš„è®¡ç®—å¯†é›†åž‹ä»»åŠ¡ä¼˜å…ˆäºŽ I/O å¯†é›†åž‹ä»»åŠ¡æ‰§è¡Œï¼Œè€Œ I/O å¯†é›†åž‹ä»»åŠ¡ä¸€ç›´æ²¡æœ‰æœºä¼šå‘èµ· I/O è¯·æ±‚ï¼Œå¿…é¡»ç­‰åˆ°æ‰€æœ‰è®¡ç®—å¯†é›†åž‹ä»»åŠ¡å®Œæˆæ‰å¯ä»¥æ‰§è¡Œï¼Œæœ€ç»ˆé€ æˆ I/O èµ„æºåˆ©ç”¨çŽ‡ä½Žä¸‹ã€‚
   >
   > ç”±äºŽ I/O å¯†é›†åž‹ä»»åŠ¡ä¸€èˆ¬ä¸ä¼šæ¶ˆè€—å¤§é‡ CPU èµ„æºï¼Œå®Œæˆå¯ä»¥æé«˜å…¶ä¼˜å…ˆçº§ï¼ŒçŽ‡å…ˆå‘èµ· I/O è¯·æ±‚ï¼Œå……åˆ†åˆ©ç”¨ç©ºé—²çš„ I/O èµ„æºã€‚

4. MLQ ç­–ç•¥çš„ **ä¼˜ç‚¹**ï¼š

   1. MLQ ç­–ç•¥æ˜¯ä¸€ç§ **é«˜æ•ˆ** çš„ä¼˜å…ˆçº§è°ƒåº¦ç­–ç•¥ã€‚

      > ç”±äºŽé˜Ÿåˆ—çš„æ•°é‡ä¸€èˆ¬æ˜¯é¢„å…ˆç¡®å®šçš„ï¼Œè°ƒåº¦å™¨å¯ä»¥åœ¨ $O(1)$ æ—¶é—´å†…ï¼ˆç›¸å¯¹äºŽä»»åŠ¡æ€»é‡ $N$ï¼‰æ‰¾åˆ°æ‰€æœ‰éžç©ºé˜Ÿåˆ—ä¸­ä¼˜å…ˆçº§æœ€é«˜çš„ä¸€ä¸ªï¼Œå¹¶é€‰å–å…¶é˜Ÿåˆ—å¤´çš„ä»»åŠ¡è¿›è¡Œè°ƒåº¦ã€‚

5. MLQ ç­–ç•¥çš„ **ç¼ºç‚¹**ï¼š

   1. **ä½Žä¼˜å…ˆçº§ä»»åŠ¡é¥¥é¥¿**ã€‚

      > åœ¨ä»»åŠ¡è°ƒåº¦æ—¶ï¼Œå¾ˆæœ‰å¯èƒ½å‡ºçŽ°ä»¥ä¸‹æƒ…å†µï¼š
      >
      > ![image-20220725170214256](https://ricear.com/media/202207/2022-07-25_170221_0950120.7069557050334421.png)
      >
      > - ä¸€ä¸ªä½Žä¼˜å…ˆçº§çš„ä»»åŠ¡ä¸€ç›´åœ¨ç­‰å¾…æ‰§è¡Œï¼Œä½†æ˜¯å¤§é‡é«˜ä¼˜å…ˆçº§çš„ä»»åŠ¡ä¸æ–­è¿›å…¥ç³»ç»Ÿï¼Œé€ æˆä½Žä¼˜å…ˆçº§çš„ä»»åŠ¡æ— æ³•è¢«è°ƒåº¦ï¼Œå³ **ä½Žä¼˜å…ˆçº§ä»»åŠ¡é¥¥é¥¿**ã€‚
      > - å¦‚æžœè°ƒåº¦å™¨éœ€è¦ä¿è¯ä¸€å®šçš„ **å…¬å¹³æ€§**ï¼Œé¿å… MLQ ç­–ç•¥å¼•èµ·çš„é¥¥é¥¿ï¼Œéœ€è¦é¢å¤–çš„æœºåˆ¶ **ç›‘æŽ§ä»»åŠ¡ç­‰å¾…æ—¶é—´**ï¼Œ**ä¸ºç­‰å¾…æ—¶é—´è¿‡é•¿**ï¼ˆå¦‚è¶…è¿‡ä¸€å®šé˜ˆå€¼ï¼‰**çš„ä»»åŠ¡æå‡ä¼˜å…ˆçº§**ã€‚

   2. **ä¼˜å…ˆçº§åè½¬**ï¼š

      1. ä¼˜å…ˆçº§åè½¬æ˜¯ç”±äºŽ [åŒæ­¥](https://ricear.com/project-26/doc-325) å¯¼è‡´ **çº¿ç¨‹æ‰§è¡Œé¡ºåºè¿åé¢„è®¾ä¼˜å…ˆçº§** çš„é—®é¢˜ã€‚

      2. **é«˜ä¼˜å…ˆçº§çš„ä»»åŠ¡è¢«ä½Žä¼˜å…ˆçº§ä»»åŠ¡é˜»å¡ž**ï¼Œå¯¼è‡´**é«˜ä¼˜å…ˆçº§ä»»åŠ¡è¿Ÿè¿Ÿå¾—ä¸åˆ°è°ƒåº¦**ï¼Œä½†å…¶ä»–**ä¸­ç­‰ä¼˜å…ˆçº§çš„ä»»åŠ¡å´èƒ½æŠ¢åˆ° CPU èµ„æº**ã€‚

      3. ä»ŽçŽ°è±¡ä¸Šæ¥çœ‹ï¼Œ**å¥½åƒæ˜¯ä¸­ä¼˜å…ˆçº§çš„ä»»åŠ¡æ¯”é«˜ä¼˜å…ˆçº§ä»»åŠ¡å…·æœ‰æ›´é«˜çš„ä¼˜å…ˆæƒ**ã€‚

         >   - å‡å®šä¸€ä¸ªè¿›ç¨‹ä¸­æœ‰ä¸‰ä¸ªçº¿ç¨‹ Thread1ï¼ˆé«˜ï¼‰ã€Thread2ï¼ˆä¸­ï¼‰ã€Thread3ï¼ˆä½Žï¼‰ï¼Œè€ƒè™‘ä¸‹å›¾çš„æ‰§è¡Œæƒ…å†µã€‚
         >
         >     ![](https://ricear.com/media/202105/2021-05-18_091611.png)
         >
         >     - `T0` æ—¶åˆ»ï¼Œ`Thread3` è¿è¡Œï¼Œå¹¶èŽ·å¾—åŒæ­¥èµ„æº`SYNCH1`ã€‚
         >     - `T1` æ—¶åˆ»ï¼Œ`Thread2` å¼€å§‹è¿è¡Œï¼Œç”±äºŽä¼˜å…ˆçº§é«˜äºŽ`Thread3`ï¼Œ`Thread3` è¢«å¼ºå ï¼ˆ**æœªé‡Šæ”¾åŒæ­¥èµ„æº `SYNCH1`**ï¼‰ã€‚
         >     - `T2` æ—¶åˆ»ï¼Œ`Thread1` æŠ¢å `Thread2`ã€‚
         >     - `T3` æ—¶åˆ»ï¼Œ`Thread1` éœ€è¦åŒæ­¥èµ„æº`SYNCH1`ï¼Œä½†`SYNCH1` è¢«æ›´ä½Žä¼˜å…ˆçº§çš„`Thread3` æ‰€æ‹¥æœ‰ï¼Œ`Thread1` è¢«æŒ‚èµ·ç­‰å¾…è¯¥èµ„æºã€‚
         >     - è€Œæ­¤æ—¶çº¿ç¨‹`Thread2` å’Œ`Thread3` éƒ½å¤„äºŽå¯è¿è¡ŒçŠ¶æ€ï¼Œ`Thread2` çš„ä¼˜å…ˆçº§å¤§äºŽ`Thread3` çš„ä¼˜å…ˆçº§ï¼Œ`Thread2` è¢«è°ƒåº¦æ‰§è¡Œï¼Œæœ€ç»ˆçš„ç»“æžœæ˜¯é«˜ä¼˜å…ˆçº§çš„`Thread1` è¿Ÿè¿Ÿæ— æ³•å¾—åˆ°è°ƒåº¦ï¼Œè€Œä¸­ä¼˜å…ˆçº§çš„`Thread2` å´èƒ½æŠ¢åˆ°`CPU` èµ„æºã€‚
         >
         >   - ä¸Šè¿°çŽ°è±¡ä¸­ï¼Œä¼˜å…ˆçº§æœ€é«˜çš„`Thread1` è¦å¾—åˆ°è°ƒåº¦ï¼Œä¸ä»…éœ€è¦ç­‰`Thread3` é‡Šæ”¾åŒæ­¥èµ„æºï¼ˆè¿™ä¸ªå¾ˆæ­£å¸¸ï¼‰ï¼Œè€Œä¸”è¿˜éœ€è¦ç­‰å¾…å¦å¤–ä¸€ä¸ªæ¯«ä¸ç›¸å…³çš„ä¸­ä¼˜å…ˆçº§çº¿ç¨‹`Thread2` æ‰§è¡Œå®Œæˆï¼ˆè¿™ä¸ªå°±ä¸åˆç†äº†ï¼‰ï¼Œä¼šå¯¼è‡´è°ƒåº¦çš„å®žæ—¶æ€§å¾ˆå·®ã€‚ 

      4. **è§£å†³æ–¹æ³•**ï¼š

         1. **ä¼˜å…ˆçº§ç»§æ‰¿**ï¼š

            1. ä¼˜å…ˆçº§ç»§æ‰¿æ˜¯æŒ‡**å½“é«˜ä¼˜å…ˆçº§è¿›ç¨‹ï¼ˆ$P_1$ï¼‰è¯·æ±‚ä¸€ä¸ªå·²ç»è¢«ä½Žä¼˜å…ˆçº§è¿›ç¨‹ï¼ˆ$P_3$ï¼‰å æœ‰çš„ä¸´æ—¶èµ„æºæ—¶ï¼Œå°†ä½Žä¼˜å…ˆçº§è¿›ç¨‹ï¼ˆ$P_3$ï¼‰çš„ä¼˜å…ˆçº§ä¸´æ—¶æå‡åˆ°ä¸Žé«˜ä¼˜å…ˆçº§è¿›ç¨‹ï¼ˆ$P_1$ï¼‰ä¸€æ ·çš„çº§åˆ«ï¼Œä½¿å¾—ä½Žä¼˜å…ˆçº§è¿›ç¨‹èƒ½æ›´å¿«çš„è¿è¡Œï¼Œä»Žè€Œå¯ä»¥æ›´å¿«çš„é‡Šæ”¾ä¸´ç•Œèµ„æºï¼Œå½“ä¼˜å…ˆçº§è¿›ç¨‹ç¦»å¼€ä¸´ç•ŒåŒºåŽï¼Œå…¶ä¼˜å…ˆçº§æ¢å¤è‡³åŽŸæœ¬çš„å€¼**ã€‚

               > ##### 
               >
               > ![](https://ricear.com/media/202105/2021-05-18_094617.png)
               >
               > 1. ä¸Žä¸Šå›¾ç›¸æ¯”ï¼Œåˆ°äº†`T3` æ—¶åˆ»ï¼Œ`Thread1` éœ€è¦`Thread3` å ç”¨çš„åŒæ­¥èµ„æº`SYNCH1`ï¼Œæ“ä½œç³»ç»Ÿæ£€æµ‹åˆ°è¿™ç§æƒ…å†µåŽï¼Œå°±æŠŠ`Thread1` çš„ä¼˜å…ˆçº§æé«˜åˆ°`Thread1` çš„ä¼˜å…ˆçº§ã€‚
               > 2. æ­¤æ—¶å¤„äºŽå¯è¿è¡ŒçŠ¶æ€çš„è¿›ç¨‹`Thread2` å’Œ`Thread3` ä¸­ï¼Œ`Thread3` çš„ä¼˜å…ˆçº§å¤§äºŽ`Thread2` çš„ä¼˜å…ˆçº§ï¼Œ`Thread3` è¢«è°ƒåº¦æ‰§è¡Œã€‚
               > 3. `Thread3` æ‰§è¡Œåˆ°`Thread4` æ—¶åˆ»ï¼Œé‡Šæ”¾äº†åŒæ­¥èµ„æº`SYNCH1`ï¼Œæ“ä½œç³»ç»Ÿæ¢å¤äº†`Thread3` çš„ä¼˜å…ˆçº§ï¼Œ`Thread1` èŽ·å¾—äº†åŒæ­¥èµ„æº`SYNCH1`ï¼Œé‡æ–°è¿›å…¥å¯æ‰§è¡Œé˜Ÿåˆ—ã€‚
               > 4. å¤„äºŽå¯è¿è¡ŒçŠ¶æ€çš„è¿›ç¨‹`Thread1` å’Œ`Thread2` ä¸­ï¼Œ`Thread1` çš„ä¼˜å…ˆçº§å¤§äºŽ`Thread2`ï¼Œæ‰€ä»¥`Thread1` è¢«è°ƒåº¦æ‰§è¡Œã€‚

            2. **å­˜åœ¨é—®é¢˜**ï¼š

               1. **æ½œåœ¨æ­»é”**ã€‚

                  > 1. ä»¥ä¸‹å›¾ä¸ºä¾‹ï¼Œé«˜ä¼˜å…ˆçº§ä»»åŠ¡`T1` è¯·æ±‚è¢«ä½Žä¼˜å…ˆçº§ä»»åŠ¡`T2` å æœ‰çš„ä¸´ç•Œèµ„æº`S2` æ—¶ï¼Œè¿›å…¥é˜»å¡žçŠ¶æ€ï¼Œæ­¤æ—¶ä¼šæŠŠ`T2` ä¼˜å…ˆçº§æå‡åˆ°`T1` çš„æ°´å¹³ã€‚
                  > 2. `T2` è¿è¡Œä¸€æ®µæ—¶é—´åŽï¼Œå½“è¯·æ±‚è¢«`T1` å æœ‰çš„é‚»æŽ¥èµ„æº`S1` æ—¶ï¼Œä¹Ÿä¼šè¿›å…¥æ­»é”çŠ¶æ€ï¼Œæ­¤æ—¶æ­»é”å½¢æˆã€‚
                  >
                  > ![](https://ricear.com/media/202105/2021-05-18_101704.png)

               2. **é“¾é˜»å¡ž**ã€‚

                  > 1. ä»¥ä¸‹å›¾ä¸ºä¾‹ï¼Œé«˜ä¼˜å…ˆçº§ä»»åŠ¡`T1` è¯·æ±‚ä¸´ç•Œèµ„æº`S1` æ—¶ï¼Œä¸­ä¼˜å…ˆçº§ä»»åŠ¡`T2` è¢«æå‡ï¼ŒèŽ·å¾—`CPU` æ‰§è¡Œæƒï¼Œæ‰§è¡Œå®Œæˆä¹‹åŽï¼Œé‡Šæ”¾`S1`ï¼Œ`T1` ç»§ç»­å¾€å‰æ‰§è¡Œã€‚
                  > 2. å½“è¯·æ±‚ä¸´ç•Œèµ„æº`S2` æ—¶ï¼Œä½Žä¼˜å…ˆçº§ä»»åŠ¡`T3` ä¼˜å…ˆçº§è¢«æå‡ï¼ŒèŽ·å¾—`CPU` æ‰§è¡Œæƒï¼Œæ‰§è¡Œå®Œæˆä¹‹åŽï¼Œé‡Šæ”¾`S2`ï¼Œ`T1` ç»§ç»­å¾€å‰æ‰§è¡Œã€‚
                  > 3. åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œ`T1` è¢«é˜»å¡žäº†ä¸¤æ¬¡ï¼Œæ›´æžç«¯çš„ä¾‹å­ï¼Œ`T1` ä¼šè¢«é˜»å¡žå¾ˆå¤šæ¬¡ï¼Œè¿™ä¸ªå«**é“¾é˜»å¡ž**ã€‚
                  >
                  > ![](https://ricear.com/media/202105/2021-05-18_103337.png)

         2. **ä¼˜å…ˆçº§å¤©èŠ±æ¿**ï¼š

            1. ä¼˜å…ˆçº§å¤©èŠ±æ¿æ˜¯æŒ‡**å°†ç”³è¯·èµ„æºçš„ä»»åŠ¡çš„ä¼˜å…ˆçº§æå‡åˆ°å¯èƒ½è®¿é—®è¯¥èµ„æºçš„æ‰€æœ‰ä»»åŠ¡ä¸­æœ€é«˜ä¼˜å…ˆçº§ä»»åŠ¡çš„ä¼˜å…ˆçº§**ã€‚

            2. å½“ä¸€ä¸ªè¿›ç¨‹**èŽ·å–åˆ°ä¸´ç•Œèµ„æº**ï¼Œå°±å°†è¯¥è¿›ç¨‹çš„ä¼˜å…ˆçº§**æå‡åˆ°ä¼˜å…ˆçº§å¤©èŠ±æ¿**ï¼Œè¿™æ ·ï¼Œè¯¥**è¿›ç¨‹ä¸ä¼šè¢«å…¶å®ƒå¯èƒ½ä½¿ç”¨è¯¥ä¸´ç•Œèµ„æºçš„è¿›ç¨‹æŠ¢å **ï¼Œä»Žè€Œå¾—åˆ°**æ›´å¿«æ‰§è¡Œ**ï¼Œ**æ›´å¿«åœ°é‡Šæ”¾ä¸´ç•Œèµ„æº**ï¼Œ**é‡Šæ”¾ä¸´ç•Œèµ„æºåŽï¼Œæ¢å¤ä¼˜å…ˆçº§**ã€‚

               > 1. å¦‚ä¸‹å›¾æ‰€ç¤ºï¼Œè¿›ç¨‹ $[P_1,P_3]$ ä¼šè®¿é—®ä¸´ç•Œèµ„æº $S_1$ï¼Œå› æ­¤ $S_1$ çš„ä¼˜å…ˆçº§å¤©èŠ±æ¿ä¸º 1ï¼ŒåŒç†å¯å¾—ï¼Œ$S_2$ çš„ä¼˜å…ˆçº§å¤©èŠ±æ¿ä¹Ÿä¸º 1.
               > 2. é¦–å…ˆ $P_3$ æˆåŠŸå æœ‰ä¸´ç•Œèµ„æº $S_1$ï¼Œæ­¤æ—¶ $P_3$ çš„ä¼˜å…ˆçº§è¢«æå‡è‡³ 1ï¼Œé¡ºåˆ©æ‰§è¡Œå®Œä¸´ç•ŒåŒºä»£ç ï¼Œæ¢å¤ä¼˜å…ˆçº§ã€‚
               > 3. ç„¶åŽ $P_2$ æŠ¢å  $P_3$ï¼ŒåŒç†ï¼Œ$P_2$ çš„ä¼˜å…ˆçº§è¢«æå‡è‡³ 1ï¼Œ$P_2$ ä¹Ÿå¯ä»¥é¡ºåˆ©æ‰§è¡Œå®Œä¸´ç•ŒåŒºä»£ç ï¼Œæ¢å¤ä¼˜å…ˆçº§ã€‚
               > 4. æœ€åŽï¼Œ$P_1$ æŠ¢å  $P_2$ï¼Œæ­¤æ—¶ï¼Œä¸´ç•Œèµ„æº $S_1$ å’Œ $S_2$ çš†å·²é‡Šæ”¾ï¼Œ$P_1$ å¯ä»¥ä¸€å£æ°”æ‰§è¡Œåˆ°åº•ï¼Œå¯è§ï¼Œè¿™é‡Œä¸å­˜åœ¨é“¾é˜»å¡žé—®é¢˜ã€‚
               >
               > ![](https://ricear.com/media/202105/2021-05-18_112000.png)

               > ä¼˜å…ˆçº§ç»§æ‰¿å’Œä¼˜å…ˆçº§å¤©èŠ±æ¿çš„åŒºåˆ«ï¼Ÿ
               >
               > 1. ä¼˜å…ˆçº§ç»§æ‰¿åªæœ‰å½“**é«˜ä¼˜å…ˆçº§ä»»åŠ¡è¯·æ±‚ä¸€ä¸ªè¢«é˜»å¡žçš„ä½Žä¼˜å…ˆçº§å æœ‰çš„ä¸´ç•Œèµ„æº**æ—¶æ‰ä¼šæå‡ä½Žä¼˜å…ˆçº§ä»»åŠ¡çš„ä¼˜å…ˆçº§ã€‚
               > 2. ä¼˜å…ˆçº§å¤©èŠ±æ¿æ˜¯åªè¦**æœ‰ä»»åŠ¡åŽ»ç”³è¯·ä¸´ç•Œèµ„æº**ï¼Œå°±ä¼šæå‡è¯¥ä»»åŠ¡çš„ä¼˜å…ˆçº§ã€‚

##### å¤šçº§åé¦ˆé˜Ÿåˆ—

> éšç€è®¡ç®—æœºçš„å‘å±•ï¼Œæ“ä½œç³»ç»Ÿä¸­ä»»åŠ¡çš„éœ€æ±‚å˜å¾—è¶Šæ¥è¶Šå¤æ‚ï¼Œä»»åŠ¡å¯èƒ½åŒæ—¶å¸Œæœ›æœ‰ **è¾ƒä½Žçš„å‘¨è½¬æ—¶é—´ä¸Žå“åº”æ—¶é—´**ï¼Œå¹¶ä¸”ä»»åŠ¡çš„ **è¿è¡Œæ—¶é—´æ— æ³•é¢„çŸ¥**ã€‚å‰é¢ä»‹ç»çš„ STCF ç­–ç•¥å’Œ RR ç­–ç•¥éƒ½æ— æ³•åŒæ—¶æ»¡è¶³ä¸Šè¿°éœ€æ±‚ã€‚å› æ­¤ï¼Œå¯»æ‰¾ä¸€ä¸ªç»¼åˆå…¨é¢çš„ã€é€‚åº”åŠ¨æ€åº”ç”¨åœºæ™¯çš„è°ƒåº¦ç­–ç•¥ï¼Œæˆä¸ºå½“æ—¶ç ”ç©¶çš„ç›®æ ‡ä¹‹ä¸€ã€‚
>
> å›¾çµå¥–èŽ·å¾—è€… [CorbatÃ³](https://en.wikipedia.org/wiki/Fernando_J._Corbat%C3%B3) äºŽ 1962 å¹´æå‡ºäº† [å¤šçº§åé¦ˆé˜Ÿåˆ—](https://en.wikipedia.org/wiki/Multilevel_feedback_queue)ï¼ˆMulti-Level Feedback Queue, MLFQï¼‰ï¼Œå…¶è®¾è®¡ç›®æ ‡æ˜¯ **åœ¨æ— æ³•é¢„çŸ¥ä»»åŠ¡ä¿¡æ¯ä¸”ä»»åŠ¡ç±»åž‹åŠ¨æ€å˜åŒ–**ï¼ˆä»»åŠ¡è¡Œä¸ºæ¨¡å¼ä¼šåœ¨è®¡ç®—å¯†é›†åž‹ä¸Ž I/O å¯†é›†åž‹é—´è½¬æ¢ï¼‰**çš„åœºæ™¯ä¸‹**ï¼Œ**æ—¢èƒ½è¾¾åˆ°ç±»ä¼¼ STCF ç­–ç•¥çš„å‘¨è½¬æ—¶é—´**ï¼Œ**åˆèƒ½åƒ RR ç­–ç•¥ä¸€æ ·å°½å¯èƒ½é™ä½Žä»»åŠ¡çš„å“åº”æ—¶é—´**ï¼Œä¸ºæ­¤ï¼ŒMLFQ ç­–ç•¥åœ¨ MLQ ç­–ç•¥çš„åŸºç¡€ä¸Šï¼Œå¢žåŠ äº† **åŠ¨æ€è®¾ç½®ä»»åŠ¡ä¼˜å…ˆçº§** çš„ç­–ç•¥ã€‚

1. ä¸Ž MLQ ç­–ç•¥ç±»ä¼¼ï¼ŒMLFQ ç­–ç•¥ä¹Ÿä¼šç»´æŠ¤å¤šä¸ªä¼˜å…ˆçº§é˜Ÿåˆ—ï¼Œä»»åŠ¡æ ¹æ®ä¼˜å…ˆçº§å­˜äºŽ **ä¸åŒé˜Ÿåˆ—** ä¸­ï¼Œ**é«˜ä¼˜å…ˆçº§ä»»åŠ¡å…ˆäºŽä½Žä¼˜å…ˆçº§ä»»åŠ¡æ‰§è¡Œ**ï¼Œå¤„äºŽ **ç›¸åŒä¼˜å…ˆçº§** çš„ä»»åŠ¡åˆ™é‡‡ç”¨ **RR ç­–ç•¥æ‰§è¡Œ**ã€‚

2. MLFQ ç­–ç•¥çš„ä¸€å¤§åˆ›æ–°æ˜¯å®žçŽ°äº† **ä¼˜å…ˆçº§çš„åŠ¨æ€é…ç½®**ï¼Œå…·ä½“ç­–ç•¥å¦‚ä¸‹ï¼š

   1. **çŸ­ä»»åŠ¡æ‹¥æœ‰æ›´é«˜çš„ä¼˜å…ˆçº§**ï¼š

      > ðŸ¤” ç»™çŸ­ä»»åŠ¡æ›´é«˜çš„ä¼˜å…ˆçº§æœ‰ä»€ä¹ˆå¥½å¤„ï¼Ÿ
      >
      > - ç¬¬ä¸€ï¼Œåœ¨ä»‹ç» SJF ç­–ç•¥æ—¶å·²ç»æåˆ°ï¼Œä¼˜å…ˆè°ƒåº¦çŸ­ä»»åŠ¡å¯ä»¥æœ‰ **æ›´å¥½çš„å¹³å‡å‘¨è½¬æ—¶é—´**ã€‚
      > - ç¬¬äºŒï¼ŒI/O å¯†é›†åž‹ä»»åŠ¡ä¸€èˆ¬åœ¨ CPU ä¸­æ‰§è¡Œçš„æ—¶é—´å¾ˆçŸ­ï¼Œç»™çŸ­ä»»åŠ¡æé«˜ä¼˜å…ˆçº§ä¹Ÿç›¸å½“äºŽæé«˜ I/O å¯†é›†åž‹ä»»åŠ¡çš„ä¼˜å…ˆçº§ï¼Œæœ‰åˆ©äºŽ **æé«˜ç³»ç»Ÿçš„ I/O èµ„æºåˆ©ç”¨çŽ‡**ã€‚
      > - ç¬¬ä¸‰ï¼Œäº¤äº’å¼ä»»åŠ¡ä¸€èˆ¬æ˜¯çŸ­ä»»åŠ¡ï¼Œæé«˜å…¶ä¼˜å…ˆçº§æœ‰åŠ©äºŽ **é™ä½Žè¿™äº›ä»»åŠ¡çš„å“åº”æ—¶é—´**ã€‚

      1. MLFQ ç­–ç•¥ä¼šé¦–å…ˆ **å¯¹ä»»åŠ¡çš„è¿è¡Œæ—¶é—´è¿›è¡Œè¯„ä¼°**ï¼Œé¢„è®¡è¿è¡Œæ—¶é—´è¾ƒçŸ­çš„ä»»åŠ¡ä¼šæ”¾å…¥ **ä¼˜å…ˆçº§è¾ƒé«˜çš„é˜Ÿåˆ—** ä¸­ï¼Œä½†æ˜¯ï¼Œåœ¨çœŸå®žç³»ç»Ÿä¸­ï¼Œå¯èƒ½æ— æ³•å‡†ç¡®è¿½è¸ªä»»åŠ¡çš„å®Œæˆæ—¶é—´å’Œå‰©ä½™å®Œæˆæ—¶é—´ï¼Œè¿™ä¹Ÿæ˜¯ SJF ç­–ç•¥å’Œ STCF ç­–ç•¥çš„ä¸€å¤§é™åˆ¶ï¼Œä¸ºæ­¤ï¼ŒMLFQ ä¼š **ç»Ÿè®¡æ¯ä¸ªä»»åŠ¡å·²ç»æ‰§è¡Œäº†å¤šé•¿æ—¶é—´**ï¼Œå¹¶æ®æ­¤ **åˆ¤æ–­è¯¥ä»»åŠ¡æ˜¯çŸ­ä»»åŠ¡è¿˜æ˜¯é•¿ä»»åŠ¡**ï¼š
         1. é¦–å…ˆï¼Œå½“ä»»åŠ¡è¿›è¡Œç³»ç»Ÿæ—¶ï¼ŒMLFQ ä¼šå‡è®¾è¯¥ä»»åŠ¡æ˜¯ **çŸ­ä»»åŠ¡**ï¼Œä¸ºå…¶è®¾ç½® **æœ€é«˜ä¼˜å…ˆçº§**ï¼Œè¿™æœ‰åˆ©äºŽäº¤äº’å¼ä»»åŠ¡è¾¾æˆ **è¾ƒçŸ­çš„å“åº”æ—¶é—´** ä»¥åŠ I/O å¯†é›†åž‹ä»»åŠ¡ **å……åˆ†åˆ©ç”¨ I/O èµ„æº**ã€‚
         2. ç„¶åŽï¼ŒMLFQ ä¼šä¸ºæ¯ä¸ªä»»åŠ¡é˜Ÿåˆ—è®¾ç½®ä»»åŠ¡çš„ **æœ€å¤§è¿è¡Œæ—¶é—´**ï¼ˆä»»åŠ¡å¤šæ¬¡è¿è¡Œçš„æ€»æ—¶é—´ï¼Œè€Œéžæ—¶é—´ç‰‡ï¼‰ï¼Œå¦‚æžœä»»åŠ¡åœ¨å½“å‰é˜Ÿåˆ—å¤šæ¬¡è¿è¡Œçš„æ€»æ—¶é—´æœ€ç»ˆ **è¶…è¿‡äº†é˜Ÿåˆ—å…è®¸çš„æœ€å¤§æ—¶é—´**ï¼ŒMLFQ ç­–ç•¥ä¼šè®¤ä¸ºè¯¥ä»»åŠ¡æ˜¯è¿è¡Œæ—¶é—´è¾ƒé•¿çš„ä»»åŠ¡ï¼Œè¿›è€Œå°†è¯¥ä»»åŠ¡çš„ **ä¼˜å…ˆçº§å‡ä¸€**ã€‚
         3. å‡­å€Ÿè¯¥æ–¹æ³•ï¼ŒMLFQ å°±å¯ä»¥å¤§è‡´é€‚é…ä»»åŠ¡çš„ä¼˜å…ˆçº§ï¼Œå³åŠ¨æ€è¯„ä¼°ä»»åŠ¡çš„è¿è¡Œæ—¶é—´ã€‚ç”±äºŽçŸ­ä»»åŠ¡ä¸€èˆ¬éƒ½å¯ä»¥åœ¨é¢„è®¾çš„æ—¶é—´ç‰‡å†…å®Œæˆï¼Œå› æ­¤å¯ä»¥ä¸€ç›´ä¿ç•™åœ¨ä¼˜å…ˆçº§è¾ƒé«˜çš„é˜Ÿåˆ—ä¸­ï¼›ç›¸å¯¹åœ°ï¼Œé•¿ä»»åŠ¡çš„ä¼˜å…ˆçº§åˆ™ä¼šéšç€æ‰§è¡Œæ¬¡æ•°çš„å¢žå¤šé€æ¸é™ä½Žã€‚

   2. **ä½Žä¼˜å…ˆçº§çš„ä»»åŠ¡é‡‡ç”¨æ›´é•¿çš„æ—¶é—´ç‰‡**ï¼š

      1. ä¸ºäº†å°½é‡ **å‡å°‘ä»»åŠ¡çš„è°ƒåº¦æ¬¡æ•°**ï¼ŒMLFQ æ ¹æ®é¢„ä¼°çš„ä»»åŠ¡æ‰§è¡Œæ—¶é—´ï¼Œç»™ä¸Žä¸€ä¸ªåˆé€‚çš„è°ƒåº¦æ—¶é—´ç‰‡ï¼Œ**ä¼˜å…ˆçº§è¶Šä½Ž** çš„ä»»åŠ¡ï¼Œå…¶ **æ—¶é—´ç‰‡è¶Šé•¿**ã€‚
      2. ç”±äºŽ MLFQ ç­–ç•¥ **æ”¯æŒæŠ¢å å¼è°ƒåº¦**ï¼Œæ‰€ä»¥æ— é¡»æ‹…å¿ƒä½Žä¼˜å…ˆçº§çš„ä»»åŠ¡é˜»å¡žæ–°è¿›å…¥ç³»ç»Ÿçš„ä»»åŠ¡ã€‚

   3. **å®šæ—¶åœ°å°†æ‰€æœ‰ä»»åŠ¡çš„ä¼˜å…ˆçº§æå‡è‡³æœ€é«˜**ï¼š

      > ä¸Ž MLQ ç­–ç•¥ç±»ä¼¼ï¼Œä¸Šé¢ä¸¤ç§ MLFQ ç­–ç•¥ä¹Ÿæœ‰å¯èƒ½é€ æˆ **ä½Žä¼˜å…ˆçº§ä»»åŠ¡é¥¥é¥¿**ï¼š
      >
      > - å½“ä¸€ä¸ª **é•¿ä»»åŠ¡** ç»è¿‡ä¸€å®šæ—¶é—´çš„è¿è¡ŒåŽï¼Œä»–æœ€ç»ˆä¼šè¢«åˆ†é…åˆ° **æœ€ä½Žçš„ä¼˜å…ˆçº§**ã€‚
      > - å¦‚æžœæ­¤æ—¶ä¸€ç›´æœ‰çŸ­ä»»åŠ¡éœ€è¦è°ƒåº¦ï¼Œé‚£ä¹ˆé•¿ä»»åŠ¡å°±æ— æ³•æ‰§è¡Œï¼Œé€ æˆé¥¥é¥¿çŽ°è±¡ã€‚
      >
      > åœ¨æŸäº›åœºæ™¯ä¸‹ï¼Œä¸€ä¸ªä»»åŠ¡åŽŸæœ¬å¯èƒ½æ˜¯ **è®¡ç®—å¯†é›†åž‹ä»»åŠ¡**ï¼Œå› è€Œè¢«æ”¾å…¥ **æœ€ä½Žä¼˜å…ˆçº§é˜Ÿåˆ—**ï¼Œä½†åœ¨ä¸€å®šæ—¶é—´åŽï¼Œ**ç”¨æˆ·å¸Œæœ›ä¸Žå…¶äº¤äº’**ï¼Œè¯¥ä»»åŠ¡åˆ™å˜æˆäº†ä¸€ä¸ªå¯¹å“åº”æ—¶é—´æœ‰è¦æ±‚çš„ **äº¤äº’å¼ä»»åŠ¡**ã€‚
      >
      > å› æ­¤ï¼ŒMLFQ ç­–ç•¥ä¼š**åœ¨ä¸€å®šæ—¶é—´å‘¨æœŸåŽå°†ç³»ç»Ÿå†…æ‰€æœ‰ä»»åŠ¡çš„ä¼˜å…ˆçº§é‡æ–°æå‡è‡³æœ€é«˜çº§**ï¼Œ**ä¿è¯ä¸ä¼šæœ‰ä»»åŠ¡é¥¥é¥¿**ã€‚

   > ä¸‹å›¾å±•ç¤ºäº†ä¸‰ä¸ªä»»åŠ¡ $A$ã€$B$ã€$C$ åŸºäºŽ MLFQ ç­–ç•¥çš„æ‰§è¡Œæµï¼š
   >
   > ![image-20220725205234992](https://ricear.com/media/202207/2022-07-25_205242_9306870.8328747716638062.png)
   >
   > 1. ä»»åŠ¡ $A$ æ˜¯ä¸€ä¸ªé•¿ä»»åŠ¡ï¼Œè€Œä»»åŠ¡ $B$ å’Œ $C$ çš„è¿è¡Œæ—¶é—´ç›¸å¯¹è¾ƒçŸ­ã€‚
   > 2. åœ¨åˆå§‹é˜¶æ®µï¼Œä»»åŠ¡ $A$ å’Œ $B$ è¿›å…¥ç³»ç»Ÿï¼Œå¹¶ä¸”è¢«åˆ†é…æœ€é«˜çš„ä¼˜å…ˆçº§ã€‚
   > 3. å½“ä»–ä»¬åœ¨é˜Ÿåˆ— 0ï¼ˆæœ€é«˜ä¼˜å…ˆçº§é˜Ÿåˆ—ï¼‰ä¸­æ‰§è¡Œè‡³æœ€å¤§è¿è¡Œæ—¶é—´åŽï¼Œè°ƒåº¦å™¨ä¼šé™ä½Žä»–ä»¬çš„ä¼˜å…ˆçº§ï¼Œå°†ä»–ä»¬ç§»è‡³é˜Ÿåˆ— 1ã€‚
   > 4. ä»»åŠ¡ $B$ åœ¨é˜Ÿåˆ— 1 æ‰§è¡Œç»“æŸï¼Œè€Œä»»åŠ¡ $A$ ä¸€ç›´æ‰§è¡Œï¼Œå› æ­¤ $A$ ä¼šå› ä¸ºä¼˜å…ˆçº§è¢«è¿›ä¸€æ­¥é™ä½Žè€Œè¢«ç§»è‡³é˜Ÿåˆ— 2ã€‚
   > 5. å½“ä»»åŠ¡ $A$ åœ¨é˜Ÿåˆ— 2 æ‰§è¡Œåˆ°ç¬¬ 2 ä¸ªæ—¶é—´ç‰‡æ—¶ï¼Œä»»åŠ¡ $C$ è¿›å…¥ç³»ç»Ÿï¼Œä»–è¢«è°ƒåº¦å™¨åˆ†é…æœ€é«˜çš„ä¼˜å…ˆçº§ï¼ŒæŠ¢å ä»»åŠ¡ $A$ çš„æ‰§è¡Œã€‚
   > 6. è¿‡äº†ä¸€æ®µæ—¶é—´åŽï¼Œåˆ°è¾¾è°ƒåº¦å™¨å®šå¼æå‡ä»»åŠ¡ä¼˜å…ˆçº§çš„æ—¶é—´é—´éš”ï¼Œä»»åŠ¡ $A$ å’Œ $C$ éƒ½è¢«ç§»è‡³é˜Ÿåˆ— 0 æ‰§è¡Œã€‚ä»»åŠ¡ $C$ éšåŽåœ¨é˜Ÿåˆ— 0 çš„ç¬¬ä¸€ä¸ªæ—¶é—´ç‰‡ç»“æŸè‡ªå·±çš„æ‰§è¡Œï¼Œè€Œé•¿ä»»åŠ¡ $A$ ç»§ç»­æ‰§è¡Œï¼Œå¹¶æœ€ç»ˆå†æ¬¡å›žåˆ°æœ€ä½Žä¼˜å…ˆçº§çš„é˜Ÿåˆ— 2ã€‚

3. MLFQ çš„ **ä¼˜ç‚¹**ï¼š

   1. MLFQ ç­–ç•¥é€šè¿‡è®°å½•ä»»åŠ¡è¿è¡Œæ—¶é—´çš„æ–¹å¼ï¼ŒåŠ¨æ€åœ°è°ƒé…ä»»åŠ¡çš„ä¼˜å…ˆçº§ï¼Œå¯ä»¥è¾¾åˆ°ä¸Ž SJF ç­–ç•¥å’Œ STCF ç­–ç•¥ç±»ä¼¼çš„ **ä½Žå¹³å‡å‘¨è½¬æ—¶é—´**ï¼ŒåŒæ—¶è¿˜èƒ½ **ä¿è¯ä»»åŠ¡çš„å“åº”æ—¶é—´**ï¼Œä¸”èƒ½ **é¿å…ä»»åŠ¡é¥¥é¥¿**ã€‚

4. MLFQ çš„ **ç¼ºç‚¹**ï¼š

   1. **å®žçŽ°å¤æ‚**ã€‚

      > - åœ¨ MLFQ ç­–ç•¥çš„å…·ä½“å®žçŽ°ä¸­ï¼Œå°±æœ‰è®¸å¤šè°ƒåº¦å‚æ•°éœ€è¦è°ƒæ•´ï¼Œä¾‹å¦‚ **ä¼˜å…ˆçº§é˜Ÿåˆ—çš„æ•°é‡**ã€**æ¯ä¸ªä¼˜å…ˆçº§é˜Ÿåˆ—é‡‡ç”¨çš„æ—¶é—´ç‰‡**ã€**ä»»åŠ¡åœ¨æ¯ä¸ªä¼˜å…ˆçº§é˜Ÿåˆ—çš„æœ€å¤§è¿è¡Œæ—¶é—´**ã€**è°ƒåº¦å™¨å®šæ—¶æå‡ä¼˜å…ˆçº§çš„æ—¶é—´é—´éš”**ã€‚
      > - å¦‚æžœå‚æ•°ä½¿ç”¨ä¸å½“ï¼Œå°±å¯èƒ½è¾¾ä¸åˆ°ä¸Žå…¶çš„è°ƒåº¦æ•ˆæžœï¼š
      >   - å¦‚æžœæå‡ä¼˜å…ˆçº§çš„æ—¶é—´é—´éš”è¿‡çŸ­ï¼Œé‚£ä¹ˆæ‰€æœ‰ä»»åŠ¡éƒ½ä¼šä¿æŒåœ¨æœ€é«˜ä¼˜å…ˆçº§çš„é˜Ÿåˆ—ä¸­ï¼ŒMLFQ ç­–ç•¥é€€åŒ–æˆ RR ç­–ç•¥ã€‚
      >   - å¦‚æžœæå‡ä¼˜å…ˆçº§çš„æ—¶é—´é—´éš”è¿‡é•¿ï¼Œå¾ˆå¯èƒ½ä¼šå¯¼è‡´é•¿ä»»åŠ¡ä¿æŒåœ¨æœ€ä½Žä¼˜å…ˆçº§é˜Ÿåˆ—ä¸­ï¼Œå¾ˆé•¿æ—¶é—´å†…æ— æ³•æ‰§è¡Œã€‚

#### å…¬å¹³å…±äº«è°ƒåº¦

> - å½“ç”¨æˆ·å…±äº«æœåŠ¡å™¨æ—¶ï¼Œä¸€ä¸ªé»˜è®¤çš„å‡è®¾æ˜¯ **ç”¨æˆ·ä½¿ç”¨çš„èµ„æºæ•°**ï¼ˆä¾‹å¦‚ CPU æ—¶é—´ï¼‰**ä¸Žæ‰€ä»˜å‡ºçš„èµ„é‡‘æ˜¯æˆæ­£æ¯”çš„**ã€‚
>
> - å‡è®¾å°æ˜Žå’Œå°çº¢åˆç§Ÿäº†ä¸€å°äº‘è®¡ç®—å¹³å°ä¸Šçš„ **å•æ ¸æœåŠ¡å™¨**ï¼Œä»–ä»¬å•†å®šå¹³åˆ† CPU æ—¶é—´ï¼Œå¹¶ä¸”å°æ˜ŽåŒæ—¶å¼€å¯ä¸‰ä¸ªä»»åŠ¡ï¼ˆä»»åŠ¡ $A$ã€$B$ã€$C$ï¼‰ï¼Œè€Œå°çº¢åªå¼€å¯ä¸€ä¸ªä»»åŠ¡ï¼ˆä»»åŠ¡ $D$ï¼‰ã€‚é‚£ä¹ˆæœ‰ä»€ä¹ˆè°ƒåº¦ç­–ç•¥èƒ½å¤Ÿä¿è¯å°æ˜Žçš„ä¸‰ä¸ªä»»åŠ¡å’Œå°çº¢çš„ä¸€ä¸ªä»»åŠ¡å¹³åˆ† CPU æ—¶é—´å‘¢ï¼Ÿ
>   - å‡è®¾è¿™äº›ä»»åŠ¡çš„ä¼˜å…ˆçº§ç›¸åŒï¼Œå¹¶ä¸”é‡‡ç”¨ RR ç­–ç•¥è¿›è¡Œå…¬å¹³è°ƒåº¦ï¼Œé‚£ä¹ˆç”±äºŽæ­¤æ—¶å°æ˜Žå¼€å¯äº†ä¸‰ä¸ªä»»åŠ¡ï¼Œä»–ä¼šå æ® 75% çš„ CPU æ—¶é—´ï¼Œè€Œå°çº¢åˆ™åªèƒ½ä½¿ç”¨å‰©ä¸‹çš„ 25%ï¼Œå› æ­¤ RR ç­–ç•¥ä¸èƒ½æ»¡è¶³ä¸¤äººå¹³åˆ† CPU èµ„æºçš„çº¦å®šã€‚
>   - å°æ˜Žå’Œå°çº¢å†³å®šå°è¯•ä¼˜å…ˆçº§è°ƒåº¦ï¼Œå°æ˜Žçš„ä¸‰ä¸ªä»»åŠ¡ä¼˜å…ˆçº§è¢«è®¾ç½®ä¸º 1ï¼ˆä½Žä¼˜å…ˆçº§ï¼‰ï¼Œè€Œå°çº¢çš„ä¸€ä¸ªä»»åŠ¡ä¼˜å…ˆçº§è¢«è®¾ç½®ä¸º 3ï¼ˆé«˜ä¼˜å…ˆçº§ï¼‰ï¼Œè¿™æ ·çš„ä¼˜å…ˆçº§åˆ†é…ä»Žæ•°å€¼ä¸Šä½“çŽ°äº†ç”¨æˆ·å¯¹èµ„æºå æ¯”çš„é¢„æœŸï¼ˆå°æ˜Žä¸Žå°çº¢çš„ CPU æ—¶é—´å æ¯”ä¸º ï¼ˆ1 + 1 + 1ï¼‰ï¼š3ï¼‰ã€‚ç„¶è€Œå®žé™…è°ƒåº¦ä¸­ï¼Œåœ¨æ²¡æœ‰é˜²æ­¢ä½Žä¼˜å…ˆçº§ä»»åŠ¡é¥¥é¥¿çš„æœºåˆ¶çš„æƒ…å†µä¸‹ï¼Œå°çº¢çš„ä»»åŠ¡ä¼šæŒç»­æ‰§è¡Œç›´åˆ°ç»“æŸã€‚æˆ‘ä»¬å‘çŽ°ï¼Œä¼˜å…ˆçº§çš„æ•°å€¼ä»…ä»…æ˜¯ç”¨äºŽæ¯”è¾ƒä¼˜å…ˆçº§é«˜ä½Žè€Œå­˜åœ¨çš„ï¼Œä»–æ— æ³•åæ˜ å•ä½æ—¶é—´å†…ä¸€ä¸ªä»»åŠ¡å¯ä»¥å ç”¨çš„ CPU æ—¶é—´æ¯”ä¾‹ã€‚å› æ­¤ä¼˜å…ˆçº§è°ƒåº¦ä¹Ÿæ— æ³•ä¿è¯ä»»åŠ¡å¯¹èµ„æºä½¿ç”¨çš„å®žé™…æ¯”ä¾‹ã€‚
> - åœ¨è€ƒè™‘èµ„æºçš„ä½¿ç”¨æƒ…å†µæ—¶ï¼Œç”¨æˆ·çœ‹é‡çš„å·²ç»ä¸å†æ˜¯å¹³å‡å‘¨è½¬æ—¶é—´æˆ–è€…å“åº”æ—¶é—´ï¼Œè€Œæ˜¯è‡ªå·± **åœ¨æ€»èµ„æºä¸­çš„å æœ‰æ¯”ä¾‹**ï¼Œç”¨æˆ·å¸Œæœ›ï¼š
>   - ä¼˜å…ˆçº§ä¸º 3 çš„ä»»åŠ¡å æœ‰çš„ CPU æ—¶é—´æ˜¯ ä¼˜å…ˆçº§ä¸º 1 çš„ä»»åŠ¡çš„ 3 è¢«ï¼Œæ˜¯ä¼˜å…ˆçº§ä¸º 6 çš„ä»»åŠ¡çš„ä¸€åŠã€‚
>   - æ”¯æŒä»¥ç”¨æˆ·æˆ–ä¸€ç»„ä»»åŠ¡ä¸ºç²’åº¦è¿›è¡Œç³»ç»Ÿèµ„æºçš„åˆ†é…ã€‚
> - ä¸ºäº†æ»¡è¶³ä»¥ä¸Šéœ€æ±‚ï¼Œ**å…¬å¹³å…±äº«è°ƒåº¦**ï¼ˆFair-Share Schedulingï¼‰åº”è¿è€Œç”Ÿï¼Œè¿™ç±»è°ƒåº¦å™¨ä¼š **é‡åŒ–ä»»åŠ¡å¯¹ç³»ç»Ÿèµ„æºçš„å æœ‰æ¯”ä¾‹**ï¼Œä»Žè€Œå®žçŽ°å¯¹èµ„æºçš„ **å…¬å¹³è°ƒåº¦**ã€‚

1. å…¬å¹³å…±äº«è°ƒåº¦ä»¥ **ä»½é¢** æ¥é‡åŒ–æ¯ä¸ªä»»åŠ¡å¯¹ CPU æ—¶é—´çš„ä½¿ç”¨ã€‚

   > ä¸‹å›¾ç»™å‡ºäº†å°æ˜Žå’Œå°çº¢å†³å®šä½¿ç”¨ä»½é¢çš„ä¾‹å­ï¼Œå‡è®¾å½“å‰ CPU æ ¸å¿ƒåªè´Ÿè´£å¤„ç†ä»–ä»¬ä¸¤äººçš„è¯·æ±‚ã€‚
   >
   > ![image-20220726170923977](https://ricear.com/media/202207/2022-07-26_170935_7898080.8707678572525932.png)
   >
   > - ä»Žå°æ˜Žå’Œå°çº¢çš„è§†è§’æ¥çœ‹ï¼Œæ¯äººéƒ½æ‹¥æœ‰ 40 çš„ä»½é¢ï¼Œå³æ¯äººä½¿ç”¨ä¸€åŠçš„ CPU æ—¶é—´ã€‚
   > - ä»»åŠ¡çš„ä»½é¢å¹¶éžç³»ç»Ÿç›´æŽ¥ç»™å®šçš„ï¼Œè€Œæ˜¯ä¸¤äººä»Žè‡ªå·±çš„ä»½é¢ä¸­é€‰å–ä¸€éƒ¨åˆ†äº¤ç»™å„è‡ªçš„ä»»åŠ¡ã€‚
   >
   > ä¸‹å›¾æ ¹æ®ä»¥ä¸Šä¾‹å­ï¼Œç»™å‡ºäº†ç†æƒ³æƒ…å†µä¸‹çš„å…¬å¹³å…±äº«è°ƒåº¦åº”è¾¾åˆ°çš„ CPU æ—¶é—´å æ¯”ã€‚
   >
   > ![image-20220726171539344](https://ricear.com/media/202207/2022-07-26_171548_2601460.9599879002310546.png)
   >
   > - å°æ˜Žçš„ä»½é¢å äº†ç³»ç»Ÿæ€»ä»½é¢çš„ 50%ï¼Œè€Œä»»åŠ¡ $B$ çš„ä»½é¢å äº†å°æ˜Žæ€»ä»½é¢çš„ 50%ï¼Œå› æ­¤ä»»åŠ¡ $B$ çš„å®žé™… CPU å æ¯”æ˜¯ 50% $\times$ 50% = 25%ã€‚

2. ä»¥ä¸Šä¾‹å­åæ˜ äº†ç”¨æˆ·ä¸åŒäºŽæ­¤å‰çš„éœ€æ±‚ï¼Œä»–ä»¬å¯èƒ½éœ€è¦ä¸€ä¸ªç›´æŽ¥æˆ–é—´æŽ¥çš„ **å‚æ•°** èƒ½å¤Ÿ **æŽ§åˆ¶ä»»åŠ¡çš„èµ„æºä½¿ç”¨æƒ…å†µ**ï¼Œè€Œä»½é¢æ”¯æŒ **å±‚çº§åŒ–** çš„åˆ†é…æ–¹å¼ï¼Œå¯ä»¥ç›´è§‚åœ°ä½“çŽ°æ¯ä¸ªä»»åŠ¡çš„ç†è®ºèµ„æºä½¿ç”¨æƒ…å†µã€‚åœ¨å®žé™…åœºæ™¯ä¸­ï¼Œä¸ºäº†æ–¹ä¾¿ç®¡ç†ï¼Œå¯ä»¥å°†ä»»åŠ¡ **åˆ†ç»„**ï¼ˆç§°ä¸º **ä»»åŠ¡ç»„**ï¼‰ï¼Œ**ä»¥ç»„ä¸ºå•ä½åˆ†é…ä»½é¢**ï¼Œä»»åŠ¡ä¼šåœ¨ç»„å†…è¿›ä¸€æ­¥åˆ†æ‘Šè¯¥ç»„æ‰€æ‹¥æœ‰çš„ä»½é¢ã€‚

> ðŸ¤” åœ¨ä¼˜å…ˆçº§è°ƒåº¦ç­–ç•¥å’Œå…¬å¹³å…±äº«è°ƒåº¦ç­–ç•¥ä¸­ï¼Œä¼˜å…ˆçº§å’Œä»½é¢éƒ½ä½“çŽ°äº†ä»»åŠ¡çš„é‡è¦æ€§ï¼Œä»–ä»¬ä¹‹é—´æœ‰ä»€ä¹ˆåŒºåˆ«ä¸Žè”ç³»ï¼Ÿ
>
> - ä¼˜å…ˆçº§ä¸Žä»½é¢éƒ½è¡¨ç¤ºäº†ä»»åŠ¡åœ¨ç³»ç»Ÿä¸­çš„é‡è¦ç¨‹åº¦ï¼Œä½†æ˜¯ä»–ä»¬çš„ç›®çš„æ˜¯ä¸åŒçš„ï¼š
>   - ä¼˜å…ˆçº§è°ƒåº¦æ˜¯ä¸ºäº† **ä¼˜åŒ–ä»»åŠ¡çš„å‘¨è½¬æ—¶é—´**ã€**å“åº”æ—¶é—´å’Œèµ„æºåˆ©ç”¨çŽ‡** è€Œè®¾è®¡çš„ï¼Œä¸åŒä»»åŠ¡çš„ä¼˜å…ˆçº§åªèƒ½ç”¨äºŽ **ç›¸äº’æ¯”è¾ƒ**ï¼Œè¡¨æ˜Ž **ä»»åŠ¡æ‰§è¡Œçš„å…ˆåŽ**ã€‚
>   - åŸºäºŽä»½é¢çš„å…¬å¹³å…±äº«è°ƒåº¦æ˜¯ä¸ºäº† **è®©æ¯ä¸ªä»»åŠ¡éƒ½èƒ½ä½¿ç”¨ä»–åº”èŽ·å¾—çš„ç³»ç»Ÿèµ„æº**ï¼Œä»½é¢çš„å€¼æ˜Žç¡®å¯¹åº”äº†ä»»åŠ¡åº”ä½¿ç”¨çš„ **ç³»ç»Ÿèµ„æºæ¯”ä¾‹**ï¼Œä¸‹é¢æˆ‘ä»¬å°†ä¼šä»‹ç»ä¸¤ä¸ªç»å…¸çš„å…¬å¹³å…±äº«è°ƒåº¦ç­–ç•¥ï¼Œåˆ†åˆ«ä¸º **å½©ç¥¨è°ƒåº¦** å’Œ **æ­¥å¹…è°ƒåº¦**ã€‚

##### å½©ç¥¨è°ƒåº¦

> å‡è®¾çŽ°åœ¨ç­çº§é‡Œä¸¾è¡ŒæŠ½å¥–æ´»åŠ¨ï¼Œå°æ˜Žå’Œå°çº¢åˆ†åˆ«æ‹¥æœ‰ 3 å¼ å’Œ 6 å¼ å½©ç¥¨ï¼Œè€Œç­çº§é‡Œå…¶ä»–åŒå­¦ä¸€å…±æ‹¥æœ‰ 21 å¼ å½©ç¥¨ï¼Œå°†åœ¨è¿™ 30 å¼ å½©ç¥¨ä¸­éšæœºæŠ½å–ä¸€å¼ ï¼Œè¢«æŠ½ä¸­å½©ç¥¨çš„å½’å±žè€…ä¸­å¥–ã€‚å¯ä»¥ç®—å‡ºå°æ˜Žå’Œå°çº¢å•æ¬¡æŠ½å¥–çš„ä¸­å¥–æ¦‚çŽ‡åˆ†åˆ«ä¸º 10% å’Œ 20%ã€‚å¦‚æžœå°†æŠ½å¥–çš„æ¬¡æ•°ä¸Šè°ƒï¼Œé‚£ä¹ˆä»–ä»¬çš„ä¸­å¥–æ¬¡æ•°ä¸Žæ€»æŠ½å¥–æ¬¡æ•°çš„æ¯”ä¾‹ä¹Ÿå°†è¶‹è¿‘äºŽ 10% å’Œ 20%ã€‚

1. å½©ç¥¨è°ƒåº¦ç­–ç•¥çš„æ€æƒ³ä¸Žå®žé™…çš„å½©ç¥¨æŠ½å¥–ç±»ä¼¼ï¼š

   1. åœ¨è¯¥ç­–ç•¥ä¸­ï¼Œ**ä»½é¢** å°±ç›¸å½“äºŽ **æ¯ä¸ªç­çº§åŒå­¦åŒå­¦æ‹¥æœ‰çš„å½©ç¥¨æ•°**ã€‚
   2. åœ¨æ¯æ¬¡è°ƒåº¦æ—¶ï¼Œä¼šæ ¹æ® **éšæœºæ•°**ï¼ˆå½©ç¥¨å¼€å¥–ï¼‰ç¡®å®šä»»åŠ¡æ˜¯å¦è¢«è°ƒåº¦ï¼Œä»»åŠ¡æ‰€å çš„ä»½é¢è¶Šå¤§ï¼Œéšæœºæ•°å°±è¶Šæœ‰å¯èƒ½è½åœ¨ä»–çš„ä»½é¢ä¹‹å†…ï¼Œå› æ­¤ä»–å°±è¶Šæœ‰å¯èƒ½ä¼šè¢«è°ƒåº¦ã€‚
   3. éšç€è°ƒåº¦ï¼ˆå¼€å¥–ï¼‰çš„æ¬¡æ•°ä¸æ–­å¢žåŠ ï¼Œä»»åŠ¡è¢«è°ƒåº¦çš„æ¬¡æ•°å æ€»è°ƒåº¦æ¬¡æ•°çš„æ¯”ä¾‹ä¹Ÿå°†è¶‹è¿‘äºŽè¯¥ä»»åŠ¡æ‰€æ‹¥æœ‰çš„çš„ä»½é¢å æ€»ä»½é¢çš„æ¯”ä¾‹ã€‚

   > ä¸‹é¢çš„ä»£ç ç‰‡æ®µå±•ç¤ºäº†å½©ç¥¨è°ƒåº¦çš„ä¼ªä»£ç ï¼š
   >
   > ~~~c++
   > R = random(0, total_tickets);
   > sum = 0;
   > foreach(task in task_list) {
   > sum += task->ticket;
   > if (R > sum) {
   >  schedule();
   >  break;
   > }
   > }
   > ~~~
   >
   > - è°ƒåº¦å™¨ä¿ç•™äº†å½“å‰çš„æ€»å½©ç¥¨æ•°ï¼ˆ`total_tickets`ï¼‰ï¼›æ‰€æœ‰ä»»åŠ¡å­˜å‚¨åœ¨ä¸€ä¸ªé˜Ÿåˆ—ï¼ˆ`task_list`ï¼‰ä¸­ï¼Œæ¯ä¸ªä»»åŠ¡è®°å½•äº†è‡ªå·±å æœ‰çš„å½©ç¥¨æ•°ï¼ˆ`ticket`ï¼‰ï¼›åœ¨è°ƒåº¦æ—¶ï¼Œè°ƒåº¦å™¨åœ¨æ€»å½©ç¥¨æ•°çš„èŒƒå›´å†…éšæœºåœ°ç”Ÿæˆä¸€ä¸ªä¸­å¥–å½©ç¥¨å·ç ï¼ˆ`R`ï¼‰ã€‚
   > - æŽ¥ç€ï¼Œè°ƒåº¦å™¨ä¼šéåŽ†ä»»åŠ¡åˆ—è¡¨ä¸­çš„å…ƒç´ ï¼Œå¹¶ä½¿ç”¨ä¸€ä¸ªè®¡æ•°å™¨ï¼ˆ`sum`ï¼‰è®°å½•å·²ç»éåŽ†çš„ä»»åŠ¡çš„å½©ç¥¨æ•°æ€»å’Œï¼ˆåŒ…æ‹¬å½“å‰æ­£åœ¨éåŽ†çš„ä»»åŠ¡çš„ä»½é¢ï¼‰ã€‚
   > - å¦‚æžœè¿™ä¸ªæ€»å’Œè¶…è¿‡äº†éšæœºæ•°ï¼Œåˆ™é€‰æ‹©å½“å‰ä»»åŠ¡è¿›è¡Œè°ƒåº¦ï¼ˆ`schedule()`ï¼‰ã€‚

   > ä¸‹é¢ä»¥éšæœºæ•°ä¸º 41 ä¸ºä¾‹å±•ç¤ºå½©ç¥¨è°ƒåº¦çš„è¿‡ç¨‹ï¼š
   >
   > ![image-20220726211346860](https://ricear.com/media/202207/2022-07-26_211358_1761050.027503799702170983.png)
   >
   > - è°ƒåº¦å™¨ä»Žåˆ—è¡¨å¤´éƒ¨å¼€å§‹ï¼Œé¦–å…ˆéåŽ†åˆ°ä»»åŠ¡ $A$ï¼Œå› ä¸ºä»»åŠ¡ $A$ çš„å½©ç¥¨æ•°ä¸º 10ï¼Œæ‰€ä»¥è®¡æ•°å™¨çš„å€¼ä»Ž 0 å˜ä¸º 10ï¼Œä½†æ˜¯ä»ç„¶å°äºŽ 41ï¼Œå› æ­¤è°ƒåº¦å™¨ç»§ç»­éåŽ†åˆ—è¡¨ã€‚
   > - å½“éåŽ†åˆ°ä»»åŠ¡ $B$ æ—¶ï¼Œè®¡æ•°å™¨çš„å€¼å˜ä¸º 40ï¼Œä»ç„¶å°äºŽ 41ã€‚
   > - æœ€åŽï¼Œå½“è°ƒåº¦å™¨éåŽ†åˆ°ä»»åŠ¡ $C$ æ—¶ï¼Œè®¡æ•°å™¨çš„å€¼å˜ä¸º 80ï¼Œå¤§äºŽ 41ï¼Œå› æ­¤è°ƒåº¦å™¨é€‰æ‹©ä»»åŠ¡ $C$ è¿›è¡Œè°ƒåº¦ã€‚
   > - ç±»ä¼¼åœ°ï¼Œå½“éšæœºæ•°ä¸º 35 æ—¶ï¼Œå½©ç¥¨è°ƒåº¦ç­–ç•¥å°†é€‰æ‹©ä»»åŠ¡ $B$ è¿›è¡Œè°ƒåº¦ã€‚

2. å½©ç¥¨è°ƒåº¦ç­–ç•¥ä¸€èˆ¬ä¸è¦æ±‚åˆ—è¡¨ä¸­çš„ä»»åŠ¡æŒ‰ç…§æŒæœ‰çš„å½©ç¥¨æ•°é‡æŽ’åºï¼Œå› ä¸º **å½±å“ä»»åŠ¡è¢«è°ƒåº¦æ¦‚çŽ‡çš„å› ç´ æ˜¯æ¯ä¸ªä»»åŠ¡æŒæœ‰çš„ä»½é¢**ï¼Œè€Œéžä»»åŠ¡åœ¨åˆ—è¡¨ä¸­çš„é¡ºåºï¼Œä¸è¿‡ï¼Œå¦‚æžœå°†ä»»åŠ¡æŒ‰ç…§æŒæœ‰çš„ä»½é¢æ•°é‡ä»Žé«˜åˆ°ä½Žè¿›è¡ŒæŽ’åºï¼Œå¯ä»¥ **å‡å°‘å†³ç­–æ—¶åˆ—è¡¨çš„æŸ¥æ‰¾æ¬¡æ•°**ã€‚

   > å‡è®¾ä¸Šé¢çš„ä¾‹å­ä¸­äº§ç”Ÿçš„éšæœºæ•°ä¸º 35ï¼š
   >
   > - å¦‚æžœåˆ—è¡¨æŒ‰ä»½é¢æ•°é‡ä»Žä½Žåˆ°é«˜æŽ’åºï¼Œåˆ™éœ€è¦ä¸¤æ¬¡åˆ—è¡¨æŸ¥æ‰¾æ‰èƒ½ç¡®å®šè¦è°ƒåº¦çš„æ˜¯ä»»åŠ¡ $B$ã€‚
   > - å¦‚æžœåˆ—è¡¨æŒ‰ä»½é¢æ•°é‡ä»Žé«˜åˆ°ä½ŽæŽ’åºï¼Œåˆ™ä»»åŠ¡åº”ä»¥ $C$ã€$B$ã€$A$ çš„é¡ºåºå­˜å‚¨åœ¨åˆ—è¡¨ä¸­ï¼Œæ­¤æ—¶é€šè¿‡ä¸€æ¬¡æŸ¥æ‰¾å°±å¯ä»¥ç¡®å®šè¦è°ƒåº¦çš„æ˜¯ä»»åŠ¡ $C$ã€‚

3. é™¤äº†å½©ç¥¨è°ƒåº¦çš„åŸºæœ¬ç®—æ³•å¤–ï¼Œå½©ç¥¨è°ƒåº¦è¿˜ç»™å‡ºäº†ä¸€äº›åŸºäºŽå½©ç¥¨çš„ **ä¼˜åŒ–** æ–¹æ³•ï¼Œç”¨äºŽè§£å†³ä¸åŒçš„é—®é¢˜ï¼š

   1. **å½©ç¥¨è½¬è®©**ï¼š

      1. åœ¨ç³»ç»Ÿå®žé™…è¿è¡Œä¸­ï¼Œä»½é¢å¤§çš„ä»»åŠ¡ $A$ å¯èƒ½åœ¨ç­‰ä»½é¢å°çš„ä»»åŠ¡ $B$ æ‰€æŒæœ‰çš„é”ï¼Œå½©ç¥¨è°ƒåº¦ä¼šè®© $A$ æœ‰æ›´é«˜çš„æ¦‚çŽ‡è¿è¡Œï¼Œç„¶è€Œä»»åŠ¡ $A$ ç”³è¯·ä¸åˆ°ä»»åŠ¡ $B$ çš„é”ï¼Œä¼šé€ æˆ CPU èµ„æºçš„æµªè´¹ã€‚
      2. é’ˆå¯¹è¯¥é—®é¢˜ï¼Œä»»åŠ¡ $A$ å¯ä»¥å°†è‡ªå·±çš„ä»½é¢ **è½¬è®©** ç»™ä»»åŠ¡ $B$ï¼Œåœ¨è½¬è®©åŽï¼Œä»»åŠ¡ $B$ å°†æ‹¥æœ‰æ›´é«˜çš„ CPU å æ¯”ä»½é¢ï¼Œå‡å°‘èµ„æºæµªè´¹ã€‚

      > ðŸ’ å½©ç¥¨è½¬è®©çš„æ€æƒ³ä¸Ž **ä¼˜å…ˆçº§ç»§æ‰¿** ç±»ä¼¼ã€‚

   2. **å½©ç¥¨è´§å¸**ï¼š

      1. ç”¨æˆ·æˆ–è€…ä»»åŠ¡ç»„åœ¨åˆ†é…è‡ªå·±çš„å½©ç¥¨ç»™å­ä»»åŠ¡æ—¶ï¼Œå¯ä»¥é‡‡ç”¨è‡ªå·±çš„è®¡ç®—æ–¹å¼ï¼Œç±»ä¼¼äºŽå‘è¡Œè‡ªå·±çš„è´§å¸ã€‚

         > - å‡è®¾çŽ°åœ¨å°æ˜Žå’Œå°çº¢åˆ†åˆ«æœ‰ 60 å¼ å’Œ 40 å¼ å½©ç¥¨ï¼Œä¸”ä»–ä»¬å„è‡ªçš„ä»»åŠ¡åˆ†åˆ«ç»„æˆäº†ä¸€ä¸ªä»»åŠ¡ç»„ã€‚
         > - å°æ˜Žå¯ä»¥è®¾ç½®è‡ªå·±æ€»å…±æœ‰ 400 è´§å¸ï¼Œå¹¶è¿›ä¸€æ­¥æŠŠè‡ªå·±çš„ 100 è´§å¸åˆ†é…ç»™ä»»åŠ¡ $A$ï¼Œå¦å¤– 300 è´§å¸åˆ†é…ç»™ä»»åŠ¡ $B$ï¼Œé‚£ä¹ˆä»»åŠ¡ $A$ çš„å®žé™…å½©ç¥¨æ•°ä¸º $\frac{100}{400} \times 60 = 15$ å¼ ï¼Œè€Œä»»åŠ¡ $B$ åˆ™ä¸º 45 å¼ ã€‚

         > ðŸ¤” ä¸ºä»€ä¹ˆä¸ç›´æŽ¥å°† 15 å¼ å’Œ 45 å¼ å½©ç¥¨åˆ†é…ç»™ä¸¤ä¸ªä»»åŠ¡ï¼Œè¿˜è¦å¤šæ­¤ä¸€ä¸¾å‘¢ï¼Ÿ
         >
         > - è¯•æƒ³å¦‚æžœæ­¤æ—¶å°æ˜Žçš„ 20 å¼ å½©ç¥¨è¢«è½¬è®©ç»™äº†å°çº¢ï¼Œåœ¨æ²¡æœ‰å½©ç¥¨è´§å¸æœºåˆ¶çš„æƒ…å†µä¸‹ï¼Œä¸ºäº†ä¿è¯ä»»åŠ¡ $A$ å’Œä»»åŠ¡ $B$ çš„å½©ç¥¨æ•°ä¹‹å’Œä¸º 40ï¼Œå°±éœ€è¦ä¸“é—¨åŽ»ä¿®æ”¹ä»–ä»¬è®°å½•çš„å½©ç¥¨æ•°é‡ã€‚
         > - è€Œåœ¨ä½¿ç”¨å½©ç¥¨è´§å¸çš„æƒ…å†µä¸‹ï¼Œç”±äºŽä»»åŠ¡ $A$ å’Œä»»åŠ¡ $B$ å¯¹åº”çš„å½©ç¥¨è´§å¸æ•°ä¸å˜ï¼Œå› æ­¤æ— é¡»å¯¹ä»»åŠ¡ $A$ å’Œä»»åŠ¡ $B$ è¿›è¡Œä¿®æ”¹ï¼Œåªéœ€è¦å¯¹å°æ˜Žçš„ä»»åŠ¡ç»„æŒæœ‰çš„å½©ç¥¨æ•°è¿›è¡Œä¿®æ”¹å³å¯ã€‚
         > - é€šè¿‡æ·»åŠ ä¸€å±‚å½©ç¥¨è´§å¸çš„æŠ½è±¡ï¼Œå¯ä»¥è®©ä»»åŠ¡ç»„æ›´åŠ çµæ´»åœ°ä¿®æ”¹è‡ªå·±æŒæœ‰çš„ä»½é¢ï¼Œé¿å…å½±å“ä»Žå±žäºŽä»–ä»¬çš„ä»»åŠ¡ã€‚

   3. **å½©ç¥¨é€šèƒ€**ï¼š

      1. å½©ç¥¨é€šèƒ€çš„æ€æƒ³æ˜¯ç»™ä»»åŠ¡ä¸€å®š **è‡ªç”±åº¦**ï¼Œå…è®¸ä»»åŠ¡æ ¹æ®ä»»åŠ¡å½“å‰å¯¹ **CPU èµ„æºçš„éœ€æ±‚** å†³å®šè‡ªå·±çš„ **ä»½é¢**ã€‚
      2. è¿™ç§åŠ¨æ€è°ƒæ•´ä»½é¢çš„æ–¹å¼å¯ä»¥åº”å¯¹ **å˜åŒ–çš„åº”ç”¨åœºæ™¯**ï¼Œè®©éœ€è¦èµ„æºçš„ä»»åŠ¡åŠ¨æ€åœ°ç”³è¯·æ›´å¤šçš„èµ„æºï¼Œè€Œä¸éœ€è¦èµ„æºçš„ä»»åŠ¡åˆ™å¯ä»¥é‡Šæ”¾è‡ªå·±çš„èµ„æºã€‚
      3. ä½†æ˜¯ï¼Œå½©ç¥¨é€šèƒ€éœ€è¦å¤šä¸ªä»»åŠ¡é—´ **äº’ç›¸ä¿¡ä»»**ï¼Œå¦‚æžœæœ‰ä»»åŠ¡æ¶æ„åœ°æå‡è‡ªå·±çš„å½©ç¥¨é‡ï¼Œé‚£ä¹ˆæœ€åæƒ…å†µä¸‹ä»–ä¼šå ç”¨ç»å¤§éƒ¨åˆ†çš„ CPU æ—¶é—´ã€‚

> ðŸ¤” å½©ç¥¨è°ƒåº¦ä¸­çš„éšæœºæ•°å¯èƒ½ä¼šå¸¦æ¥å“ªäº›é—®é¢˜ï¼Ÿ
>
> - å½©ç¥¨è°ƒåº¦é€šè¿‡ä½¿ç”¨éšæœºçš„æ–¹å¼å®žçŽ°äº†ä¸€ä¸ªç®€å•å¹¶ä¸”è¿‘ä¼¼äºŽå…¬å¹³å…±äº«çš„è°ƒåº¦å™¨ï¼Œç„¶è€Œï¼Œéšæœºæ•°ä¼šå¯¼è‡´æŸä¸€ä»»åŠ¡å ç”¨ CPU æ—¶é—´çš„æ¯”ä¾‹ï¼Œéœ€è¦åœ¨è¯¥ä»»åŠ¡ç»åŽ† **å¤šæ¬¡è°ƒåº¦** åŽï¼Œæ‰èƒ½è¶‹è¿‘äºŽè¯¥ä»»åŠ¡çš„ä»½é¢åœ¨æ‰€æœ‰ä»»åŠ¡æ€»ä»½é¢çš„æ¯”ä¾‹ï¼Œå³åªæœ‰è°ƒåº¦æ¬¡æ•°è¶³å¤Ÿå¤šï¼Œå½©ç¥¨è°ƒåº¦çš„æ•ˆæžœæ‰æŽ¥è¿‘å…¬å¹³ã€‚
>
> - å‡è®¾åœ¨åŒä¸€æ—¶é—´ï¼Œä¸¤ä½ç”¨æˆ·åˆ†åˆ«å‘èµ·äº†ä¸€ä¸ªä»»åŠ¡ï¼Œå¹¶æœŸæœ›å¹³åˆ† CPU æ—¶é—´ï¼Œé‚£ä¹ˆç†è®ºä¸Šä¸¤ä¸ªä»»åŠ¡è¢«è°ƒåº¦æ¬¡æ•°çš„æ¯”ä¾‹åº”è¯¥è¿‘ä¼¼ä¸º 1 : 1ï¼ˆå‡è®¾ä¸¤ä¸ªä»»åŠ¡çš„æ—¶é—´ç‰‡ç›¸åŒï¼‰ï¼Œä¸‹å›¾å±•ç¤ºäº†åœ¨æ¨¡æ‹Ÿçš„å½©ç¥¨è°ƒåº¦ä¸­ï¼Œéšç€æ€»è°ƒåº¦æ¬¡æ•°çš„å¢žåŠ ï¼Œä¸¤ä¸ªä»»åŠ¡è¢«è°ƒåº¦æ¬¡æ•°çš„æ¯”ä¾‹ï¼š
>
>   ![image-20220727210025480](https://ricear.com/media/202207/2022-07-27_210037_3183120.5721424984599366.png)
>
>   - åœ¨è¯¥æ¨¡æ‹Ÿå›¾ä¸­ï¼Œå½“æ€»è°ƒåº¦æ¬¡æ•°å°äºŽ 16 æ—¶ï¼Œæ¯”ä¾‹ä¸€ç›´ä¸Žç†æƒ³çš„ 1 : 1 ç›¸å·®è¾ƒå¤šï¼›å½“æ€»è°ƒåº¦æ¬¡æ•°å¤§äºŽæˆ–ç­‰äºŽ 16 æ—¶ï¼Œæ¯”ä¾‹è¿‘ä¼¼äºŽ 1 : 1ï¼Œä½†ä»ç„¶æœ‰ä¸€å®šæ³¢åŠ¨ã€‚
>   - å¯¹äºŽè¿è¡Œæ—¶é—´æ¯”è¾ƒçŸ­çš„ä»»åŠ¡ï¼Œå¦‚æžœè°ƒåº¦æ¬¡æ•°è¿‡å°‘ï¼Œå½©ç¥¨è°ƒåº¦å®žé™…åˆ†é…ç»™ä»»åŠ¡çš„ CPU ä»½é¢å¯èƒ½å› ä¸ºéšæœºæ€§è€Œä¸Žé¢„æœŸä¸åŒï¼Œä¸ä¸€å®šèƒ½ä¿è¯å…¬å¹³ã€‚

##### æ­¥å¹…è°ƒåº¦

1. æ­¥å¹…è°ƒåº¦ä¸Žå½©ç¥¨è°ƒåº¦éžå¸¸ç›¸ä¼¼ï¼Œä¹Ÿä¼šä½¿ç”¨ **ä»½é¢** çš„æ¦‚å¿µä¸ºæ¯ä¸ªä»»åŠ¡åˆ†é…å ç”¨ CPU æ—¶é—´çš„æ¯”ä¾‹ï¼Œå…¶ä¸åŒç‚¹åœ¨äºŽï¼Œæ­¥å¹…è°ƒåº¦é‡‡ç”¨ **ç¡®å®šæ€§** çš„æ–¹å¼è°ƒåº¦ä»»åŠ¡ï¼Œæ ¸å¿ƒæ¦‚å¿µæ˜¯ **æ­¥å¹…**ã€‚

   > ðŸ¤” å‡è®¾åœ¨ä¸€å°æœºå™¨ä¸Šå­˜åœ¨ä»»åŠ¡ $A$ å’Œä»»åŠ¡ $B$ï¼Œä»–ä»¬çš„ä»½é¢ä¹‹æ¯”ä¸º 5 : 6ï¼Œé‚£ä¹ˆè¯¥æ€Žä¹ˆä½¿è¿™ä¸¤ä¸ªä»»åŠ¡ä½¿ç”¨çš„ CPU æ—¶é—´ä¹‹æ¯”ä¹Ÿæ˜¯ 5 : 6 å‘¢ï¼Ÿ
   >
   > - è¿™é‡Œæˆ‘ä»¬å¼•å…¥ **è™šæ‹Ÿæ—¶é—´** çš„æ¦‚å¿µï¼ˆè™šæ‹Ÿæ—¶é—´ä¸Žä»»åŠ¡çœŸå®žæ‰§è¡Œçš„ç‰©ç†æ—¶é—´æ²¡æœ‰ç›´æŽ¥å…³è”ï¼‰ï¼š
   >
   >   - ä¸ºäº†è®©è™šæ‹Ÿæ—¶é—´çŸ­çš„ä»»åŠ¡èƒ½å¤Ÿ **è¿½èµ¶** è™šæ‹Ÿæ—¶é—´é•¿çš„ä»»åŠ¡ï¼Œä½¿ç”¨è™šæ‹Ÿæ—¶é—´çš„è°ƒåº¦ç­–ç•¥ä¸€èˆ¬ä¼šé€‰æ‹©è°ƒåº¦æ‰€æœ‰ä»»åŠ¡ä¸­ **è™šæ‹Ÿæ—¶é—´æœ€å°‘** çš„ä»»åŠ¡ã€‚
   >   - æ¯ä¸ªä»»åŠ¡éƒ½ä¼š **è®°å½•ä»–å·²ç»æ‰§è¡Œçš„è™šæ‹Ÿæ—¶é—´**ï¼Œå¹¶ä¸” **ä»…åœ¨ä»»åŠ¡è°ƒåº¦æ—¶æ›´æ–°å…¶è™šæ‹Ÿæ—¶é—´**ï¼ŒåŒæ—¶ï¼Œå°†ä»–ä»¬çš„è¿è¡Œæ—¶é—´ç‰‡è®¾ç½®ä¸ºç›¸åŒçš„ $T$ ç§’ï¼Œä»»åŠ¡ $A$ æ¯æ¬¡è°ƒåº¦æ—¶å…¶è™šæ‹Ÿæ—¶é—´åŠ  6 ç§’ï¼ˆæ­¥å¹…ä¸º 6ï¼‰ï¼Œä»»åŠ¡ $B$ æ¯æ¬¡è¢«è°ƒåº¦æ—¶å…¶è™šæ‹Ÿæ—¶é—´åŠ  5 ç§’ï¼ˆæ­¥å¹…ä¸º 5ï¼‰ã€‚
   >
   > - ä¸‹å›¾æ˜¯ä¸Šè¿°ä¾‹å­çš„ç¤ºæ„å›¾ï¼Œæ¯ä¸ªæ–¹æ¡†ä»£è¡¨äº†ä»»åŠ¡æ‰§è¡Œçš„è™šæ‹Ÿæ—¶é—´é•¿åº¦ï¼Œæ–¹æ¡†å†…çš„æ•°å­—ä»£è¡¨äº†ä»»åŠ¡è¢«çœŸå®žæ‰§è¡Œæ—¶çš„è°ƒåº¦æ¬¡åºï¼š
   >
   >   ![image-20220727213524344](https://ricear.com/media/202207/2022-07-27_213534_1250680.6887579992882047.png)
   >
   >   - æ­¥å¹…è°ƒåº¦å‘Šè¯‰ç³»ç»Ÿ **åœ¨æŸä¸€æ—¶åˆ»åº”è¯¥è°ƒåº¦å“ªä¸ªä»»åŠ¡**ï¼Œå¹¶ä¸”è¿™ä¸ªè°ƒåº¦æ˜¯å¯ä»¥ä¿è¯ **å…¬å¹³å…±äº«** çš„ï¼Œå³æ¯å½“è¿™ä¸¤ä¸ªä»»åŠ¡çš„è™šæ‹Ÿæ—¶é—´å¢žåŠ  30 ç§’ï¼Œä»–ä»¬è¢«è°ƒåº¦çš„æ¬¡æ•°ä¹‹æ¯”ä¸º 5 : 6ï¼Œæ‰€ä½¿ç”¨çš„ CPU æ—¶é—´ä¹‹æ¯”ä¹Ÿæ˜¯ $ 5T : 6T $ï¼Œå³ 5 : 6ã€‚
   >   - é€šè¿‡æ­¥å¹…è®¡ç®—ä»»åŠ¡çš„è™šæ‹Ÿæ—¶é—´ï¼Œå¯ä»¥ä¿è¯ **ä»»åŠ¡è¢«è°ƒåº¦çš„æ¬¡æ•°ä¸Žä»½é¢æˆæ­£æ¯”**ï¼Œç”±äºŽæ‰€æœ‰çš„è®¡ç®—éƒ½æ˜¯ç¡®å®šæ€§çš„ï¼Œå› æ­¤æœ€ç»ˆçš„è°ƒåº¦ä¹Ÿæ˜¯ç¡®å®šæ€§çš„ã€‚

2. æ­¥å¹…è°ƒåº¦é€šè¿‡è®¾ç½®è™šæ‹Ÿæ—¶é—´çš„æ–¹å¼ï¼Œè®©ä»»åŠ¡åœ¨æ¯æ¬¡è°ƒåº¦æ—¶å¢žåŠ ä¸€å®šçš„è™šæ‹Ÿæ—¶é—´ï¼Œå³ **æ­¥å¹…**ï¼Œ**ç»åŽ†è™šæ‹Ÿæ—¶é—´ç›¸åŒ**çš„ä»»åŠ¡ï¼Œä»–ä»¬**ä½¿ç”¨çš„ CPU æ—¶é—´ä¹‹æ¯”å°±æ˜¯æ­¥å¹…å€’æ•°ä¹‹æ¯”**ï¼Œå³ ä»»åŠ¡çš„ **ä»½é¢ä¹‹æ¯”** æ­£å¯¹åº”äº†ä»»åŠ¡çš„ **æ­¥å¹…çš„å€’æ•°ä¹‹æ¯”**ã€‚

3. æ­¥å¹…è°ƒåº¦çš„ä¼ªä»£ç å¦‚ä¸‹ï¼š

   ~~~c++
   // é€‰æ‹©å¹¶ç§»é™¤è¿è¡Œé˜Ÿåˆ—ä¸­è™šæ‹Ÿæ—¶é—´æœ€å°çš„ä»»åŠ¡
   task = remove_queue_min(q);
   // è°ƒåº¦è¯¥ä»»åŠ¡å¹¶è®©å…¶æ‰§è¡Œä¸€ä¸ªæ—¶é—´ç‰‡
   schedule(task);
   // ä½¿ç”¨è¯¥ä»»åŠ¡çš„æ­¥å¹…è®¡ç®—è°ƒåº¦åŽçš„è™šæ‹Ÿæ—¶é—´
   task->pass += task->stride;
   insert_queue(q, current);
   ~~~

   1. æ­¥å¹…è°ƒåº¦ä¸ºæ¯ä¸ªä»»åŠ¡ç»´æŠ¤ä¸€ä¸ª `pass` å˜é‡ï¼Œè¡¨ç¤ºä»»åŠ¡ **ç»åŽ†çš„è™šæ‹Ÿæ—¶é—´**ã€‚
   2. ä½¿ç”¨ `stride` å˜é‡ä¿å­˜æ¯ä¸ªä»»åŠ¡çš„ **æ­¥å¹…**ï¼Œä¸ºäº†è®© `stride` èƒ½å¤Ÿæ˜¯ä¸€ä¸ªæ•´æ•°ï¼Œä¼šè®¾ç½®ä¸€ä¸ªæžå¤§çš„æ•´æ•° `MaxStride`ï¼ˆä¸ºäº†ç›´è§‚ï¼Œè®¾ç½® `MaxStride` ä¸ºä»»åŠ¡ $A$ å’Œ $B$ çš„ä»½é¢çš„æœ€å°å…¬å€æ•°ï¼‰ï¼Œå¹¶è®¾ç½® `stride = MaxStride / ticket`ï¼Œå…¶ä¸­ `ticket` å°±æ˜¯ **ä»½é¢**ã€‚
   3. é¦–å…ˆé€‰å–å½“å‰ **è™šæ‹Ÿæ—¶é—´æœ€å°** çš„ä»»åŠ¡è°ƒåº¦å¹¶å°†è¯¥ä»»åŠ¡ **ä»Žè¿è¡Œé˜Ÿåˆ—ç§»é™¤**ï¼Œåœ¨è°ƒåº¦ç»“æŸåŽ **æŒ‰æ­¥å¹…å¢žåŠ å…¶è™šæ‹Ÿæ—¶é—´**ï¼Œå¹¶å°†è¯¥ä»»åŠ¡é‡æ–° **åŠ å…¥è¿è¡Œé˜Ÿåˆ—** ä¸­ã€‚

   > åœ¨çœŸå®žç³»ç»Ÿä¸­éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œç”±äºŽä»»åŠ¡å¯èƒ½åœ¨ä»»æ„æ—¶é—´è¿›å…¥ç³»ç»Ÿï¼Œå› æ­¤ä»»åŠ¡çš„ `pass` ä¸èƒ½å¤Ÿç®€å•åœ°ä»Ž 0 å¼€å§‹è®¾ç½®ï¼Œè€Œåº”è¯¥è®¾ç½®ä¸º **å½“å‰æ‰€æœ‰ä»»åŠ¡çš„æœ€å° `pass` å€¼**ï¼Œå¦åˆ™ï¼Œå¯èƒ½ä¼šå¯¼è‡´ **æ–°è¿›å…¥çš„ä»»åŠ¡é•¿æ—¶é—´å æœ‰ CPU**ã€‚

### :soccer: å¤šæ ¸è°ƒåº¦ç­–ç•¥

> åœ¨ä¸Šé¢è®¨è®ºçš„å•æ ¸è°ƒåº¦ç­–ç•¥ä¸­ï¼Œè™½ç„¶å¤šä¸ªä»»åŠ¡ **å¹¶å‘** åœ°åœ¨ **ä¸€ä¸ª** å…±äº«çš„ CPU æ ¸å¿ƒä¸Šæ‰§è¡Œï¼Œä½†æ˜¯æœ¬è´¨ä¸Šä»–ä»¬ä»ç„¶æ˜¯åœ¨ä¸²è¡Œåœ°æ‰§è¡Œã€‚è€Œåœ¨å¤šæ ¸ç³»ç»Ÿä¸­ï¼Œä»»åŠ¡ä¼šåŒæ—¶åœ¨ **å¤šä¸ª** CPU æ ¸å¿ƒä¸Š **å¹¶è¡Œ** åœ°æ‰§è¡Œï¼Œç›¸æ¯”äºŽå•æ ¸è°ƒåº¦ç­–ç•¥ï¼Œå¤šæ ¸è°ƒåº¦ç­–ç•¥éœ€è¦è€ƒè™‘çš„å› ç´ æ›´åŠ å¤æ‚ã€‚

#### è´Ÿè½½åˆ†æ‹…

1. æˆ‘ä»¬é¦–å…ˆæ²¿ç”¨å•æ ¸è°ƒåº¦ç­–ç•¥çš„æ€è·¯ï¼Œè®¾æƒ³å¤šæ ¸å…±äº«ä¸€ä¸ª **å…¨å±€è¿è¡Œé˜Ÿåˆ—**ï¼Œå½“ä¸€ä¸ª CPU æ ¸å¿ƒéœ€è¦è°ƒåº¦ä»»åŠ¡æ—¶ï¼Œæ ¹æ® **ç»™å®šçš„è°ƒåº¦ç­–ç•¥**ï¼Œå†³å®šå…¨å±€è¿è¡Œé˜Ÿåˆ—ä¸­ä¸‹ä¸€ä¸ªç”±ä»–æ‰§è¡Œçš„ä»»åŠ¡ï¼Œç»™å®šçš„è°ƒåº¦ç­–ç•¥å¯ä»¥æ˜¯ä»»æ„ä¸€ç§ **å•æ ¸è°ƒåº¦ç­–ç•¥**ï¼Œè¿™ç§æ–¹æ³•ä¹Ÿè¢«ç§°ä¸º **è´Ÿè½½åˆ†æ‹…**ï¼Œå› ä¸º **ç³»ç»Ÿçš„è´Ÿè½½æ˜¯è¢«æ‰€æœ‰ CPU æ ¸å¿ƒåˆ†æ‹…çš„**ã€‚

   ![image-20220728160009123](https://ricear.com/media/202207/2022-07-28_160021_1982130.42524383922076636.png)

   2. è´Ÿè½½åˆ†æ‹…çš„ **ä¼˜ç‚¹**ï¼š

      1. **è®¾è®¡å®žçŽ°ç®€å•**ã€‚

         > - é€šè¿‡ä½¿ç”¨è´Ÿè½½åˆ†æ‹…ï¼Œå¯ä»¥å°†å¤šæ ¸è°ƒåº¦é—®é¢˜ **è§„çº¦ä¸ºå•æ ¸è°ƒåº¦é—®é¢˜**ï¼Œä½¿ç”¨å·²æœ‰çš„å•æ ¸è°ƒåº¦ç­–ç•¥å’Œå•æ ¸è°ƒåº¦å™¨ï¼Œå°±å¯ä»¥å®žçŽ°ä¸€ä¸ªå¤šæ ¸çš„å…¨å±€è°ƒåº¦å™¨ã€‚

      2. æ¯ä¸ª CPU æ ¸å¿ƒéƒ½ä¼š **åˆ†æ‹…ç³»ç»Ÿçš„è´Ÿè½½**ï¼Œä¸ä¼šå‡ºçŽ° CPU èµ„æºæµªè´¹çš„æƒ…å†µã€‚

         > ä¸€ä¸ª CPU æ ¸å¿ƒæ‰§è¡Œå®Œå½“å‰ä»»åŠ¡åŽï¼Œä»–ä¼šä»Žå…¨å±€ä»»åŠ¡é˜Ÿåˆ—ä¸­å†é€‰å–ä¸€ä¸ªä»»åŠ¡æ‰§è¡Œï¼Œå› æ­¤ï¼Œåªè¦ç³»ç»Ÿå½“å‰è¿˜æœ‰å¯ä»¥æ‰§è¡Œçš„ä»»åŠ¡ï¼Œæ¯ä¸ª CPU æ ¸å¿ƒéƒ½èƒ½å¤ŸèŽ·å–åˆ°ä»»åŠ¡æ‰§è¡Œã€‚

   3. è´Ÿè½½åˆ†æ‹…çš„ **ç¼ºç‚¹**ï¼š

      1. å¤šæ ¸å…±äº«ä¸€ä¸ªå…¨å±€è¿è¡Œé˜Ÿåˆ—çš„ **åŒæ­¥å¼€é”€**ã€‚

         > å‰æ–‡å‡è®¾ä»»åŠ¡çš„åˆ‡æ¢è°ƒåº¦æ²¡æœ‰å¼€é”€ï¼Œä½†æ˜¯è¯¥å‡è®¾åœ¨å¤šæ ¸è°ƒåº¦å™¨ä¸­æ˜¯ä¸åˆç†çš„ï¼Œå› ä¸ºå¤šæ ¸ä¹‹é—´çš„ [åŒæ­¥é—®é¢˜](https://ricear.com/project-26/doc-325) å¯èƒ½å¯¼è‡´è°ƒåº¦å¼€é”€å˜å¾—ä¸å¯å¿½è§†ã€‚

      2. ä»»åŠ¡åœ¨ **å¤šä¸ª CPU æ ¸å¿ƒé—´æ¥å›žåˆ‡æ¢çš„å¼€é”€**ã€‚

         > - å‡è®¾å…¨å±€æœ‰ 4 ä¸ªä»»åŠ¡ $A$ã€$B$ã€$C$ å’Œ $D$ï¼Œä»–ä»¬çš„è¿è¡Œæ—¶é—´è¶³å¤Ÿé•¿ï¼Œä½¿ç”¨ RR ç­–ç•¥å¯¹ä»–ä»¬è¿›è¡Œè°ƒåº¦ã€‚
         >
         > - å› æ­¤åœ¨ä»»åŠ¡æ‰§è¡Œå®Œä¸€ä¸ªæ—¶é—´ç‰‡åŽï¼ŒCPU æ ¸å¿ƒä¼šä»Žå…¨å±€è¿è¡Œé˜Ÿåˆ—ä¸­é€‰å–ä¸‹ä¸€ä¸ªä»»åŠ¡è¿›è¡Œæ‰§è¡Œï¼Œå¹¶å°†å½“å‰ä»»åŠ¡æ’åˆ°å…¨å±€è¿è¡Œé˜Ÿåˆ—çš„é˜Ÿå°¾ã€‚
         > - ä¸éš¾çœ‹å‡ºï¼Œæ¯ä¸ªä»»åŠ¡åœ¨å‰åŽä¸¤ä¸ªæ—¶é—´ç‰‡æ‰§è¡Œæ—¶æ‰€å¤„çš„ CPU æ ¸å¿ƒæ˜¯ä¸ç›¸åŒçš„ï¼Œè€Œä»»åŠ¡åœ¨ä¸åŒ CPU æ ¸å¿ƒé—´åˆ‡æ¢ä¼šå¯¼è‡´å¤§é‡å¼€é”€ï¼ŒåŒ…æ‹¬ **é‡æ–°è½½å…¥ç¼“å­˜**ã€[TLB åˆ·æ–°](https://ricear.com/project-26/doc-340/#2-4-2-%E5%88%B7%E6%96%B0)ç­‰ã€‚
         >
         > ![image-20220728163324367](https://ricear.com/media/202207/2022-07-28_163346_4991510.14520972760102424.png)

#### ååŒè°ƒåº¦

> å¤šçº¿ç¨‹ç¨‹åºä¸ºäº†åˆ©ç”¨å¤šæ ¸å¤„ç†å™¨ï¼Œé€šå¸¸ä¼šå°†ä¸€ä¸ªå·¥ä½œé‡è¾ƒå¤§çš„ä»»åŠ¡ **åˆ‡åˆ†æˆå¤šä¸ªå­ä»»åŠ¡**ï¼Œå¹¶å°†æ¯ä¸ªå­ä»»åŠ¡äº¤ç»™ **ä¸åŒçš„ CPU æ ¸å¿ƒ** å®Œæˆï¼Œè¿™äº›å­ä»»åŠ¡ä¹‹é—´å¯èƒ½ä¼šæœ‰ **ä¾èµ–å…³ç³»**ï¼Œå¦å¤–ï¼ŒæŸäº›å­ä»»åŠ¡å€¾å‘äºŽ **åŒæ—¶æ‰§è¡Œ**ï¼š
>
> - å‡è®¾å°æ˜Žæƒ³ä½¿ç”¨ `Makefile` ç¼–è¯‘ä¸€ä¸ªç¨‹åºï¼Œè¯¥ç¨‹åºæ¶‰åŠ 4 ä¸ªæºæ–‡ä»¶ `file1.c ~ file4.c`ã€‚
> - å°æ˜Žä¸ºäº†åˆ©ç”¨ç³»ç»Ÿä¸­çš„å¤šä¸ª CPU æ ¸å¿ƒï¼Œè¾“å…¥äº† `make -j 4`ï¼Œä½¿ç”¨ 4 ä¸ªçº¿ç¨‹å¹¶è¡Œç¼–è¯‘ï¼š
>   - ç¼–è¯‘å™¨ç¬¬ä¸€æ­¥ä¼šæŠŠ `.c` æ–‡ä»¶ç¼–è¯‘æˆå¯¹åº”çš„ `.o` æ–‡ä»¶ï¼Œç¬¬äºŒæ­¥å°†æ‰€æœ‰ `.o` æ–‡ä»¶ç¼–è¯‘æˆå¯æ‰§è¡Œæ–‡ä»¶ã€‚
>   - å¦‚æžœå‰ 3 ä¸ªæ–‡ä»¶çš„ç¬¬ä¸€æ­¥å·²ç»å®Œæˆï¼Œç¼–è¯‘å™¨ä¸èƒ½å¹¶è¡Œåœ°ç¼–è¯‘ç¬¬ 4 ä¸ª `.o` æ–‡ä»¶å’Œç”Ÿæˆå¯æ‰§è¡Œæ–‡ä»¶ï¼Œå› ä¸ºç¼–è¯‘å™¨åªæœ‰å½“ç¬¬ä¸€æ­¥å®Œæˆï¼ˆç”Ÿæˆå…¨éƒ¨ 4 ä¸ªæ–‡ä»¶å¯¹åº”çš„ `.o` æ–‡ä»¶ï¼‰æ—¶ï¼Œæ‰èƒ½å¼€å§‹ç¬¬äºŒæ­¥ï¼ˆç”Ÿæˆå¯æ‰§è¡Œæ–‡ä»¶ï¼‰ã€‚
>   - å› æ­¤ï¼Œè™½ç„¶ç¬¬äºŒæ­¥çš„ä»»åŠ¡å·²ç»å¯ä»¥è¢«è°ƒåº¦åˆ°æŸä¸ª CPU æ ¸å¿ƒä¸Šå¼€å§‹æ‰§è¡Œï¼Œä½†æ˜¯ç”±äºŽç¬¬ä¸€æ­¥å’Œç¬¬äºŒæ­¥çš„ä»»åŠ¡ä¹‹é—´å­˜åœ¨ä¾èµ–å…³ç³»ï¼Œä»–ä¾ç„¶éœ€è¦ç­‰å¾…ç¬¬ä¸€æ­¥å¯¹åº”çš„ä»»åŠ¡å…¨éƒ¨å®Œæˆï¼Œå› è€Œé€ æˆ CPU **èµ„æºçš„æ— ç«¯æ¶ˆè€—**ã€‚
>   - åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œåªæœ‰å½“ç¬¬ä¸€æ­¥çš„ 4 ä¸ªä»»åŠ¡å…¨éƒ¨å®Œæˆæ‰èƒ½æ‰§è¡Œç¬¬äºŒæ­¥çš„ä»»åŠ¡ï¼Œå› è€Œè®¤ä¸ºç¬¬äºŒæ­¥çš„ä»»åŠ¡å¯¹ç¬¬ä¸€æ­¥çš„ä»»åŠ¡å­˜åœ¨ä¾èµ–ã€‚
>
> åœ¨éœ€è¦ **ç›¸äº’é€šä¿¡** çš„çº¿ç¨‹ä¸­ä¹Ÿå¯èƒ½å‡ºçŽ°æ— ç«¯æ¶ˆè€— CPU çš„æƒ…å†µï¼š
>
> - å‡è®¾ä¸¤ä¸ªçº¿ç¨‹ $A$ å’Œ $B$ å¯¹åº”äºŽç¨‹åºçš„å­ä»»åŠ¡ï¼Œåœ¨ä¸€ä¸ªæ—¶é—´ç‰‡å†…ä»–ä»¬å¯ä»¥è¿›è¡Œå¤šè½®é€šä¿¡ï¼ˆ$A$ å°†è¯·æ±‚å‘é€ç»™ $B$ ç„¶åŽ $B$ è¿”å›žç»“æžœï¼Œè¿™æ ·ç®—æ˜¯ä¸€è½®é€šä¿¡ï¼‰ã€‚
> - ä½†æ­¤æ—¶ï¼Œç”±äºŽè°ƒåº¦å™¨å¹¶ä¸çŸ¥æ™“ä»–ä»¬çš„å…³è”ï¼Œ$A$ å’Œ $B$ è™½ç„¶åœ¨ä¸åŒçš„ CPU æ ¸å¿ƒä¸Šå´æ— æ³•åŒæ—¶æ‰§è¡Œï¼Œå…¶ç»“æžœæ˜¯åœ¨ç¬¬ä¸€ä¸ªæ—¶é—´ç‰‡å†… $A$ åªèƒ½å‘é€ä¸€ä¸ªè¯·æ±‚ç»™ $B$ï¼Œåœ¨ç¬¬äºŒä¸ªæ—¶é—´ç‰‡å†… $B$ æ”¶åˆ°æ¥è‡ª $A$ çš„è¯·æ±‚å¹¶è¿”å›žï¼Œåœ¨ç¬¬ 3 ä¸ªæ—¶é—´ç‰‡å†… $A$ æ‰èƒ½æ”¶åˆ°æ¥è‡ª $B$ çš„è¿”å›žç»“æžœï¼Œå¤§å¤§é™ä½Žäº†ç¨‹åºçš„æ‰§è¡Œæ•ˆçŽ‡ã€‚
>
> ä¸ºäº†æ»¡è¶³å¯¹ **ä¸€ç»„ä»»åŠ¡** è¿›è¡Œè°ƒåº¦çš„éœ€æ±‚ï¼Œ**ååŒè°ƒåº¦** çš„æ¦‚å¿µåº”è¿è€Œç”Ÿï¼ŒååŒè°ƒåº¦çš„ç›®çš„æ˜¯ **å°½å¯èƒ½è®©ä¸€ç»„ä»»åŠ¡å¹¶è¡Œæ‰§è¡Œ**ï¼Œ**é¿å…è°ƒåº¦å™¨åŒæ—¶è°ƒåº¦æœ‰ä¾èµ–å…³ç³»çš„ä¸¤ç»„ä»»åŠ¡**ï¼ˆå¯¹åº”äºŽ `Makefile` ä¾‹å­ä¸­ç¬¬ä¸€æ­¥çš„ä»»åŠ¡ä¸Žç¬¬äºŒæ­¥çš„ä»»åŠ¡ï¼‰ï¼Œ**åŒæ—¶é¿å…å…³è”ä»»åŠ¡**ï¼ˆå€¾å‘äºŽåŒæ—¶æ‰§è¡Œçš„ä¸€ç³»åˆ—ä»»åŠ¡ï¼Œæ¯”å¦‚éœ€è¦ç›¸äº’é€šä¿¡çš„ä»»åŠ¡ï¼‰**æ‰§è¡Œæ•ˆçŽ‡ä½Žçš„é—®é¢˜**ã€‚

##### ç¾¤ç»„è°ƒåº¦

1. ååŒè°ƒåº¦çš„ä¸€ä¸ªç»å…¸ç­–ç•¥æ˜¯ **ç¾¤ç»„è°ƒåº¦**ï¼Œå…¶åŸºæœ¬æ€æƒ³æ˜¯ **å°†å…³è”ä»»åŠ¡è®¾ç½®ä¸ºä¸€ç»„**ï¼Œ**å¹¶ä»¥ç»„ä¸ºå•ä½è°ƒåº¦ä»»åŠ¡åœ¨å¤šä¸ª CPU æ ¸å¿ƒä¸Šæ‰§è¡Œ**ï¼Œ**ä½¿ä»–ä»¬çš„å¼€å§‹æ—¶é—´å’Œç»“æŸæ—¶é—´æŽ¥è¿‘ç›¸åŒ**ã€‚

2. ä¸ºäº†ä¿è¯ä¸€ç»„ä»»åŠ¡åŒæ—¶æ‰§è¡Œï¼Œç¾¤ç»„è°ƒåº¦ä¼š **åœ¨å¤šä¸ª CPU æ ¸å¿ƒä¸ŠåŒæ—¶è¿›è¡Œè°ƒåº¦**ã€‚

   > - å‡è®¾ä¸€ä¸ªå¤šæ ¸ç³»ç»Ÿä¸Šå…±æœ‰ 5 ä¸ª CPU æ ¸å¿ƒï¼Œ4 ç»„ä»»åŠ¡ $A$ã€$B$ã€$C$ å’Œ $D$ï¼Œç»„å†…çš„ä»»åŠ¡éƒ½æ˜¯å…³è”ä»»åŠ¡ï¼Œéœ€è¦åŒæ—¶æ‰§è¡Œï¼Œé‡‡ç”¨ç¾¤ç»„ç­–ç•¥è¿›è¡Œè°ƒåº¦ã€‚
   >
   > - ç»„ $A$ æœ‰ 5 ä¸ªä»»åŠ¡ï¼Œè°ƒåº¦å™¨ä¸€æ¬¡æ€§è°ƒåº¦è¿™ 5 ä¸ªä»»åŠ¡ä¸€èµ·æ‰§è¡Œã€‚ç»„ $B$ å’Œ $C$ åˆ†åˆ«æœ‰ 2 ä¸ªä»»åŠ¡ï¼Œå› æ­¤åœ¨ä¸€ä¸ªæ—¶é—´ç‰‡åŽï¼Œè¿™äº›ä»»åŠ¡ä¼šè¢«è°ƒåº¦å™¨è°ƒåº¦ã€‚æ­¤æ—¶è¿˜æœ‰ä¸€ä¸ª CPU æ ¸å¿ƒç©ºé—²ï¼Œè°ƒåº¦å™¨å†³å®šè®©ç»„ $D$ çš„ 6 ä¸ªä»»åŠ¡ä¸­çš„ä¸€ä¸ªçŽ‡å…ˆæ‰§è¡Œã€‚åˆä¸€ä¸ªæ—¶é—´ç‰‡è¿‡åŽï¼Œè°ƒåº¦å™¨è®©ç»„ $D$ çš„å‰©ä¸‹ 5 ä¸ªä»»åŠ¡åŒæ—¶æ‰§è¡Œã€‚ä»¥ 3 ä¸ªæ—¶é—´ç‰‡ä¸ºå‘¨æœŸï¼Œç¾¤ç»„è°ƒåº¦ç­–ç•¥ä¼šä¸€ç›´è¿›è¡Œå¦‚ä¸‹å›¾æ‰€ç¤ºçš„è°ƒåº¦ã€‚
   >
   >   ![image-20220728175638789](https://ricear.com/media/202207/2022-07-28_175650_1013930.8255454240624392.png)

3. é€šè¿‡å°†ä»»åŠ¡ä»¥ç»„ä¸ºå•ä½åœ¨å¤šæ ¸å¤„ç†å™¨ä¸Šè¿›è¡Œè°ƒåº¦ï¼Œç¾¤ç»„è°ƒåº¦ç­–ç•¥å¯ä»¥ **æå‡ç‰¹å®šåº”ç”¨åœºæ™¯çš„ä»»åŠ¡æ‰§è¡Œæ€§èƒ½**ï¼Œç„¶è€Œï¼Œå¦‚æžœåœ¨åº”ç”¨åœºæ™¯ä¸åŒ¹é…çš„æƒ…å†µä¸‹ï¼Œç¾¤ç»„è°ƒåº¦ç­–ç•¥å¯èƒ½å¹¶ä¸æ˜¯æœ€ä¼˜çš„ï¼Œå› ä¸ºä»–ä¼šè¦æ±‚æ— å…³è”çš„ä»»åŠ¡å¿…é¡»åŒæ—¶è¿›å…¥æˆ–é€€å‡º CPU æ ¸å¿ƒï¼Œ**æ— å…³è”ä»»åŠ¡ä¹‹é—´çš„çš„ç›¸äº’ç­‰å¾…å¯èƒ½é€ æˆ CPU èµ„æºçš„æµªè´¹**ã€‚

#### ä¸¤çº§è°ƒåº¦

1. åœ¨å‰é¢æˆ‘ä»¬ä»‹ç»åˆ° **å…¨å±€è°ƒåº¦å™¨** ä¼šä½¿å¾—ä»»åŠ¡åœ¨ä¸åŒ CPU æ ¸å¿ƒä¸Šåˆ‡æ¢æ‰§è¡Œï¼Œé€ æˆåˆ‡æ¢å¼€é”€ï¼Œä¸ºäº†å‡å°‘å¼€é”€ï¼Œæ¯ä¸ªä»»åŠ¡åº” **å°½å¯èƒ½åªåœ¨ä¸€ä¸ª CPU æ ¸å¿ƒä¸Šè¿›è¡Œè°ƒåº¦**ã€‚å› æ­¤ï¼Œæ–°çš„è°ƒåº¦ç­–ç•¥æ”¹ä¸ºæ¯ä¸ª CPU æ ¸å¿ƒéƒ½å¼•å…¥ä¸€ä¸ª **æœ¬åœ°è°ƒåº¦å™¨**ã€‚

2. è¿™ç§è°ƒåº¦ç­–ç•¥ä½¿ç”¨å…¨å±€è°ƒåº¦å™¨å’Œæœ¬åœ°è°ƒåº¦å™¨ï¼Œæž„æˆäº† **å±‚çº§åŒ–ç»“æž„**ï¼Œä¸€èˆ¬ç§°ä¹‹ä¸º **ä¸¤çº§è°ƒåº¦**ã€‚

   > ä¸€ä¸ªä¸¤çº§è°ƒåº¦çš„ç¤ºæ„å›¾å¦‚ä¸‹å›¾æ‰€ç¤ºã€‚
   >
   > ![image-20220728195634724](https://ricear.com/media/202207/2022-07-28_195647_8108180.6306563101362485.png)
   >
   > - å½“ä¸€ä¸ªä»»åŠ¡è¿›å…¥ç³»ç»Ÿæ—¶ï¼Œ**å…¨å±€è°ƒåº¦å™¨** æ ¹æ®ç³»ç»Ÿçš„å½“å‰ä¿¡æ¯ï¼Œè¯¸å¦‚æ¯ä¸ª CPU æ ¸å¿ƒçš„è´Ÿè½½æƒ…å†µï¼Œå†³å®šè¯¥ä»»åŠ¡åº”è¯¥è¢«å“ªä¸ª CPU æ ¸å¿ƒæ‰§è¡Œã€‚
   > - å½“ä¸€ä¸ªä»»åŠ¡è¢«åˆ†é…åˆ°ç»™å®šçš„ CPU æ ¸å¿ƒæ—¶ï¼Œä»–å°†ä¸€ç›´è¢«è¯¥æ ¸å¿ƒçš„ **æœ¬åœ°è°ƒåº¦å™¨** ç®¡ç†ï¼Œä¸ä¼šè¿ç§»åˆ°å…¶ä»– CPU æ ¸å¿ƒä¸Šæ‰§è¡Œã€‚åŒæ—¶ï¼Œæ¯ä¸ªæœ¬åœ°è°ƒåº¦å™¨å¯ä»¥ä½¿ç”¨ **ä»»æ„å•æ ¸è°ƒåº¦ç­–ç•¥** æ¥è°ƒåº¦ä»»åŠ¡ã€‚
   > - åœ¨ä¸¤çº§è°ƒåº¦ä¸­ï¼Œçº¿ç¨‹æ— é¡»åœ¨ CPU æ ¸å¿ƒé—´æ¥å›žåˆ‡æ¢ï¼Œä»Žè€Œ **æé«˜äº†ç¼“å­˜å±€éƒ¨æ€§**ï¼Œ**å‡å°‘äº†æ•°æ®ç«žäº‰çš„å†²çª**ã€‚åŒæ—¶ï¼Œè¿™ç§å±‚çº§åŒ–çš„è®¾è®¡ **å°†è®¾è®¡å•æ ¸ç­–ç•¥ä¸Žæ”¯æŒå¤šæ ¸è°ƒåº¦è¿›è¡Œäº†è§£è€¦**ï¼Œä½¿å¾—è°ƒåº¦å™¨çš„è®¾è®¡å®žçŽ°æ›´åŠ  **çµæ´»**ã€‚

   > ä»¥ Linux ä¸ºä»£è¡¨çš„ä¸€ç³»åˆ—æ“ä½œç³»ç»Ÿä¼šä¸ºæ¯ä¸ª CPU æ ¸å¿ƒåˆ†é…ä¸€ä¸ª **æœ¬åœ°è¿è¡Œé˜Ÿåˆ—**ï¼Œå³å¯ä»¥ç†è§£ä¸ºæ¯ä¸ª CPU æ ¸å¿ƒæœ‰ä¸€ä¸ªæœ¬åœ°è°ƒåº¦å™¨ã€‚

#### è´Ÿè½½è¿½è¸ªä¸Žè´Ÿè½½å‡è¡¡

> - ä¸¤çº§è°ƒåº¦ç­–ç•¥é€šè¿‡å°†ä»»åŠ¡ç»‘å®šåˆ°ç‰¹å®šçš„ CPU æ ¸å¿ƒä¸Šè¿›è¡Œè°ƒåº¦æ‰§è¡Œï¼Œ**é¿å…äº†ä»»åŠ¡åœ¨å¤šæ ¸é—´åˆ‡æ¢**ï¼Œå› è€Œåœ¨å¤šæ ¸è°ƒåº¦æ—¶æœ‰è‰¯å¥½çš„æ€§èƒ½ã€‚
> - ä¸è¿‡ï¼Œç”±äºŽä¸¤çº§è°ƒåº¦åœ¨ **ä»»åŠ¡å¼€å§‹æ—¶** å°±æŒ‡å®šäº†ä»–åœ¨å“ªä¸ª CPU æ ¸å¿ƒä¸Šè¿è¡Œï¼Œä¸”æ²¡æœ‰ä»»åŠ¡åœ¨ CPU æ ¸å¿ƒé—´åˆ‡æ¢çš„æœºåˆ¶ï¼Œè¿™å¯èƒ½ä¼šå¯¼è‡´ **å¤šæ ¸é—´çš„è´Ÿè½½ä¸å‡è¡¡**ï¼Œä¾‹å¦‚ä¸€ä¸ª CPU æ ¸å¿ƒçš„åˆ©ç”¨çŽ‡ä¸º 100%ï¼Œè€Œå‰©ä½™ CPU æ ¸å¿ƒçš„åˆ©ç”¨çŽ‡éƒ½ä¸º 0%ã€‚
> - ä¸ºäº†è§£å†³è¿™ä¸€é—®é¢˜ï¼Œä¸¤çº§è°ƒåº¦å¼•å…¥äº† **è´Ÿè½½å‡è¡¡ç­–ç•¥**ï¼Œå…¶æ€æƒ³æ˜¯ **é€šè¿‡è¿½è¸ªæ¯ä¸ª CPU æ ¸å¿ƒå½“å‰çš„è´Ÿè½½æƒ…å†µ**ï¼Œ**å°†å¤„äºŽè¯¥è´Ÿè½½çš„ CPU æ ¸å¿ƒç®¡ç†çš„ä»»åŠ¡è¿ç§»åˆ°ä½Žè´Ÿè½½çš„ CPU æ ¸å¿ƒä¸Š**ï¼Œ**å°½å¯èƒ½åœ°ä¿è¯æ¯ä¸ªæ ¸å¿ƒçš„è´Ÿè½½å¤§è‡´ç›¸åŒ**ã€‚

##### è°ƒåº¦å®žä½“ç²’åº¦è´Ÿè½½è¿½è¸ª

1. è´Ÿè½½å‡è¡¡é¢ä¸´çš„ä¸€å¤§æŒ‘æˆ˜æ˜¯ **åº”è¯¥å¦‚ä½•ç¡®å®šå½“å‰ä»»åŠ¡çš„è´Ÿè½½æƒ…å†µ**ï¼Œå¯¹å½“å‰ä»»åŠ¡çš„è´Ÿè½½ä¿¡æ¯æè¿°å¾—è¶Šå‡†ç¡®ï¼Œå¯¹åº”çš„è´Ÿè½½å‡è¡¡ç­–ç•¥å°±è¶Šæœ‰æ•ˆã€‚

2. åœ¨å¤§éƒ¨åˆ†åœºæ™¯ä¸­ï¼Œä¸€ä¸ªä»»åŠ¡çš„æ‰§è¡Œè´Ÿè½½æ˜¯åŠ¨æ€å˜åŒ–çš„ï¼Œå› æ­¤ç³»ç»Ÿå¿…é¡» **åŠ¨æ€è¿½è¸ª** ç³»ç»Ÿå½“å‰çš„è´Ÿè½½æƒ…å†µï¼Œè¿™ä¼šé€ æˆä¸€å®šçš„ **æ€§èƒ½å¼€é”€**ã€‚

3. æ‰€ä»¥ï¼Œå¦‚ä½•ä¿æŒ **åœ¨ä¿æŒä½Žå¼€é”€çš„åŒæ—¶å¯¹è´Ÿè½½è¿›è¡Œç²¾ç¡®è¿½è¸ª** æ˜¯è°ƒåº¦å™¨è®¾è®¡å®žçŽ°çš„ä¸€å¤§æŒ‘æˆ˜ã€‚

   > - åœ¨ Linux 3.8 ç‰ˆæœ¬ä»¥å‰ï¼Œå†…æ ¸ä»¥æ¯ä¸ª CPU æ ¸å¿ƒçš„ **è¿è¡Œé˜Ÿåˆ—** ä¸ºç²’åº¦æ¥è®¡ç®—è´Ÿè½½ï¼Œè®¤ä¸ºè¿è¡Œé˜Ÿåˆ—é•¿çš„è´Ÿè½½è¶Šé«˜ï¼Œå¯¼è‡´è´Ÿè½½è¿½è¸ª **ä¸å¤Ÿç²¾ç¡®**ã€‚
   >
   > - å½“è°ƒåº¦å™¨å†³å®šä»Žä¸€ä¸ªé«˜è´Ÿè½½çš„è¿è¡Œé˜Ÿåˆ—ä¸­é€‰å–ä¸€ä¸ªä»»åŠ¡è¿ç§»åˆ°ä½Žè´Ÿè½½çš„è¿è¡Œé˜Ÿåˆ—æ—¶ï¼Œç”±äºŽä»– **ç¼ºä¹æ¯ä¸ªä»»åŠ¡çš„ä¿¡æ¯**ï¼Œå› æ­¤ **æ— æ³•é€‰å‡ºåˆé€‚çš„ä»»åŠ¡è¿›è¡Œè¿ç§»**ã€‚
   > - æ‰€ä»¥ï¼Œ**ä»¥è¿è¡Œé˜Ÿåˆ—ä¸ºç²’åº¦çš„è´Ÿè½½è¿½è¸ªå¹¶ä¸èƒ½å¤Ÿé€‚åº”è´Ÿè½½å‡è¡¡çš„è¦æ±‚**ã€‚

4. åœ¨ Linux 3.8 ç‰ˆæœ¬ä»¥åŽï¼ŒLinux ä½¿ç”¨äº† **ä»¥è°ƒåº¦å®žä½“**ï¼ˆå•ä¸ªä»»åŠ¡ï¼‰**ä¸ºç²’åº¦** çš„è´Ÿè½½è®¡ç®—æ–¹å¼ï¼Œåšåˆ°äº† **æ›´ç»†ç²’åº¦** çš„è´Ÿè½½è¿½è¸ªã€‚

   1. è°ƒåº¦å®žä½“ç²’åº¦è´Ÿè½½è¿½è¸ªï¼ˆPer-Entity Load Tracking, PELTï¼‰**é€šè¿‡è®°å½•æ¯ä¸ªä»»åŠ¡çš„åŽ†å²æ‰§è¡ŒçŠ¶å†µæ¥è¡¨ç¤ºä»»åŠ¡çš„å½“å‰è´Ÿè½½**ã€‚

      > - è°ƒåº¦å™¨ä¼šä»¥ 1024 å¾®ç§’ä¸ºä¸€ä¸ªå‘¨æœŸï¼Œè®°å½•ä»»åŠ¡å¤„äºŽ **å¯è¿è¡ŒçŠ¶æ€**ï¼ˆåŒ…æ‹¬æ­£åœ¨è¿è¡Œçš„ä»¥åŠç­‰å¾…è¢«è¿è¡Œçš„ï¼‰**çš„æ—¶é—´**ï¼Œè®°ä¸º $x$ å¾®ç§’ã€‚
      > - è¯¥ä»»åŠ¡åœ¨**ç¬¬ $i$ ä¸ªå‘¨æœŸ**ï¼ˆ$T_i$ï¼‰**å†…å¯¹å½“å‰ CPU çš„åˆ©ç”¨çŽ‡ä¸º** $\frac{x}{1024}$ï¼Œè€Œ**å¯¹åº”çš„è´Ÿè½½** $L_i = scale\_cpu\_capacity \times \frac{x}{1024}$ï¼Œå…¶ä¸­ $scale\_cpu\_capacity$ æ˜¯ **CPU å®¹é‡**ï¼ˆç”¨äºŽå½’ä¸€åŒ–ç³»ç»Ÿä¸­çš„ CPU å¤„ç†èƒ½åŠ›ï¼‰ï¼Œå¯ä»¥ç†è§£ä¸º **å¯¹åº” CPU æ ¸å¿ƒçš„å¤„ç†èƒ½åŠ›**ã€‚

   2. åœ¨æ”¶é›†åˆ°ä»»åŠ¡æ¯ä¸ªå‘¨æœŸå†…çš„è´Ÿè½½åŽï¼ŒPELT éœ€è¦è®¡ç®— **ä¸€æ®µæ—¶é—´å†…ä»»åŠ¡æ‰€æœ‰å‘¨æœŸçš„ç´¯è®¡è´Ÿè½½**ï¼Œè®°ä¸º$L$ã€‚

      > - ä¸€ç§ç®€å•è®¡ç®— $L$ çš„æ–¹æ³•æ˜¯ **å°†æ‰€æœ‰å‘¨æœŸçš„è´Ÿè½½ç›´æŽ¥ç´¯åŠ **ã€‚
      >
      > - ç„¶è€Œï¼Œä¸€ä¸ªä»»åŠ¡å¯èƒ½è¿è¡Œä¸€å¤©ç”šè‡³æ›´ä¹…ï¼Œå¯¹äºŽè®¡ç®—ä»»åŠ¡å½“å‰è´Ÿè½½çš„ PELT æ¥è¯´ï¼Œè¿‡äºŽä¹…è¿œçš„åŽ†å²è´Ÿè½½ä¿¡æ¯æ²¡æœ‰å¤ªå¤§å‚è€ƒæ„ä¹‰ï¼Œå› æ­¤åº”è¯¥è®°å½• **ä¸€å®šå‘¨æœŸèŒƒå›´å†…çš„ç´¯è®¡è´Ÿè½½**ã€‚
      >
      > - è·ç¦»å½“å‰æ—¶é—´ç‚¹è¶Šè¿‘çš„å‘¨æœŸæ‰€è®°å½•çš„è´Ÿè½½æ›´æœ‰å¯èƒ½åæ˜ ä»»åŠ¡çš„å½“å‰æ‰§è¡Œè´Ÿè½½ï¼Œæ‰€ä»¥åº”è¯¥å¯¹ç´¯è®¡è´Ÿè½½æœ‰æ›´å¤§çš„è´¡çŒ®ï¼Œå› æ­¤ï¼ŒPELT é‡‡ç”¨çš„è®¡ç®—ä»»åŠ¡ç´¯è®¡è´Ÿè½½çš„æ–¹å¼æ˜¯ **é€šè¿‡è¡°å‡ç³»æ•° $y$ æ¥è¡°å‡ä¹‹å‰å‘¨æœŸçš„è´Ÿè½½**ï¼Œå…·ä½“å…¬å¼å¦‚ä¸‹ï¼š
      >   $$
      >   L = L_0 + L_1 * y + L_2 * y^2 + L3 * y^3 + \cdots
      >   $$
      >   å…¶ä¸­ï¼Œ$L_i$ ä»£è¡¨ç¬¬ $i$ ä¸ªå‘¨æœŸçš„è´Ÿè½½ã€‚è¯¥è®¡ç®—å…¬å¼ä¸ä»…è€ƒè™‘äº† **ä¸åŒå‘¨æœŸçš„æƒé‡**ï¼Œ**å¼€é”€ä¹Ÿå¾ˆä½Ž**ã€‚
      >
      > - PELT æ— é¡»ä¿å­˜ä»»åŠ¡æ¯ä¸ªå‘¨æœŸå†…çš„è´Ÿè½½ï¼Œåªéœ€è¦ç»´æŠ¤ç´¯è®¡è´Ÿè½½ $L$ã€‚å½“éœ€è¦è®¡ç®—æ–°çš„ç´¯è®¡è´Ÿè½½æ—¶ï¼ŒPELT åªéœ€è¦ **ç”¨è¡°å‡ç³»æ•° $y$ è¡°å‡åŽŸç´¯è®¡è´Ÿè½½ $L$ å¹¶ä¸Žå½“å‰å‘¨æœŸ $T_n$ çš„è´Ÿè½½ $L_n$ ç›¸åŠ ** å³å¯ï¼š
      >   $$
      >   L^{'} = L \times y + L_n
      >   $$
      >
      > - é€šè¿‡è®¡ç®—æ¯ä¸ªä»»åŠ¡çš„è´Ÿè½½ $L$ï¼ŒPELT å°±å¯ä»¥è¿›è€Œç»Ÿè®¡å‡º **æ¯ä¸ªè¿è¡Œé˜Ÿåˆ—çš„è´Ÿè½½**ï¼Œ**ä¾¿äºŽè°ƒåº¦å™¨åšå‡ºæœ‰æ•ˆçš„è¿ç§»å†³ç­–**ã€‚

   3. æ€»ä½“æ¥è¯´ï¼ŒPELT çš„å¥½å¤„æ˜¯ä»–çš„ **å¼€é”€å¾ˆå°**ï¼Œä¸” **èƒ½å¤Ÿå¸®åŠ©è°ƒåº¦å™¨æ›´ç»†ç²’åº¦**ã€**æ›´ç²¾ç¡®åœ°ç›‘æµ‹ä»»åŠ¡çš„è´Ÿè½½**ï¼Œ**å¯¹äºŽé¢„æµ‹è´Ÿè½½å‡è¡¡ç­–ç•¥çš„æ•ˆæžœæœ‰å¾ˆå¤§å¸®åŠ©**ã€‚

##### è´Ÿè½½å‡è¡¡

> åœ¨è¿½è¸ªäº†æ¯ä¸ªä»»åŠ¡ä»¥åŠæ¯ä¸ª CPU æ ¸å¿ƒä¸Šçš„è´Ÿè½½åŽï¼Œéœ€è¦å¼€å§‹è€ƒè™‘ **å¤šæ ¸é—´çš„è´Ÿè½½å‡è¡¡**ï¼Œå³ **å°†ä»»åŠ¡ä»Žè´Ÿè½½é«˜çš„ CPU æ ¸å¿ƒè¿ç§»åˆ°è´Ÿè½½ä½Žçš„ CPU æ ¸å¿ƒä¸Š**ã€‚

1. éšç€å½“å‰è®¡ç®—æœºä¸Šçš„ CPU æ ¸å¿ƒæ•°é‡è¶Šæ¥è¶Šå¤šï¼Œç³»ç»Ÿæž¶æž„è¶Šæ¥è¶Šå¤æ‚ï¼Œè´Ÿè½½å‡è¡¡ç­–ç•¥ä¸èƒ½ç®€å•åœ°å¯¹å…¨éƒ¨ CPU æ ¸å¿ƒè¿›è¡Œå‡è¡¡ã€‚

   > - ä¸€æ–¹é¢ï¼Œè€ƒè™‘å¤§é‡ CPU æ ¸å¿ƒçš„è´Ÿè½½å‡è¡¡ä¼šå¼•å…¥å¾ˆå¤§çš„å¼€é”€ï¼Œè´Ÿè½½å‡è¡¡ç­–ç•¥ **åšå‡ºå†³ç­–çš„å¼€é”€åº”è¯¥å°½é‡å°**ã€‚
   >
   > - å¦ä¸€æ–¹é¢ï¼Œç”±äºŽ CPU æ ¸å¿ƒé—´ä¸æ˜¯å¯¹ç­‰çš„ï¼Œä»»åŠ¡åœ¨å¤šæ ¸é—´è¿ç§»çš„å¼€é”€ä¹Ÿæ˜¯ä¸ä¸€æ ·çš„ï¼Œè´Ÿè½½å‡è¡¡ç­–ç•¥åº”è®©ä»»åŠ¡ **å°½é‡åœ¨è¿ç§»å¼€é”€è¾ƒå°çš„ CPU æ ¸å¿ƒé—´è¿ç§»**ã€‚

   > ä»¥ **éžä¸€è‡´å†…å­˜è®¿é—®**ï¼ˆNon-Uniform Memory Access, NUMAï¼‰çš„å¤šæ ¸å¤„ç†å™¨ä¸ºä¾‹ï¼š
   >
   > - åœ¨ NUMA æž¶æž„ä¸‹ï¼Œå¤šä¸ª CPU æ ¸å¿ƒç»„æˆä¸€ä¸ª NUMA èŠ‚ç‚¹ï¼Œä¸€ä¸ª NUMA èŠ‚ç‚¹æ‹¥æœ‰ **æœ¬åœ°å†…å­˜**ï¼Œä¹Ÿå¯ä»¥è®¿é—®å…¶ä»– NUMA èŠ‚ç‚¹çš„ **è¿œç«¯å†…å­˜**ï¼Œä½†è¿œç«¯å†…å­˜çš„è®¿é—®æ—¶å»¶è¦æ˜Žæ˜¾é«˜äºŽæœ¬åœ°å†…å­˜ã€‚
   > - å¦‚æžœæ“ä½œç³»ç»Ÿå°†ä¸€ä¸ªä»»åŠ¡ä»Žä¸€ä¸ª NUMA èŠ‚ç‚¹è¿ç§»åˆ°äº†å¦ä¸€ä¸ªèŠ‚ç‚¹ï¼Œä¼šä¸¥é‡å½±å“ä»»åŠ¡çš„æ‰§è¡Œæ•ˆçŽ‡ã€‚
   >
   > åˆä»¥ **è¶…çº¿ç¨‹** ä¸ºä¾‹ï¼š
   >
   > - ä¸€ä¸ª **ç‰©ç†æ ¸** ä¼šè¢«é€»è¾‘ä¸Šåˆ†ä¸ºä¸¤ä¸ª **é€»è¾‘æ ¸**ã€‚
   > - ä»»åŠ¡åœ¨åŒå±žäºŽä¸€ä¸ªç‰©ç†æ ¸çš„ä¸¤ä¸ªé€»è¾‘æ ¸åˆ‡æ¢çš„å¼€é”€ï¼Œä¼šæ¯”åœ¨ä¸åŒç‰©ç†æ ¸çš„ä¸¤ä¸ªé€»è¾‘æ ¸é—´åˆ‡æ¢çš„å¼€é”€å°å¾ˆå¤šã€‚

2. Linux çš„è´Ÿè½½å‡è¡¡ç­–ç•¥é€šè¿‡ **å±‚çº§åŒ–** çš„æ–¹æ³•è§£å†³äº†ä¸Šè¿°é—®é¢˜ã€‚

   1. ä¸‹é¢é¦–å…ˆä»‹ç» Linux åœ¨è´Ÿè½½å‡è¡¡ä¸­ä½¿ç”¨çš„ä¸¤ä¸ªæ•°æ®ç»“æž„ï¼š

      1. **è°ƒåº¦åŸŸæ˜¯æ‹¥æœ‰ç›¸åŒç‰¹æ€§çš„ CPU æ ¸å¿ƒçš„é›†åˆ**ï¼Œè¿™äº›æ ¸å¿ƒé—´å¯ä»¥è¿›è¡Œè´Ÿè½½å‡è¡¡ã€‚
      2. ä¸€ä¸ªè°ƒåº¦åŸŸä¿å­˜ä¸€ä¸ªæˆ–å¤šä¸ª **è°ƒåº¦ç»„**ï¼Œè°ƒåº¦ç»„æ˜¯ä¸€ä¸ªè°ƒåº¦åŸŸå†… **è¿›è¡Œè´Ÿè½½å‡è¡¡çš„æ•´ä½“å•ä½**ã€‚

   2. ä¸‹å›¾å±•ç¤ºäº† Linux åœ¨NUMA æž¶æž„ä¸”å¼€å¯äº†è¶…çº¿ç¨‹çš„æƒ…å†µä¸‹å¦‚ä½•ç®¡ç†è°ƒåº¦åŸŸçš„ä¾‹å­ï¼š

      ![image-20220729211707228](https://ricear.com/media/202207/2022-07-29_211722_5857510.7513526931048867.png)

      1. åœ¨ç³»ç»Ÿä¸­ï¼ŒCore 0 å’Œ Core 1 å®žé™…ä¸Šæ˜¯ç”±ä¸€ä¸ª **ç‰©ç†æ ¸** åˆ†åŒ–è€Œæ¥çš„ä¸¤ä¸ªé€»è¾‘æ ¸ï¼Œä»–ä»¬ç»„æˆäº†ä¸€ä¸ª **é€»è¾‘ CPU åŸŸ**ï¼Œè¯¥åŸŸä¸­æœ‰ä¸¤ä¸ªè°ƒåº¦ç»„ï¼Œåˆ†åˆ«å¯¹åº”äºŽ Core 0 å’Œ Core 1ã€‚
      2. ä¸¤ä¸ªç‰©ç†æ ¸ç»„æˆäº†ä¸€ä¸ª **NUMA èŠ‚ç‚¹**ï¼Œå¯¹åº”äºŽä¸€ä¸ª **ç‰©ç† CPU åŸŸ**ï¼Œè¯¥åŸŸä¸­åŒæ ·æœ‰ä¸¤ä¸ªè°ƒåº¦ç»„ï¼Œåˆ†åˆ«å¯¹åº”äºŽæ¬¡ä¸€çº§çš„é€»è¾‘ CPU åŸŸç®¡ç†çš„ä¸€ä¸ªç‰©ç†æ ¸ã€‚
      3. åŒæ ·åœ°ï¼Œä¸¤ä¸ªç‰©ç† CPU åŸŸç»„æˆäº†ä¸€ä¸ª **NUMA åŸŸ**ï¼Œå…¶ä¸¤ä¸ªè°ƒåº¦ç»„åˆ†åˆ«å¯¹åº”äºŽæ¬¡ä¸€çº§çš„ç‰©ç† CPU åŸŸç®¡ç†çš„ä¸€ä¸ª NUMA èŠ‚ç‚¹ã€‚

      > åœ¨æœ¬ä¾‹ä¸­ï¼ŒNUMA åŸŸå°±æ˜¯ç³»ç»Ÿä¸­ **æœ€é¡¶çº§çš„è°ƒåº¦åŸŸ** äº†ï¼Œå› æ­¤å…¶è°ƒåº¦ç»„ **åŒ…å«äº†ç³»ç»Ÿä¸­æ‰€æœ‰çš„ CPU æ ¸å¿ƒ**ã€‚ç”±äºŽè®¡ç®—æœºæž¶æž„åœ¨è¿è¡Œæ—¶ä¸ä¼šæ”¹å˜ï¼Œå› æ­¤å¯ä»¥è®¤ä¸º **è°ƒåº¦åŸŸä¸Žè°ƒåº¦ç»„æ˜¯åªè¯»çš„**ï¼Œæ¯ä¸ª CPU æ ¸å¿ƒéƒ½ä¸ºä¸Šè¿°æ•°æ®ç»“æž„ç»´æŠ¤äº†ä¸€ä»½ **åªè¯»çš„æœ¬åœ°æ‹·è´**ã€‚

3. Linux é€šè¿‡ **è‡ªä¸‹è€Œä¸Š** çš„æ–¹å¼ **å±‚çº§å¼** åœ°è¿›è¡Œè´Ÿè½½å‡è¡¡ï¼Œå¹¶ä¸”ä¸ºäº†è®¾è®¡ç®€å•ï¼Œ**åªå…è®¸å‡ºå‘è´Ÿè½½å‡è¡¡çš„ CPU æ ¸å¿ƒæ‹‰å–å…¶ä»– CPU æ ¸å¿ƒçš„ä»»åŠ¡åˆ°æœ¬åœ°**ã€‚

   > - å¦‚æžœå½“å‰ CPU æ ¸å¿ƒè§¦å‘è´Ÿè½½å‡è¡¡é€»è¾‘ï¼š
   >   - é¦–å…ˆåœ¨ **æœ€åº•å±‚è°ƒåº¦åŸŸ**ï¼ˆé€»è¾‘ CPU åŸŸï¼‰å†…çš„è°ƒåº¦ç»„ï¼ˆé€»è¾‘æ ¸ï¼‰é—´è¿›è¡Œå‡è¡¡ã€‚
   >   - ç„¶åŽä¾æ¬¡è¿›å…¥ **æ›´é«˜ä¸€çº§çš„è°ƒåº¦åŸŸ**ï¼ˆç‰©ç† CPU åŸŸ / NUMA åŸŸï¼‰ï¼Œå¹¶å¯¹å…¶ç®¡ç†çš„è°ƒåº¦ç»„ï¼ˆç‰©ç†æ ¸ / NUMA èŠ‚ç‚¹ï¼‰è¿›è¡Œè´Ÿè½½å‡è¡¡ã€‚
   > - ç”±äºŽåœ¨ **è¶Šé«˜å±‚çº§** çš„è°ƒåº¦åŸŸé—´è¿›è¡Œè´Ÿè½½å‡è¡¡çš„ **å¼€é”€è¶Šå¤§**ï¼Œæ‰€ä»¥ Linux ä¸ºä¸åŒå±‚çº§çš„è°ƒåº¦åŸŸè®¾ç½®äº†ä¸åŒçš„ **è´Ÿè½½å‡è¡¡è§¦å‘é¢‘çŽ‡ä¸Žé˜ˆå€¼**ï¼ˆåªæœ‰å½“ä¸¤ä¸ªè°ƒåº¦ç»„çš„è´Ÿè½½ç›¸å·®è¶…è¿‡ä¸€å®šé˜ˆå€¼æ‰ä¼šè§¦å‘è´Ÿè½½å‡è¡¡ï¼‰ï¼Œä»¥æ­¤æ¥ **å‡å°‘è´Ÿè½½å‡è¡¡çš„å¼€é”€**ã€‚

## å‚è€ƒæ–‡çŒ®

1. ã€ŠçŽ°ä»£æ“ä½œç³»ç»Ÿï¼šåŽŸç†ä¸Žå®žçŽ°ã€‹