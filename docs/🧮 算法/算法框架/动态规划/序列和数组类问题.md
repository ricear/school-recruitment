---
sidebar_position: 4
---

## åºåˆ—ç±»é—®é¢˜

### æœ€é•¿é€’å¢å­åºåˆ—

> é¢˜ç›®æ¥æºï¼š[300. æœ€é•¿é€’å¢å­åºåˆ—](https://leetcode-cn.com/problems/longest-increasing-subsequence)ã€‚

#### é¢˜ç›®

ç»™ä½ ä¸€ä¸ªæ•´æ•°æ•°ç»„ nums ï¼Œæ‰¾åˆ°å…¶ä¸­æœ€é•¿ä¸¥æ ¼é€’å¢å­åºåˆ—çš„é•¿åº¦ã€‚

å­åºåˆ—æ˜¯ç”±æ•°ç»„æ´¾ç”Ÿè€Œæ¥çš„åºåˆ—ï¼Œåˆ é™¤ï¼ˆæˆ–ä¸åˆ é™¤ï¼‰æ•°ç»„ä¸­çš„å…ƒç´ è€Œä¸æ”¹å˜å…¶ä½™å…ƒç´ çš„é¡ºåºã€‚ä¾‹å¦‚ï¼Œ[3,6,2,7] æ˜¯æ•°ç»„ [0,3,1,6,2,2,7] çš„å­åºåˆ—ã€‚

**ç¤ºä¾‹ 1ï¼š**

```txt
è¾“å…¥ï¼šnums = [10,9,2,5,3,7,101,18]
è¾“å‡ºï¼š4
è§£é‡Šï¼šæœ€é•¿é€’å¢å­åºåˆ—æ˜¯ [2,3,7,101]ï¼Œå› æ­¤é•¿åº¦ä¸º 4 ã€‚
```

**ç¤ºä¾‹ 2ï¼š**

```txt
è¾“å…¥ï¼šnums = [0,1,0,3,2,3]
è¾“å‡ºï¼š4
```

**ç¤ºä¾‹ 3ï¼š**

```txt
è¾“å…¥ï¼šnums = [7,7,7,7,7,7,7]
è¾“å‡ºï¼š1
```

**æç¤ºï¼š**

* 1 <= nums.length <= 2500
* -104 <= nums[i] <= 104

**è¿›é˜¶ï¼š**

* ä½ å¯ä»¥è®¾è®¡æ—¶é—´å¤æ‚åº¦ä¸º O(n2) çš„è§£å†³æ–¹æ¡ˆå—ï¼Ÿ
* ä½ èƒ½å°†ç®—æ³•çš„æ—¶é—´å¤æ‚åº¦é™ä½åˆ° O(n log(n)) å—?

#### é—®é¢˜åˆ†æ

**æœ€é•¿é€’å¢å­åºåˆ—**å’Œä¸€ç§å«åš**Patience Game**çš„çº¸ç‰Œæ¸¸æˆæœ‰å…³ï¼Œç”šè‡³æœ‰ä¸€ç§æ’åºæ–¹æ³•å°±å«åš**Patience Sorting**ï¼ˆè€å¿ƒæ’åºï¼‰ã€‚è¯¥çº¸ç‰Œæ¸¸æˆçš„ç©æ³•å¦‚ä¸‹ï¼š

1. é¦–å…ˆï¼Œç»™æˆ‘ä»¬ä¸€å‰¯æ‰‘å…‹ç‰Œï¼Œæˆ‘ä»¬æƒ³éå†æ•°ç»„é‚£æ ·ä»å·¦åˆ°å³ä¸€å¼ ä¸€å¼ å¤„ç†è¿™äº›æ‰‘å…‹ç‰Œï¼Œæœ€ç»ˆè¦æŠŠè¿™äº›ç‰Œåˆ†æˆè‹¥å¹²å †ã€‚

![](https://notebook.ricear.com/media/202104/2021-04-04_210817.png)

2. å¤„ç†è¿™äº›æ‰‘å…‹ç‰Œè¦éµå¾ªä»¥ä¸‹è§„åˆ™ï¼š
   1. **åªèƒ½æŠŠç‚¹æ•°å°çš„ç‰Œå‹åˆ°ç‚¹æ•°æ¯”ä»–å¤§çš„ç‰Œä¸Šã€‚**
   2. å¦‚æœå½“å‰ç‰Œ**ç‚¹æ•°è¾ƒå¤§æ²¡æœ‰å¯ä»¥æ”¾ç½®çš„å †**ï¼Œåˆ™**æ–°å»ºä¸€ä¸ªå †**ï¼ŒæŠŠè¿™å¼ ç‰Œæ”¾è¿›å»ã€‚
   3. å¦‚æœå½“å‰ç‰Œ**æœ‰å¤šä¸ªå †å¯ä¾›é€‰æ‹©**ï¼Œåˆ™é€‰æ‹©**æœ€å·¦è¾¹çš„å †**æ”¾ç½®ï¼ˆä¿è¯ç‰Œå †é¡¶çš„ç‰Œæœ‰åºï¼‰ã€‚
3. æ¯”å¦‚è¯´ä¸Šè¿°çš„æ‰‘å…‹ç‰Œæœ€ç»ˆä¼šè¢«åˆ†æˆè¿™æ · 5 å †ï¼ˆæˆ‘ä»¬è®¤ä¸º $A$ çš„å€¼æœ€å¤§ï¼Œè€Œä¸æ˜¯ 1ï¼‰ã€‚

![](https://notebook.ricear.com/media/202104/2021-04-04_211338.png)

4. æŒ‰ç…§ä¸Šè¿°è§„åˆ™æ‰§è¡Œï¼Œå¯ä»¥ç®—å‡ºæœ€é•¿é€’å¢å­åºåˆ—ï¼Œ**ç‰Œçš„å †æ•°å°±æ˜¯æœ€é•¿é€’å¢å­åºåˆ—çš„é•¿åº¦**ã€‚

![](https://notebook.ricear.com/media/202104/2021-04-04_211739.png)

5. æˆ‘ä»¬åªè¦æŠŠ**å¤„ç†æ‰‘å…‹ç‰Œçš„è¿‡ç¨‹**ç¼–ç¨‹å†™å‡ºæ¥å³å¯ã€‚æ¯æ¬¡å¤„ç†ä¸€å¼ æ‰‘å…‹ç‰Œä¸æ˜¯è¦æ‰¾åˆ°ä¸€ä¸ªåˆé€‚çš„ç‰Œå †é¡¶æ¥æ”¾å—ï¼Œç‰Œå †é¡¶çš„ç‰Œä¸æ˜¯æœ‰åºå—ï¼Œè¿™å°±èƒ½ç”¨åˆ°äºŒåˆ†æŸ¥æ‰¾äº†ï¼šç”¨**å¯»æ‰¾å·¦ä¾§è¾¹ç•Œçš„äºŒåˆ†æŸ¥æ‰¾æ³•æ¥æœç´¢å½“å‰ç‰Œåº”æ”¾ç½®çš„ä½ç½®**ã€‚

#### å‚è€ƒä»£ç 

```java
/**
     * 300. æœ€é•¿é€’å¢å­åºåˆ—ï¼ˆç‰ˆæœ¬ 2ï¼šäºŒåˆ†æ•°ç»„ï¼‰
     * ç»™ä½ ä¸€ä¸ªæ•´æ•°æ•°ç»„ nums ï¼Œæ‰¾åˆ°å…¶ä¸­æœ€é•¿ä¸¥æ ¼é€’å¢å­åºåˆ—çš„é•¿åº¦ã€‚
     * å­åºåˆ—æ˜¯ç”±æ•°ç»„æ´¾ç”Ÿè€Œæ¥çš„åºåˆ—ï¼Œåˆ é™¤ï¼ˆæˆ–ä¸åˆ é™¤ï¼‰æ•°ç»„ä¸­çš„å…ƒç´ è€Œä¸æ”¹å˜å…¶ä½™å…ƒç´ çš„é¡ºåºã€‚ä¾‹å¦‚ï¼Œ[3,6,2,7] æ˜¯æ•°ç»„ [0,3,1,6,2,2,7] çš„å­åºåˆ—ã€‚
     *
     * @param nums æ•´æ•°æ•°ç»„
     * @return æœ€é•¿ä¸¥æ ¼é€’å¢å­åºåˆ—çš„é•¿åº¦
     */
    public int lengthOfLISV2(int[] nums) {
        //  ç‰Œå †é¡¶éƒ¨çš„ç‰Œ
        int[] top = new int[nums.length];
        //  ç‰Œå †æ•°
        int piles = 0;

        //  éå† numsï¼Œå°†ç‰Œè¿›è¡Œåˆ†å †
        for (int i = 0; i < nums.length; i++) {
            int poker = nums[i];

            //  é‡‡ç”¨å¯»æ‰¾å·¦ä¾§è¾¹ç•Œçš„äºŒåˆ†æŸ¥æ‰¾æ³•ï¼Œå¯»æ‰¾ç‰Œåº”æ”¾ç½®çš„å †çš„ä½ç½®
            int left = 0, right = piles - 1;
            while (left <= right) {
                int mid = left + (right - left) / 2;
                if (top[mid] > poker) {
                    right = mid - 1;
                } else if (top[mid] < poker) {
                    left = mid + 1;
                } else if (top[mid] == poker) {
                    right = mid - 1;
                }
            }

            //  æ²¡æ‰¾åˆ°æ”¾ç‰Œçš„ä½ç½®ï¼Œåˆ™æ–°å»ºä¸€å †
            if (left >= piles) {piles++;};
            //  å°†ç‰Œæ”¾åˆ°è¯¥å †çš„ä½ç½®
            top[left] = poker;
        }

        //  ç‰Œå †æ•°å³ä¸ºæœ€é•¿é€’å¢å­åºåˆ—çš„é•¿åº¦ï¼Œå°†å…¶ç›´æ¥è¿”å›å³å¯
        return piles;
    }
```

#### æ‰©å±•é¢˜ç›®

##### è¾“å‡ºå­—å…¸åºæœ€å°çš„æœ€é•¿å­åºåˆ—

> é¢˜ç›®æ¥æºï¼š[NC91 æœ€é•¿ä¸Šå‡å­åºåˆ—(ä¸‰)](https://www.nowcoder.com/practice/9cf027bf54714ad889d4f30ff0ae5481)ã€‚

###### é—®é¢˜è§£æ

1. è§£ç­”æ­¤é¢˜æ—¶å¯ä»¥é‡‡ç”¨ [äºŒåˆ†æŸ¥æ‰¾](https://ricear.com/project-21/doc-759) çš„æ–¹æ³•æ¥è¿›è¡Œæ±‚è§£ã€‚
2. å‡è®¾ $d[i]$ è¡¨ç¤º **é•¿åº¦ä¸º $i$ çš„æœ€é•¿ä¸Šå‡å­åºåˆ—çš„æœ«å°¾æ•°å­—çš„æœ€å°å€¼**ï¼Œ$p[i]$ è¡¨ç¤º **ä»¥ $arr[i]$ ä¸ºç»“å°¾çš„æœ€é•¿ä¸Šå‡å­åºåˆ—çš„é•¿åº¦**ï¼š

   1. åˆå§‹æ—¶æœ€é•¿ä¸Šå‡å­åºåˆ—çš„é•¿åº¦ $len$ ä¸º 1ï¼Œ$d[1] = arr[0]$ï¼Œ$p[0] = 1$ã€‚
   2. ç„¶åå¯¹æ•°ç»„è¿›è¡Œéå†ï¼š

      1. å¦‚æœ $arr[i]$ å¤§äº $d[len]$ï¼Œè¡¨æ˜ $arr[i]$ å¯ä»¥ä¸å‰é¢çš„å…ƒç´ ç»„æˆä¸€ä¸ª **æ›´é•¿çš„ä¸Šå‡å­åºåˆ—**ï¼Œå› æ­¤å°† $len$ åŠ  1ï¼Œç„¶åå°† $arr[i]$ èµ‹å€¼ç»™ $d[len]$ã€‚
      2. å¦åˆ™ï¼Œè¡¨æ˜ $arr[i]$ **ä¸èƒ½** ä¸å‰é¢çš„å…ƒç´ ç»„æˆä¸€ä¸ªæ›´é•¿çš„ä¸Šå‡å­åºåˆ—ï¼Œæ­¤æ—¶éœ€è¦çœ‹ä¸€ä¸‹å½“å‰éå†åˆ°çš„å…ƒç´ æ˜¯å¦å¯ä»¥ä¸å‰é¢çš„å…ƒç´ ç»„æˆä¸€ä¸ª **å­—å…¸åºæ›´å°** çš„æœ€é•¿ä¸Šå‡å­åºåˆ—ï¼Œå®è´¨ä¸Šå°±æ˜¯åœ¨ $d$ ä¸­æ‰¾åˆ°ä¸€ä¸ªæ¯” $arr[i]$ æ›´å°çš„å€¼ï¼Œç„¶åä½¿ç”¨ $arr[i]$ æ¥æ›¿æ¢ $d$ ä¸­å¯¹åº”çš„å…ƒç´ ï¼Œä¸ºäº†å‡å°‘éå†æ‰€ç”¨çš„æ—¶é—´ï¼Œè¿™é‡Œé‡‡ç”¨ **äºŒåˆ†æŸ¥æ‰¾** çš„æ–¹æ³•ï¼Œé—®é¢˜ä¹Ÿå°±è½¬åŒ–ä¸ºäº†äºŒåˆ†æŸ¥æ‰¾çš„ **å·¦ä¾§è¾¹ç•Œ** çš„é—®é¢˜ï¼š

         1. åˆå§‹æ—¶ $left$ ä¸º 1ï¼Œ$right$ ä¸º $len$ã€‚
         2. å¦‚æœ $d[mid]$ å°äº $arr[i]$ï¼š
            1. $pos = mid$ã€‚
            2. $left = mid + 1$ã€‚
         3. å¦åˆ™ï¼š
            1. $right = mid - 1$ã€‚
         4. æœ€åï¼Œæ›´æ–° $d$ ä¸­çš„ç›¸åº”çš„å…ƒç´ ä¸º $arr[i]$ ï¼ŒåŒæ—¶è®°å½•ä»¥ $arr[i]$ ç»“å°¾çš„æœ€é•¿ä¸Šå‡å­åºåˆ—çš„é•¿åº¦ï¼š
            1. $d[pos + 1] = arr[i]$ã€‚
            2. $p[i] = pos + 1$ã€‚

         > ğŸ’ ä¸Šé¢çš„ $pos$ ç”¨æ¥ä¿å­˜ $arr[i]$ æ”¾åˆ° $d$ ä¸­çš„ä½ç½®ï¼Œä¹Ÿè¡¨ç¤ºä»¥ $arr[i]$ ç»“å°¾çš„æœ€é•¿ä¸Šå‡å­åºåˆ—çš„é•¿åº¦ã€‚
         >

<iframe src="https://www.youtube.com/embed/FqPpFscQyzU?list=PLHH5EZ_Bw-YGWD--DBu0-jqb2ptqG_Igg" width="100%" height="480" allow="autoplay" allowfullscreen="true"></iframe>

> åŠ¨ç”»é“¾æ¥ï¼š[NC91-æœ€é•¿é€’å¢å­åºåˆ—](https://drive.google.com/file/d/1K2UPL4_H42Wn13ciXZ4wAeJDY7bplaKm/view?usp=sharing)ã€‚

###### å‚è€ƒä»£ç 

```java
/**
 * NC91-æœ€é•¿é€’å¢å­åºåˆ—
 * 
 * @param arr æ•°ç»„
 */
public int[] LIS (int[] arr) {
    if (arr.length == 1) {return arr;}  // ç‰¹æ®Šæƒ…å†µï¼Œ[2]
    int[] d = new int[arr.length];  // d[i] è¡¨ç¤ºé•¿åº¦ä¸º i çš„æœ€é•¿é€’å¢å­åºåˆ—çš„æœ«å°¾æ•°å­—çš„æœ€å°å€¼
    int[] p = new int[arr.length];  // p[i] è¡¨ç¤ºä»¥ arr[i] ä¸ºç»“å°¾çš„æœ€é•¿ä¸Šå‡å­åºåˆ—çš„é•¿åº¦
    int len = 1;
    d[len] = arr[0];
    p[0] = 1;
  
    for (int i = 1; i < arr.length; i++) {
        if (arr[i] > d[len]) {
            d[++len] = arr[i];
            p[i] = len;
        } else {
            int left = 1, right = len, pos = 0;
            while (left <= right) {
                int mid = left + (right - left) / 2;
                if (d[mid] < arr[i]) {
                    pos = mid;
                    left = mid + 1;
                } else {
                    right = mid - 1;
                }
            }
            d[pos + 1] = arr[i];
            p[i] = pos + 1;
        }
    }
  
    int[] ans = new int[len];
    for (int i = p.length - 1; i >= 0; i--) {
        if (p[i] == len) {
            ans[--len] = arr[i];
        }
    }
  
    return ans;
}
```

### æœ€é•¿å›æ–‡å­åºåˆ—

> é¢˜ç›®æ¥æºï¼š[516. æœ€é•¿å›æ–‡å­åºåˆ—](https://leetcode-cn.com/problems/longest-palindromic-subsequence)ã€‚

#### é¢˜ç›®

ç»™å®šä¸€ä¸ªå­—ç¬¦ä¸² s ï¼Œæ‰¾åˆ°å…¶ä¸­æœ€é•¿çš„å›æ–‡å­åºåˆ—ï¼Œå¹¶è¿”å›è¯¥åºåˆ—çš„é•¿åº¦ã€‚å¯ä»¥å‡è®¾ s çš„æœ€å¤§é•¿åº¦ä¸º 1000 ã€‚
**ç¤ºä¾‹ 1:**
è¾“å…¥:

```
"bbbab"
```

è¾“å‡º:

```
4
```

ä¸€ä¸ªå¯èƒ½çš„æœ€é•¿å›æ–‡å­åºåˆ—ä¸º "bbbb"ã€‚

**ç¤ºä¾‹ 2:**
è¾“å…¥:

```
"cbbd"
```

è¾“å‡º:

```
2
```

ä¸€ä¸ªå¯èƒ½çš„æœ€é•¿å›æ–‡å­åºåˆ—ä¸º "bb"ã€‚

**æç¤ºï¼š**

* 1 <= s.length <= 1000
* s åªåŒ…å«å°å†™è‹±æ–‡å­—æ¯

#### è§£é¢˜æ€è·¯

##### å­åºåˆ—é—®é¢˜å¤„ç†æ¨¡æ¿

å¯¹äºè¿™ç§å­åºåˆ—é—®é¢˜ï¼Œæˆ‘ä»¬ä¸€èˆ¬éœ€è¦ä½¿ç”¨**åŠ¨æ€è§„åˆ’**çš„æ–¹æ³•æ¥è§£å†³ï¼š

1. **æ‰¾çŠ¶æ€å…³ç³»ï¼ˆé€šè¿‡æ•°å­¦å½’çº³è·å¾—ï¼‰ã€‚**
2. **å®šä¹‰ dp æ•°ç»„ï¼ˆæ ¹æ®çŠ¶æ€è½¬ç§»æ–¹ç¨‹è·å¾—ï¼‰ã€‚**

dp æ•°ç»„çš„å®šä¹‰ä¸»è¦æœ‰ä¸¤ç§æ–¹å¼ï¼Œä¸€ç§æ˜¯å®šä¹‰ä¸€ä¸ª**ä¸€ç»´æ•°ç»„**ï¼Œå¦ä¸€ç§æ˜¯å®šä¹‰ä¸€ä¸ª**äºŒç»´æ•°ç»„**ã€‚

###### ä¸€ç»´ dp æ•°ç»„

ä¾‹å¦‚ï¼Œåœ¨[æœ€é•¿é€’å¢å­åºåˆ—](http://ricear.com/project-21/doc-266)ä¸­ï¼Œæˆ‘ä»¬å°±æ˜¯å®šä¹‰äº†ä¸€ä¸ªä¸€ç»´æ•°ç»„ï¼Œå…¶å«ä¹‰ä¸ºï¼š**åœ¨å­æ•°ç»„ $array[0..i]$ ä¸­ï¼Œæˆ‘ä»¬è¦æ±‚çš„å­åºåˆ—ï¼ˆæœ€é•¿é€’å¢å­åºåˆ—ï¼‰çš„é•¿åº¦æ˜¯ $dp[i]$ã€‚**

```java
int n = array.length;
int[] dp = new int[n];
for (int i = 1; i < n; i++) {
    for (int j = 0; j < i; j++) {
        dp[i] = æœ€å€¼(dp[i], dp[j] + ...)
    }
}
```

###### äºŒç»´ dp æ•°ç»„

è¿™ç§æ€è·¯è¿ç”¨ç›¸å¯¹å¤šä¸€äº›ï¼Œå°¤å…¶æ˜¯æ¶‰åŠä¸¤ä¸ªå­—ç¬¦ä¸²/æ•°ç»„çš„å­åºåˆ—ã€‚æœ¬æ€è·¯ä¸­ dp æ•°ç»„å«ä¹‰åˆåˆ†ä¸º**åªæ¶‰åŠä¸€ä¸ªå­—ç¬¦ä¸²**å’Œ**æ¶‰åŠä¸¤ä¸ªå­—ç¬¦ä¸²**ä¸¤ç§æƒ…å†µã€‚

1. **åªæ¶‰åŠä¸€ä¸ªå­—ç¬¦ä¸²/æ•°ç»„æ—¶ï¼š** åœ¨å­æ•°ç»„ $array[i..j]$ ä¸­ï¼Œæˆ‘ä»¬è¦æ±‚çš„å­åºåˆ—ï¼ˆæœ€é•¿å›æ–‡å­åºåˆ—ï¼‰çš„é•¿åº¦ä¸º $dp[i][j]$ã€‚
2. **æ¶‰åŠä¸¤ä¸ªå­—ç¬¦ä¸²/æ•°ç»„ï¼šåœ¨å­æ•°ç»„ $arr1[0..i]$ å’Œ $arr2[0..j]$ ä¸­ï¼Œæˆ‘ä»¬è¦æ±‚çš„å­åºåˆ—ï¼ˆæœ€é•¿å…¬å…±å­åºåˆ—ï¼‰é•¿åº¦ä¸º $dp[i][j]$ã€‚**

##### é—®é¢˜åˆ†æ

![](https://notebook.ricear.com/media/202104/2021-04-08_163717.png)

dp å‡½æ•°çš„å®šä¹‰ä¸ºï¼š**åœ¨å­ä¸² $s[i..j]$ ä¸­ï¼Œæœ€é•¿å›æ–‡å­åºåˆ—çš„é•¿åº¦ä¸º $dp[i][j]$**ã€‚

å¦‚æœæˆ‘ä»¬æƒ³æ±‚ $dp[i][j]$ï¼Œå‡è®¾æˆ‘ä»¬å·²ç»çŸ¥é“äº†å­é—®é¢˜ $dp[i+1][j-1]$ çš„ç»“æœï¼Œå³ $s[i+1..j-1]$ ä¸­æœ€é•¿å›æ–‡å­åºåˆ—çš„é•¿åº¦ï¼Œé‚£ä¹ˆæˆ‘ä»¬å°±å¯ä»¥æƒ³åŠæ³•ç®—å‡º $dp[i][j]$ çš„å€¼ï¼Œå³ $s[i..j]$ ä¸­æœ€é•¿å›æ–‡å­åºåˆ—çš„é•¿åº¦ï¼Œè¿™ä¸»è¦å–å†³äº $s[i]$ å’Œ $s[j]$ çš„å­—ç¬¦ã€‚

1. **å¦‚æœ $s[i]==s[j]$ï¼š** åˆ™ä»–ä¿©åŠ ä¸Š $s[i+1..j-1]$ ä¸­çš„æœ€é•¿å›æ–‡å­åºåˆ—å°±æ˜¯ $s[i..j]$ çš„æœ€é•¿å›æ–‡å­åºåˆ—ã€‚

![](https://notebook.ricear.com/media/202104/2021-04-08_164936.png)

2. **å¦‚æœ $s[i]!=s[j]$ï¼š** è¯´æ˜ä»–ä¿©ä¸å¯èƒ½åŒæ—¶å‡ºç°åœ¨ $s[i..j]$ çš„æœ€é•¿å›æ–‡å­åºåˆ—ä¸­ï¼Œé‚£ä¹ˆæŠŠä»–ä¿©åˆ†åˆ«åŠ å…¥ $s[i+1..j-1]$ ä¸­ï¼Œçœ‹çœ‹å“ªä¸ªå­ä¸²äº§ç”Ÿçš„å›æ–‡å­åºåˆ—æ›´é•¿å³å¯ã€‚

![](https://notebook.ricear.com/media/202104/2021-04-08_165224.png)

ä»£ç æ¨¡æ¿å¦‚ä¸‹ï¼š

```c++
if (s[i] == s[j])
    // å®ƒä¿©â¼€å®šåœ¨æœ€â»“å›â½‚â¼¦åºåˆ—ä¸­
    dp[i][j] = dp[i + 1][j - 1] + 2;
else
    //  s[i+1..j] å’Œ s[i..j-1] è°çš„å›â½‚â¼¦åºåˆ—æ›´â»“ï¼Ÿ
    dp[i][j] = max(dp[i + 1][j], dp[i][j - 1]);
```

è‡³æ­¤ï¼ŒçŠ¶æ€è½¬ç§»æ–¹ç¨‹å°±å†™å‡ºæ¥äº†ï¼Œæ ¹æ®**dp æ•°ç»„**çš„å®šä¹‰ï¼Œ**æˆ‘ä»¬è¦æ±‚çš„å°±æ˜¯ $dp[0][n-1]$ï¼Œä¹Ÿå°±æ˜¯æ•´ä¸ª s çš„æœ€é•¿å›æ–‡å­åºåˆ—çš„é•¿åº¦**ã€‚

##### å‚è€ƒä»£ç 

1. é¦–å…ˆæ˜ç¡®ä¸€ä¸‹ $base \space case$ï¼Œå¦‚æœåªæœ‰ä¸€ä¸ªå­—ç¬¦ï¼Œæ˜¾ç„¶æœ€é•¿å›æ–‡å­åºåˆ—çš„é•¿åº¦ä¸º 1ï¼Œå³ $dp[i][j]=1 \space (i==j)$ã€‚
2. å› ä¸º $i$ è‚¯å®šå°äº $j$ï¼Œæ‰€ä»¥å¯¹äºé‚£äº› $i>j$ çš„ä½ç½®ï¼Œæ ¹æœ¬ä¸å­˜åœ¨ä»€ä¹ˆå­åºåˆ—ï¼Œåº”è¯¥åˆå§‹åŒ–ä¸º 0ã€‚
3. æ ¹æ®æˆ‘ä»¬åˆšæ‰çš„çŠ¶æ€è½¬ç§»æ–¹ç¨‹ï¼Œæƒ³æ±‚ $dp[i][j]$ éœ€è¦çŸ¥é“ $dp[i+1][j-1]$ï¼Œ$dp[i+1][j]$ï¼Œ$dp[i][i-1]$ è¿™ä¸‰ä¸ªä½ç½®ï¼Œå°†å…¶å¡«å…¥ dp æ•°ç»„åæ˜¯è¿™æ ·ï¼š

![](https://notebook.ricear.com/media/202104/2021-04-08_173451.png)

**ä¸ºäº†ä¿è¯æ¯æ¬¡è®¡ç®— $dp[i][j]$ï¼Œå·¦ã€ä¸‹ã€å³æ–¹å‘çš„ä½ç½®å·²ç»è¢«è®¡ç®—å‡ºæ¥äº†ï¼Œåªèƒ½æ–œç€éå†æˆ–è€…åç€éå†ã€‚**

![](https://notebook.ricear.com/media/202104/2021-04-09_152953.png)

æˆ‘é€‰æ‹©**åç€éå†**ï¼Œå‚è€ƒä»£ç å¦‚ä¸‹ï¼š

```java
package com.ricear.com;

import java.util.Arrays;

/**
 * @author peng.wei
 * @version 1.0
 * @date 2021/4/8 14:50
 * @Description æœ€é•¿å›æ–‡å­åºåˆ—
 */
public class L516 {

    /**
     * 516. æœ€é•¿å›æ–‡å­åºåˆ—
     * ç»™å®šä¸€ä¸ªå­—ç¬¦ä¸² s ï¼Œæ‰¾åˆ°å…¶ä¸­æœ€é•¿çš„å›æ–‡å­åºåˆ—ï¼Œå¹¶è¿”å›è¯¥åºåˆ—çš„é•¿åº¦ã€‚å¯ä»¥å‡è®¾ s çš„æœ€å¤§é•¿åº¦ä¸º 1000 ã€‚
     * @param s å­—ç¬¦ä¸²
     * @return  æœ€é•¿å›æ–‡å­åºåˆ—çš„é•¿åº¦
     */
    public int longestPalindromeSubseq(String s) {
        int n = s.length();
        //  dp table: s[i...j] å­ä¸²çš„å›æ–‡å­åºåˆ—çš„æœ€å¤§é•¿åº¦
        //  æœ€ç»ˆçš„ç»“æœä¸º dp[0][n - 1]
        int[][] dp = new int[n][n];

        //  base case: å•ä¸ªå­—ç¬¦çš„å›æ–‡å­åºåˆ—çš„æœ€å¤§é•¿åº¦ä¸º 1
        for (int i = 0; i < n; i++) {
            dp[i][i] = 1;
        }
        for (int i = n - 1; i >= 0; i--) {
            for (int j = i + 1; j < n; j++) {
                if (s.charAt(i) == s.charAt(j)) {
                    //  ä¸¤ä¸ªå­—ç¬¦ç›¸ç­‰ï¼Œå°† dp[i + 1][j - 1] + 1
                    dp[i][j] = dp[i + 1][j - 1] + 2;
                } else {
                    //  ä¸¤ä¸ªå­—ç¬¦ä¸ç›¸ç­‰ï¼Œåˆ™ dp[i][j] = max(dp[i][j - 1], dp[i + 1][j])
                    dp[i][j] = Math.max(dp[i][j - 1], dp[i + 1][j]);
                }
            }
        }

        // è¿”å›æœ€ç»ˆçš„ç»“æœ dp[0][n - 1]
        return dp[0][n - 1];
    }

}
```

#### æ‰©å±•é¢˜ç›®

##### æœ€é•¿å›æ–‡å­ä¸²

> é¢˜ç›®æ¥æºï¼š[5. æœ€é•¿å›æ–‡å­ä¸²](https://leetcode.cn/problems/longest-palindromic-substring)ã€‚

###### é¢˜ç›®

ç»™ä½ ä¸€ä¸ªå­—ç¬¦ä¸² sï¼Œæ‰¾åˆ° s ä¸­æœ€é•¿çš„å›æ–‡å­ä¸²ã€‚

ç¤ºä¾‹ 1ï¼š

```
è¾“å…¥ï¼šs = "babad"
è¾“å‡ºï¼š"bab"
è§£é‡Šï¼š"aba" åŒæ ·æ˜¯ç¬¦åˆé¢˜æ„çš„ç­”æ¡ˆã€‚
```

ç¤ºä¾‹ 2ï¼š

```
è¾“å…¥ï¼šs = "cbbd"
è¾“å‡ºï¼š"bb"
```

ç¤ºä¾‹ 3ï¼š

```
è¾“å…¥ï¼šs = "a"
è¾“å‡ºï¼š"a"
```

ç¤ºä¾‹ 4ï¼š

```
è¾“å…¥ï¼šs = "ac"
è¾“å‡ºï¼š"a"
```

###### é—®é¢˜åˆ†æ

1. å¯ä»¥é€šè¿‡å¯¹å­—ç¬¦ä¸²è¿›è¡Œéå†ï¼Œç„¶ååœ¨éå†çš„è¿‡ç¨‹ä¸­ **ä»¥éå†åˆ°çš„å­—ç¬¦ä¸ºä¸­å¿ƒ**ï¼Œåˆ† **å¥‡æ•°å›æ–‡å­—ç¬¦ä¸²** å’Œ **å¶æ•°å›æ–‡å­—ç¬¦ä¸²** ä¸¤ç§æƒ…å†µï¼Œé‡‡ç”¨ **åŒæŒ‡é’ˆ** çš„æ–¹å¼æ¥è§£å†³ï¼š
   1. å‡è®¾å½“å‰éå†åˆ°çš„å­—ç¬¦çš„ä¸‹æ ‡ä¸º $i$ï¼š
      1. **å¥‡æ•°å›æ–‡å­—ç¬¦ä¸²**ï¼šç¬¬ä¸€ä¸ªæŒ‡é’ˆ $p$ çš„èµ·å§‹ä½ç½®ä¸º $i - 1$ï¼Œç¬¬äºŒä¸ªæŒ‡é’ˆ $q$ çš„èµ·å§‹ä½ç½®ä¸º $i + 1$ã€‚
      2. **å¶æ•°å›æ–‡å­—ç¬¦ä¸²**ï¼šç¬¬ä¸€ä¸ªæŒ‡é’ˆ $p$ çš„èµ·å§‹ä½ç½®ä¸º $i - 1$ï¼Œç¬¬äºŒä¸ªæŒ‡é’ˆ $q$ çš„èµ·å§‹ä½ç½®ä¸º $i$ã€‚
   2. ç„¶å $p$ å‘ **å·¦** ç§»åŠ¨ï¼Œ$q$ å‘ **å³** ç§»åŠ¨ã€‚
   3. ç»“æŸå¾ªç¯çš„æ¡ä»¶ä¸ºï¼ˆä»¥ä¸‹æ¡ä»¶ä¸º **æˆ–** çš„å…³ç³»ï¼‰ï¼š
      1. $p$ **å°äº 0**ã€‚
      2. $q$ **å¤§äºç­‰äºå­—ç¬¦ä¸²çš„é•¿åº¦**ã€‚
      3. $p$ æ‰€åœ¨ä½ç½®çš„å­—ç¬¦å’Œ $q$ æ‰€åœ¨ä½ç½®çš„ **å­—ç¬¦ä¸ç›¸ç­‰**ã€‚
2. ç„¶åæ¯æ¬¡éå†æ›´æ–°æœ€å¤§çš„å›æ–‡å­—ç¬¦ä¸²ä¸ºå¥‡æ•°å›æ–‡å­—ç¬¦ä¸²å’Œå¶æ•°å›æ–‡å­—ç¬¦ä¸²ä¸­çš„æœ€å¤§å€¼ï¼Œå½“éå†ç»“æŸåï¼Œè¿”å›æœ€å¤§çš„å›æ–‡å­—ç¬¦ä¸²å³å¯ã€‚

###### å‚è€ƒä»£ç 

```java
/**
 * å¯»æ‰¾å›æ–‡å­ä¸²
 * @param s     å­—ç¬¦ä¸²
 * @param start èµ·å§‹å­—ç¬¦çš„ä¸‹æ ‡
 * @param end   ç»“æŸå­—ç¬¦çš„ä¸‹æ ‡
 * @return å¶æ•°å›æ–‡å­ä¸²çš„é•¿åº¦
 */
public static String palindrome(String s, int start, int end) {
   int p = start, q = end;
    while (p >= 0 && q < s.length() && s.charAt(p) == s.charAt(q)) {
        p--;
        q++;
    }
    return s.substring(p + 1, q);
}

/**
 * 5.æœ€é•¿å›æ–‡å­ä¸²
 * @param s å­—ç¬¦ä¸²
 * @return æœ€é•¿å›æ–‡å­ä¸²
 */
public static String longestPalindrome(String s) {
    if (s.length() == 0) {return null;}
    else if (s.length() == 1) {return s;}
    String palindrome = "";
    for (int i = 0; i < s.length(); i++) {
        String oddPalindrome = palindrome(s, i - 1, i + 1);
        String evenPalindrome = palindrome(s, i - 1, i);
        palindrome = oddPalindrome.length() > palindrome.length() ? oddPalindrome : palindrome;
        palindrome = evenPalindrome.length() > palindrome.length() ? evenPalindrome : palindrome;
    }
    return palindrome;
}
```

### æœ€é•¿å…¬å…±å­åºåˆ—

> é¢˜ç›®æ¥æºï¼š[1143. æœ€é•¿å…¬å…±å­åºåˆ—](https://leetcode.cn/problems/longest-common-subsequence)ã€‚

#### è§£é¢˜æ€è·¯

##### åŠ¨æ€è§„åˆ’

###### é—®é¢˜åˆ†æ

1. ç±»ä¼¼çš„è§£æ³•è¿˜å¯ç”¨äº[1143. æœ€é•¿å…¬å…±å­åºåˆ—](https://leetcode-cn.com/problems/longest-common-subsequence/)ï¼Œä¸è¿‡è¿™é‡Œå’Œæ±‚æœ€é•¿é‡å¤å­æ•°ç»„ä¸åŒçš„ä¸€ç‚¹æ˜¯å­åºåˆ—ä¸­çš„å…ƒç´ ä¸ä¸€å®šåœ¨åŸæ•°ç»„ä¸­è¿ç»­ï¼Œå› æ­¤ï¼Œåœ¨ $dp$ æ•°ç»„çš„è½¬æ¢ä¸Šç¨å¾®ä¼šæœ‰ä¸€å®šåŒºåˆ«ï¼Œå…·ä½“å¦‚ä¸‹ï¼š

* **å¦‚æœ $nums1[i] = nums2[j]$**ï¼Œ**åˆ™ $dp[i][j] = dp[i + 1][j + 1] + 1$**ã€‚
* **å¦åˆ™**ï¼Œ$dp[i][j] = max(dp[i + 1][j], dp[i][j + 1])$ã€‚

![](https://notebook.ricear.com/media/202107/2021-07-17_205353.png)

###### å‚è€ƒä»£ç 

```java
/**
 * 1143. æœ€é•¿å…¬å…±å­åºåˆ—
 * @param text1 æ•°ç»„ 1
 * @param text2 æ•°ç»„ 2
 * @return  ä¸¤ä¸ªæ•°ç»„ä¸­å…¬å…±çš„ã€é•¿åº¦æœ€é•¿çš„å­æ•°ç»„çš„é•¿åº¦
 */
public int longestCommonSubsequence(String text1, String text2) {
    int n1 = text1.length();
    int n2 = text2.length();
    int res = 0;
    //  dp æ•°ç»„ï¼Œå…¶ä¸­ dp[i][j] è¡¨ç¤º nums1[i:] å’Œ nums2[j:] çš„æœ€é•¿å…¬å…±å­åºåˆ—çš„é•¿åº¦ï¼Œåˆ™ dp æ•°ç»„ä¸­æœ€å¤§çš„å…ƒç´ å³ä¸º nums1 å’Œ nums2 çš„æœ€é•¿å…¬å…±å­åºåˆ—çš„é•¿åº¦
    int[][] dp = new int[n1 + 1][n2 + 1];

    //  åˆ†åˆ«éå† nums1 å’Œ nums2ï¼Œè®¡ç®—æœ€é•¿å…¬å…±å­åºåˆ—çš„é•¿åº¦
    for (int i = n1 - 1; i >= 0; i--) {
        for (int j = n2 - 1; j >=0; j--) {
            //  å¦‚æœ nums1[i] = nums2[j]ï¼Œåˆ™ dp[i][j] = dp[i + 1][j + 1]ï¼Œå¦åˆ™ï¼Œdp[i][j] = max(dp[i + 1][j], dp[i][j + 1])
            if (text1.charAt(i) == text2.charAt(j)) {
                dp[i][j] = dp[i + 1][j + 1] + 1;
            } else {
                dp[i][j] = Math.max(dp[i + 1][j], dp[i][j + 1]);
            }
            res = Math.max(res, dp[i][j]);
        }
    }

    //  è¿”å›ç»“æœ
    return res;
}
```

## æ•°ç»„ç±»é—®é¢˜

### æœ€å¤§å­åºå’Œ

> é¢˜ç›®æ¥æºï¼š[53. æœ€å¤§å­åºå’Œ](https://leetcode-cn.com/problems/maximum-subarray)ã€‚

#### é¢˜ç›®

ç»™å®šä¸€ä¸ªæ•´æ•°æ•°ç»„ nums ï¼Œæ‰¾åˆ°ä¸€ä¸ªå…·æœ‰æœ€å¤§å’Œçš„è¿ç»­å­æ•°ç»„ï¼ˆå­æ•°ç»„æœ€å°‘åŒ…å«ä¸€ä¸ªå…ƒç´ ï¼‰ï¼Œè¿”å›å…¶æœ€å¤§å’Œã€‚

**ç¤ºä¾‹ 1ï¼š**

```txt
è¾“å…¥ï¼šnums = [-2,1,-3,4,-1,2,1,-5,4]
è¾“å‡ºï¼š6
è§£é‡Šï¼šè¿ç»­å­æ•°ç»„ [4,-1,2,1] çš„å’Œæœ€å¤§ï¼Œä¸º 6 ã€‚
```

**ç¤ºä¾‹ 2ï¼š**

```txt
è¾“å…¥ï¼šnums = [1]
è¾“å‡ºï¼š1
```

**ç¤ºä¾‹ 3ï¼š**

```txt
è¾“å…¥ï¼šnums = [0]
è¾“å‡ºï¼š0
```

**ç¤ºä¾‹ 4ï¼š**

```txt
è¾“å…¥ï¼šnums = [-1]
è¾“å‡ºï¼š-1
```

**ç¤ºä¾‹ 5ï¼š**

```txt
è¾“å…¥ï¼šnums = [-100000]
è¾“å‡ºï¼š-100000
```

**æç¤ºï¼š**

* 1 <= nums.length <= 3 * 104
* -105 <= nums[i] <= 105

**è¿›é˜¶ï¼š** å¦‚æœä½ å·²ç»å®ç°å¤æ‚åº¦ä¸º O(n) çš„è§£æ³•ï¼Œå°è¯•ä½¿ç”¨æ›´ä¸ºç²¾å¦™çš„ åˆ†æ²»æ³• æ±‚è§£ã€‚

#### è§£é¢˜æ€è·¯

##### åŠ¨æ€è§„åˆ’

###### é—®é¢˜åˆ†æ

1. å®šä¹‰ $dp$ æ•°ç»„ï¼š

   1. $dp[i]$ è¡¨ç¤º $nums$ ä¸­ä»¥ $nums[i]$ ç»“å°¾çš„æœ€å¤§å­åºå’Œã€‚
   2. $dp[i]$ ä¸­æœ€å¤§çš„å…ƒç´ å³ä¸º $nums$ çš„æœ€å¤§å­åºå’Œã€‚
   3. $dp[0] = nums[0]$ã€‚
2. åˆ—å‡ºçŠ¶æ€è½¬ç§»æ–¹ç¨‹ï¼š

   $$
   dp[i] = max(dp[i-1] + nums[i], nums[i])
   $$

![](https://notebook.ricear.com/media/202105/2021-05-22_194007.png)

###### å‚è€ƒä»£ç 

```java
/**
 * 53. æœ€å¤§å­åºå’Œï¼ˆç‰ˆæœ¬ 2ï¼šåŠ¨æ€è§„åˆ’ï¼‰
 *
 * @param nums æ•°ç»„
 * @return æœ€å¤§å­åºå’Œ
 */
public int maxSubArrayV2(int[] nums) {
    int len = nums.length, max;
    //  dp æ•°ç»„ï¼Œå…¶ä¸­ dp[i] è¡¨ç¤ºä»¥ nums[i] ç»“å°¾çš„ nums[0...i] åºåˆ—ä¸­æœ€å¤§å­åºå’Œ
    //  åˆ™æœ€ç»ˆ dp æ•°ç»„ä¸­çš„æœ€å¤§å€¼ä¾¿æ˜¯æ•´ä¸ªæ•°ç»„çš„æœ€å¤§å­åºå’Œ
    int[] dp = new int[len];
    dp[0] = nums[0];
    max = dp[0];
    for (int i = 1; i < len; i++) {
        dp[i] = Math.max(nums[i] + dp[i - 1], nums[i]);
        max = Math.max(max, dp[i]);
    }
    return max;
}
```

##### è´ªå¿ƒæ³•

###### é—®é¢˜è§£æ

1. å¦‚æœ sum å°äº 0ï¼Œè¯´æ˜ä»–å¯¹äºä¸‹ä¸€ä¸ª sum èµ·å‰¯ä½œç”¨ï¼Œæ‰€ä»¥å°† sum é‡ç½®ä¸ºå½“å‰å…ƒç´ ã€‚
2. å¦åˆ™çš„è¯ï¼Œç›´æ¥å°†å½“å‰å…ƒç´ ç´¯åŠ åˆ° sum ä¸Šã€‚

![](https://notebook.ricear.com/media/202105/2021-05-22_194238.png)

###### å‚è€ƒä»£ç 

```java
/**
 * 53. æœ€å¤§å­åºå’Œï¼ˆç‰ˆæœ¬ 3ï¼šè´ªå¿ƒç®—æ³•ï¼‰
 *
 * @param nums æ•°ç»„
 * @return æœ€å¤§å­åºå’Œ
 */
public int maxSubArrayV3(int[] nums) {
    int sum = nums[0], max = nums[0];
    int len = nums.length;
    for (int i = 1; i < len; i++) {
        if (sum < 0) {
        //  å¦‚æœ sum å°äº 0ï¼Œè¯´æ˜ä»–å¯¹äºä¸‹ä¸€ä¸ª sum èµ·å‰¯ä½œç”¨ï¼Œæ‰€ä»¥å°† sum é‡ç½®ä¸ºå½“å‰å…ƒç´ 
            sum = nums[i];
        } else {
            //  å¦åˆ™çš„è¯ï¼Œç›´æ¥å°†å½“å‰å…ƒç´ ç´¯åŠ åˆ° sum ä¸Š
            sum += nums[i];
        }
        max = Math.max(max, sum);
    }
    return max;
}
```

#### æ‰©å±•é¢˜ç›®

##### è¿”å›æœ€å¤§å’Œå¯¹åº”çš„å­æ•°ç»„

###### é—®é¢˜åˆ†æ

1. å¯ä»¥**ä½¿ç”¨ $start$ å’Œ $end$ æ¥è®°å½•æœ€å¤§å’Œå¯¹åº”çš„å­æ•°ç»„åŒºé—´**ï¼Œ**ä½¿ç”¨ $tmp\_start$ å’Œ $tmp\_end$ ä½œä¸ºä»æ•°ç»„å³ä¾§å¾€å·¦ä¾§éå†çš„è¿‡ç¨‹ä¸­å’Œé€’å¢çš„å­æ•°ç»„åŒºé—´**ï¼Œç„¶å**å½“æ›´æ–° $res$ å€¼çš„æ—¶å€™ç”¨ $tmp\_start$ å’Œ $tmp\_end$ æ¥æ›´æ–° $start$ å’Œ**$end$ã€‚

###### å‚è€ƒä»£ç 

```java
/**
 * 53. æœ€å¤§å­åºå’Œï¼ˆè¿”å›æœ€å¤§å’Œå¯¹åº”çš„å­æ•°ç»„ï¼‰
 *
 * @param nums æ•°ç»„
 * @return æœ€å¤§å’Œå¯¹åº”çš„å­æ•°ç»„
 */
public int[] maxSubArray(int[] array) {
    int n = array.length, start = n - 1, end = n - 1, tmp_start = start, tmp_end = end;
    int[] dp = new int[n];
    dp[n - 1] = array[n - 1];
    int max = dp[n - 1];

    /**
     * è·å–æœ€å¤§å’Œå¯¹åº”çš„å­æ•°ç»„åŒºé—´
     */
    for (int i = n - 2; i >= 0; i--) {
        if (array[i] > dp[i + 1] + array[i]) {
            //  dp[i + 1] ä¸ºè´Ÿæ•°ï¼Œè¯´æ˜ i å¯¹åº”çš„å…ƒç´ ä¸ºä¸€ä¸ªæ–°çš„å’Œé€’å¢çš„åŒºé—´ï¼Œå› æ­¤éœ€è¦æ›´æ–° tmp_start å’Œ tmp_end
            tmp_start = i;
            tmp_end = i;
            dp[i] = array[i];
        } else {
            //  dp[i + 1] ä¸ºæ•´æ•°ï¼Œè¯´æ˜ i å¯¹åº”çš„å…ƒç´ å’Œåé¢çš„å…ƒç´ ä¾ç„¶æ˜¯åŒä¸€ä¸ªå’Œé€’å¢çš„åŒºé—´ï¼Œå› æ­¤åªéœ€è¦æ›´æ–° tmp_start å³å¯
            tmp_start = i;
            dp[i] = dp[i + 1] + array[i];
        }
        if (max <= dp[i]) {
            //  å½“å‰é€’å¢åŒºé—´çš„å’Œå¤§äºå†å²é€’å¢åŒºé—´çš„å’Œï¼Œå› æ­¤éœ€è¦ç”¨ tmp_start å’Œ tmp_end æ¥æ›´æ–° start å’Œ end
            start = tmp_start;
            end = tmp_end;
            max = dp[i];
        }
    }

    /**
     * è·å–ç»“æœæ•°ç»„
     */
    int len = end - start + 1;
    int[] res = new int[len];
    for (int i = 0; i < len; i++) {
        res[i] = array[start + i];
    }

    return res;
}
```

### æ‰“å®¶åŠ«èˆ

> é¢˜ç›®æ¥æºï¼š[198. æ‰“å®¶åŠ«èˆ](https://leetcode-cn.com/problems/house-robber)ã€‚

#### è§£é¢˜æ€è·¯

##### åŠ¨æ€è§„åˆ’

###### é—®é¢˜åˆ†æ

1. è¯¥é¢˜ç›®ä¸­ $dp$ æ•°ç»„çš„å«ä¹‰ä¸º $dp[i]$ è¡¨ç¤ºä»¥ä»ç¬¬ $i$ å®¶å¼€å§‹å·çªƒï¼Œåœ¨ä¸è§¦åŠ¨è­¦æŠ¥è£…ç½®çš„æƒ…å†µä¸‹ï¼Œä¸€å¤œä¹‹å†…èƒ½å¤Ÿå·çªƒå¾—åˆ°çš„æœ€é«˜é‡‘é¢ï¼Œä¸”ï¼š

   $$
   dp[i] = max(dp[i + 1], dp[i + 2] + nums[i])
   $$

###### å‚è€ƒä»£ç 

```java
public int rob(int[] nums) {
    int m = nums.length;
    int[] dp = new int[m];

    //  base case
    if (m >= 1) {dp[m - 1] = nums[m - 1];}
    if (m >= 2) {dp[m - 2] = Math.max(nums[m - 1], nums[m - 2]);}
    for (int i = m - 3; i >= 0; i--) {
        dp[i] = Math.max(dp[i + 1], dp[i + 2] + nums[i]);
    }

    return dp[0];
}
```

### ä¹˜ç§¯æœ€å¤§å­æ•°ç»„

> é¢˜ç›®æ¥æºï¼š[152. ä¹˜ç§¯æœ€å¤§å­æ•°ç»„](https://leetcode-cn.com/problems/maximum-product-subarray)ã€‚

#### è§£é¢˜æ€è·¯

##### åŠ¨æ€è§„åˆ’

###### é—®é¢˜åˆ†æ

1. å¯¹äºè¿™ç§**å«æœ‰ä¸å®šçŠ¶æ€çš„æœ€å€¼é—®é¢˜**ï¼Œä¸€èˆ¬å¯ä»¥é€šè¿‡**è®¾ç½®å¤šä¸ª $dp$ æ•°ç»„æ¥æ±‚è§£**ï¼Œ**åˆ†åˆ«ç”¨ä¸åŒçš„ $dp$ æ•°ç»„æ¥è¡¨ç¤ºä¸åŒçš„çŠ¶æ€**ã€‚
2. åœ¨æœ¬é¢˜ä¸­ï¼Œå‡å¦‚æˆ‘ä»¬ç›´æ¥**ä½¿ç”¨ä¸€ä¸ª $dp$ æ•°ç»„**ï¼Œå…¶ä¸­ $dp[i]$**è¡¨ç¤ºä»¥ç¬¬ $i$ ä¸ªå…ƒç´ ç»“å°¾çš„æœ€å¤§è¿ç»­å­æ•°ç»„çš„ä¹˜ç§¯**ï¼Œæ­¤æ—¶**å½“å‰ä½ç½®çš„æœ€ä¼˜è§£æœªå¿…æ˜¯ç”±å‰ä¸€ä¸ªä½ç½®çš„æœ€ä¼˜è§£è½¬ç§»å¾—åˆ°**ã€‚
3. å› æ­¤ï¼Œæˆ‘ä»¬å¯ä»¥**æ ¹æ®æ­£è´Ÿæ€§è¿›è¡Œè®¨è®º**ï¼š

   1. å¦‚æœ**å½“å‰ä½ç½®æ˜¯ä¸€ä¸ªè´Ÿæ•°**çš„è¯ï¼Œé‚£ä¹ˆ**æˆ‘ä»¬å¸Œæœ›ä»¥ä»–å‰ä¸€ä¸ªä½ç½®ç»“å°¾çš„æŸä¸ªæ®µçš„ç§¯ä¹Ÿæ˜¯ä¸ªè´Ÿæ•°**ï¼Œ**è¿™æ ·å°±å¯ä»¥è´Ÿè´Ÿå¾—æ­£**ï¼Œ**å¹¶ä¸”æˆ‘ä»¬å¸Œæœ›è¿™ä¸ªç§¯å°½å¯èƒ½è´Ÿå¾—å¤š**ï¼Œå³**å°½å¯èƒ½å°**ã€‚
   2. å¦‚æœ**å½“å‰ä½ç½®æ˜¯ä¸€ä¸ªæ­£æ•°çš„è¯**ï¼Œé‚£ä¹ˆ**æˆ‘ä»¬å¸Œæœ›ä»¥ä»–å‰ä¸€ä¸ªä½ç½®ç»“å°¾çš„æŸä¸ªæ®µçš„ç§¯ä¹Ÿæ˜¯ä¸ªæ­£æ•°**ï¼Œ**å¹¶ä¸”æˆ‘ä»¬å¸Œæœ›è¿™ä¸ªç§¯å°½å¯èƒ½å¤§**ã€‚
4. å› æ­¤æˆ‘ä»¬éœ€è¦**ç»´æŠ¤ä¸¤ä¸ª $dp$ æ•°ç»„**ï¼Œ**åˆ†åˆ«æ˜¯ $dp_{max}$ å’Œ**$dp_{min}$ï¼š

   1. $dp_{max}$ è¡¨ç¤º**ä»¥ç¬¬ $i$ ä¸ªå…ƒç´ ç»“å°¾çš„æœ€å¤§è¿ç»­å­æ•°ç»„çš„ä¹˜ç§¯**ï¼Œä¸”ï¼š

      $$
      dp_{max} = max(dp_{max}[i - 1] \times nums[i], dp_{min}[i - 1] \times nums[i], nums[i])
      $$
   2. $dp_{min}$ è¡¨ç¤º**ä»¥ç¬¬ $i$ ä¸ªå…ƒç´ ç»“å°¾çš„æœ€å°è¿ç»­å­æ•°ç»„çš„ä¹˜ç§¯**ï¼Œä¸”ï¼š

      $$
      dp_{min} = min(dp_{max}[i - 1] \times nums[i], dp_{min}[i - 1] \times nums[i], nums[i])
      $$

###### å‚è€ƒä»£ç 

```java
/**
 * 152. ä¹˜ç§¯æœ€å¤§å­æ•°ç»„ï¼ˆç‰ˆæœ¬ 1ï¼šåŠ¨æ€è§„åˆ’ï¼ˆä¼˜åŒ–å‰ï¼‰ï¼‰
 *
 * @param nums æ•°ç»„
 * @return æ•°ç»„ä¸­ä¹˜ç§¯æœ€å¤§çš„è¿ç»­å­æ•°ç»„çš„ä¹˜ç§¯
 */
public int maxProductV1(int[] nums) {
    int m = nums.length;
    //  dp æ•°ç»„ï¼ŒdpMax[i] è¡¨ç¤ºä»¥ç¬¬ i ä¸ªå…ƒç´ ç»“å°¾çš„æœ€å¤§è¿ç»­å­æ•°ç»„çš„ä¹˜ç§¯
    int[] dpMax = new int[m];
    //  dp æ•°ç»„ï¼ŒdpMin[i] è¡¨ç¤ºä»¥ç¬¬ i ä¸ªå…ƒç´ ç»“å°¾çš„æœ€å°è¿ç»­å­æ•°ç»„çš„ä¹˜ç§¯
    int[] dpMin = new int[m];
    int res;

    dpMax[0] = nums[0];
    dpMin[0] = nums[0];
    res = dpMax[0];
    for (int i = 1; i < m; i++) {
        int item = nums[i];

        //  dpMax[i] = max(dpMax[i - 1] * nums[i], dpMin[i - 1] * nums[i], nums[i])
        dpMax[i] = Math.max(
                dpMax[i - 1] * item,
                Math.max(
                        dpMin[i - 1] * item,
                        item
                )
        );

        //  dpMin[i] = min(dpMax[i - 1] * nums[i], dpMin[i - 1] * nums[i], nums[i])
        dpMin[i] = Math.min(
                dpMax[i - 1] * item,
                Math.min(
                        dpMin[i - 1] * item,
                        item
                )
        );

        //  å» dpMax ä¸­çš„æœ€å¤§å€¼
        res = Math.max(res, dpMax[i]);
    }

    //  è¿”å›æœ€åç»“æœ
    return res;
}
```

ç”±äº**ç¬¬ $i$ ä¸ªçŠ¶æ€åªå’Œç¬¬ $i - 1$ ä¸ªçŠ¶æ€ç›¸å…³**ï¼Œæ ¹æ®**æ»šåŠ¨æ•°ç»„**æ€æƒ³ï¼Œæˆ‘ä»¬å¯ä»¥**åªç”¨ä¸¤ä¸ªå˜é‡æ¥ç»´æŠ¤ $i - 1$ æ—¶åˆ»çš„çŠ¶æ€**ï¼Œ**ä¸€ä¸ªç»´æŠ¤ $dpMax$**ï¼Œ**ä¸€ä¸ªç»´æŠ¤ $dpMin$**ã€‚

```java
/**
 * 152. ä¹˜ç§¯æœ€å¤§å­æ•°ç»„ï¼ˆç‰ˆæœ¬ 2ï¼šåŠ¨æ€è§„åˆ’ï¼ˆä¼˜åŒ–åï¼‰ï¼‰
 *
 * @param nums æ•°ç»„
 * @return æ•°ç»„ä¸­ä¹˜ç§¯æœ€å¤§çš„è¿ç»­å­æ•°ç»„çš„ä¹˜ç§¯
 */
public int maxProductV2(int[] nums) {
    int m = nums.length;
    //  dpMax è¡¨ç¤ºä»¥ç¬¬ i ä¸ªå…ƒç´ ç»“å°¾çš„æœ€å¤§è¿ç»­å­æ•°ç»„çš„ä¹˜ç§¯
    int dpMax = nums[0];
    //  dpMin è¡¨ç¤ºä»¥ç¬¬ i ä¸ªå…ƒç´ ç»“å°¾çš„æœ€å°è¿ç»­å­æ•°ç»„çš„ä¹˜ç§¯
    int dpMin = nums[0];
    int res;

    res = dpMax;
    for (int i = 1; i < m; i++) {
        int item = nums[i];
        int dpMaxTemp = dpMax, dpMinYemp = dpMin;

        //  dpMax = max(dpMaxTemp * nums[i], dpMinYemp * nums[i], nums[i])
        dpMax = Math.max(
                dpMaxTemp * item,
                Math.max(
                        dpMinYemp * item,
                        item
                )
        );

        //  dpMin = min(dpMaxTemp * nums[i], dpMinYemp * nums[i], nums[i])
        dpMin = Math.min(
                dpMaxTemp * item,
                Math.min(
                        dpMinYemp * item,
                        item
                )
        );

        //  å» dpMax ä¸­çš„æœ€å¤§å€¼
        res = Math.max(res, dpMax);
    }

    //  è¿”å›æœ€åç»“æœ
    return res;
}
```

### ä¸‰è§’å½¢æœ€å°è·¯å¾„å’Œ

> é¢˜ç›®æ¥æºï¼š[120. ä¸‰è§’å½¢æœ€å°è·¯å¾„å’Œ](https://leetcode-cn.com/problems/triangle)ã€‚

#### è§£é¢˜æ€è·¯

##### åŠ¨æ€è§„åˆ’

###### é—®é¢˜åˆ†æ

1. è¯¥é¢˜ç›®ä¸­ $dp$ æ•°ç»„çš„å«ä¹‰ä¸º $dp[i][j]$**è¡¨ç¤ºä»é¡¶ç‚¹åˆ° $triangle.get(i).get(j)$ çš„æœ€å°è·¯å¾„å’Œ**ï¼Œä¸”ï¼š

   $$
   dp[i][j] = Math.min(dp[i - 1][j], dp[i - 1][j - 1]) + triangle.get(i).get(j)
   $$

###### å‚è€ƒä»£ç 

```java
/**
 * 120. ä¸‰è§’å½¢æœ€å°è·¯å¾„å’Œ
 *
 * @param triangle ä¸‰è§’å½¢é¡¶ç‚¹åˆ—è¡¨
 * @return ä¸‰è§’å½¢è‡ªé¡¶å‘ä¸‹çš„æœ€å°è·¯å¾„å’Œ
 */
public int minimumTotal(List<List<Integer>> triangle) {
    int m = triangle.size();
    int n = triangle.get(m - 1).size();
    //  dp æ•°ç»„ï¼Œå…¶ä¸­ dp[i][j] è¡¨ç¤ºä»é¡¶ç‚¹åˆ° triangle.get(i).get(j) çš„æœ€å°è·¯å¾„å’Œ
    int[][] dp = new int[m][n];
    int res = Integer.MAX_VALUE;

    for (int i = 0; i < m; i++) {
        for (int j = 0; j < triangle.get(i).size(); j++) {
            int item = triangle.get(i).get(j);

            //  è½¬ç§»å…³ç³»ä¸ºï¼šdp[i][j] = Math.min(dp[i - 1][j], dp[i - 1][j - 1]) + triangle.get(i).get(j)
            //  éœ€è¦ç¡®ä¿æ•°ç»„ä¸‹æ ‡ä¸è¦è¶Šç•Œï¼Œå³ï¼ši - 1 >= 0 && j - 1 >= 0 && j < triangle.get(i - 1).size()
            if (i - 1 >= 0) {
                if (j - 1 >= 0) {
                    if (j < triangle.get(i - 1).size()) {
                        dp[i][j] = Math.min(dp[i - 1][j], dp[i - 1][j - 1]) + item;
                    } else {
                        dp[i][j] = dp[i - 1][j - 1] + item;
                    }
                } else {
                    dp[i][j] = dp[i - 1][j] + item;
                }
            } else {
                dp[i][j] = item;
            }
        }
    }

    //  ä¸‰è§’å½¢æœ€åä¸€è¡Œä¸­çš„æœ€å°è·¯å¾„å’Œå³ä¸ºæ•´ä¸ªä¸‰è§’å½¢è‡ªé¡¶å‘ä¸‹çš„æœ€å°è·¯å¾„å’Œ
    for (int i = 0; i < triangle.get(m - 1).size(); i++) {
        res = Math.min(res, dp[m - 1][i]);
    }

    return res;
}
```

### è§£ç æ–¹æ³•

> é¢˜ç›®æ¥æºï¼š[91. è§£ç æ–¹æ³•](https://leetcode-cn.com/problems/decode-ways)ã€‚

#### è§£é¢˜æ€è·¯

##### åŠ¨æ€è§„åˆ’

###### é—®é¢˜åˆ†æ

1. åŠ¨æ€è§„åˆ’ä¸­ï¼š

   1. å¯¹äº**ä¸€ç»´ $dp$ æ•°ç»„**ä¸€èˆ¬**æœ‰ä¸¤ç§æ€è·¯**ï¼Œ**ä¸€ç§æ˜¯ä»¥ $nums[i]$ å¼€å¤´**ï¼Œ**å¦ä¸€ç§æ˜¯ä»¥ $nums[i]$ ç»“å°¾**ï¼Œæˆ‘ä»¬åœ¨å®šä¹‰ $dp$ æ•°ç»„æ—¶å¯ä»¥**ä»è¿™ä¸¤ä¸ªæ–¹é¢å»è€ƒè™‘**å³å¯ã€‚
   2. å¯¹äº**äºŒç»´ $dp$ æ•°ç»„**ä¸€èˆ¬**å¯ä»¥ä»ä¸­é—´è¿›è¡Œæˆªå–**ï¼Œä¾‹å¦‚[1.1.7 æœ€é•¿å›æ–‡å­åºåˆ—](https://ricear.com/project-21/doc-273)ä¸­ $dp$ æ•°ç»„çš„å®šä¹‰ä¸º $dp[i][j]$ è¡¨ç¤º $s[i...j]$ ä¸­åŒ…å«çš„æœ€é•¿å›æ–‡å­åºåˆ—çš„é•¿åº¦ã€‚
2. è¯¥é¢˜ç›®ä¸­ $dp$ æ•°ç»„çš„å«ä¹‰ä¸º $dp[i]$ è¡¨ç¤ºä»¥ $s.charAt(i)$ å¼€å¤´çš„å­—ç¬¦ä¸²çš„è§£ç æ–¹æ³•çš„æ€»æ•°ï¼Œä¸”ï¼š

   $$
   dp[i] = dp[i + 1] + dp[i + 2]
   $$

###### å‚è€ƒä»£ç 

```java
/**
 * 91. è§£ç æ–¹æ³•
 *
 * @param s æ¶ˆæ¯å­—ç¬¦ä¸²
 * @return æ¶ˆæ¯å­—ç¬¦ä¸²è§£ç æ–¹æ³•çš„æ€»æ•°
 */
public int numDecodings(String s) {
    int m = s.length();
    //  dp æ•°ç»„ï¼Œå…¶ä¸­ dp[i] è¡¨ç¤ºä»¥ s.charAt(i) å¼€å¤´çš„æ¶ˆæ¯å­—ç¬¦ä¸²è§£ç æ–¹æ³•çš„æ€»æ•°
    int[] dp = new int[m];

    for (int i = m - 1; i >= 0; i--) {
        //  å¦‚æœå½“å‰å­—ç¬¦ä¸º 0ï¼Œé‚£ä¹ˆä»¥è¯¥å­—ç¬¦å¼€å¤´çš„å­—ç¬¦ä¸²çš„è§£ç æ–¹æ³•æ€»æ•°ä¸º 0
        if (s.charAt(i) == '0') {dp[i] = 0;}
        //  å¦‚æœå½“å‰å­—ç¬¦ä¸ä¸º 0ï¼Œå¹¶ä¸”å½“å‰å­—ç¬¦ä½äºæœ€åä¸€ä¸ªä½ç½®ï¼Œé‚£ä¹ˆä»¥è¯¥å­—ç¬¦å¼€å¤´çš„å­—ç¬¦ä¸²çš„è§£ç æ–¹æ³•æ€»æ•°ä¸º 1
        else if (i == m - 1) {dp[i] = 1;}
        //  å½“å‰å­—ç¬¦ä¸ä¸º 0ï¼Œå¹¶ä¸”å½“å‰å­—ç¬¦ä½äºå€’æ•°ç¬¬äºŒä¸ªä½ç½®
        else if (i == m - 2) {
            //  å¦‚æœå½“å‰å­—ç¬¦åŠå…¶åä¸¤ä½æ‰€ç»„æˆçš„æ•°å­—å¤§äº 26ï¼Œåˆ™å½“å‰å­—ç¬¦åŠå…¶åä¸¤ä½å­—ç¬¦ç»„æˆçš„å­—ç¬¦ä¸²ä¸èƒ½è¢«è§£ç ï¼Œ
            //  ä»¥è¯¥å­—ç¬¦å¼€å¤´çš„å­—ç¬¦ä¸²çš„è§£ç æ–¹æ³•æ€»æ•°ç­‰äºä»¥ä¸‹ä¸€ä¸ªå­—ç¬¦å¼€å¤´çš„å­—ç¬¦ä¸²çš„è§£ç æ–¹æ³•æ€»æ•°
            if (Integer.parseInt(s.substring(i, i + 2)) > 26) {dp[i] = dp[i + 1];}
            //  å¦‚æœå½“å‰å­—ç¬¦åŠå…¶åä¸¤ä½æ‰€ç»„æˆçš„æ•°å­—ä¸å¤§äº 26ï¼Œåˆ™å½“å‰å­—ç¬¦åŠå…¶åä¸¤ä½å­—ç¬¦ç»„æˆçš„å­—ç¬¦ä¸²å¯ä»¥è¢«è§£ç ï¼Œ
            //  ä»¥è¯¥å­—ç¬¦å¼€å¤´çš„å­—ç¬¦ä¸²çš„è§£ç æ–¹æ³•æ€»æ•°ç­‰äºä»¥ä¸‹ä¸€ä¸ªå­—ç¬¦å¼€å¤´çš„å­—ç¬¦ä¸²çš„è§£ç æ–¹æ³•æ€»æ•°åŠ  1
            else {dp[i] = dp[i + 1] + 1;}
        }
        //  å½“å‰å­—ç¬¦ä¸ä¸º 0ï¼Œå¹¶ä¸”å½“å‰å­—ç¬¦ä¸ä½äºå€’æ•°ç¬¬äºŒä¸ªä½ç½®
        //  å¦‚æœå½“å‰å­—ç¬¦åŠå…¶åä¸¤ä½æ‰€ç»„æˆçš„æ•°å­—å¤§äº 26ï¼Œåˆ™å½“å‰å­—ç¬¦åŠå…¶åä¸¤ä½å­—ç¬¦ç»„æˆçš„å­—ç¬¦ä¸²ä¸èƒ½è¢«è§£ç ï¼Œ
        //  ä»¥è¯¥å­—ç¬¦å¼€å¤´çš„å­—ç¬¦ä¸²çš„è§£ç æ–¹æ³•æ€»æ•°ç­‰äºä»¥ä¸‹ä¸€ä¸ªå­—ç¬¦å¼€å¤´çš„å­—ç¬¦ä¸²çš„è§£ç æ–¹æ³•æ€»æ•°
        else if (Integer.parseInt(s.substring(i, i + 2)) > 26) {dp[i] = dp[i + 1];}
        //  å¦‚æœå½“å‰å­—ç¬¦åŠå…¶åä¸¤ä½æ‰€ç»„æˆçš„æ•°å­—ä¸å¤§äº 26ï¼Œåˆ™å½“å‰å­—ç¬¦åŠå…¶åä¸¤ä½å­—ç¬¦ç»„æˆçš„å­—ç¬¦ä¸²å¯ä»¥è¢«è§£ç ï¼Œ
        //  ä»¥è¯¥å­—ç¬¦å¼€å¤´çš„å­—ç¬¦ä¸²çš„è§£ç æ–¹æ³•æ€»æ•°ç­‰äºä»¥ä¸‹ä¸€ä¸ªå­—ç¬¦å¼€å¤´çš„å­—ç¬¦ä¸²çš„è§£ç æ–¹æ³•æ€»æ•°åŠä»¥ä¸‹é¢ç¬¬äºŒä¸ªå­—ç¬¦å¼€å¤´çš„å­—ç¬¦ä¸²çš„è§£ç æ–¹æ³•æ€»æ•°
        else {dp[i] = dp[i + 1] + dp[i + 2];}
    }

    //  è¿”å›æœ€åçš„ç»“æœ
    return dp[0];
}
```

#### æ‰©å±•é¢˜ç›®

##### æŠŠæ•°å­—ç¿»è¯‘æˆå­—ç¬¦ä¸²

> é¢˜ç›®æ¥æºï¼š[å‰‘æŒ‡ Offer 46. æŠŠæ•°å­—ç¿»è¯‘æˆå­—ç¬¦ä¸²](https://leetcode.cn/problems/ba-shu-zi-fan-yi-cheng-zi-fu-chuan-lcof)ã€‚

###### é—®é¢˜åˆ†æ

1. å‚è§[è§£ç æ–¹æ³•](#2-5-1-1-1-é—®é¢˜åˆ†æ)ã€‚

###### å‚è€ƒä»£ç 

```java
/**
 * å‰‘æŒ‡ Offer 46. æŠŠæ•°å­—ç¿»è¯‘æˆå­—ç¬¦ä¸²
 * @param num   å¾…ç¿»è¯‘çš„æ•°å­—
 * @return  æ•°å­—ç¿»è¯‘åçš„å­—ç¬¦ä¸²
 */
public int translateNum(int num) {
    String s = String.valueOf(num);
    int m = s.length();
    //  dp æ•°ç»„ï¼Œå…¶ä¸­ dp[i] è¡¨ç¤ºä»¥ s.charAt(i) å¼€å¤´çš„æ¶ˆæ¯å­—ç¬¦ä¸²è§£ç æ–¹æ³•çš„æ€»æ•°
    int[] dp = new int[m];

    for (int i = m - 1; i >= 0; i--) {
        //  å¦‚æœå½“å‰å­—ç¬¦ä½äºæœ€åä¸€ä¸ªä½ç½®ï¼Œé‚£ä¹ˆä»¥è¯¥å­—ç¬¦å¼€å¤´çš„å­—ç¬¦ä¸²çš„è§£ç æ–¹æ³•æ€»æ•°ä¸º 1
        if (i == m - 1) {dp[i] = 1;}
        //  å½“å‰å­—ç¬¦ä½äºå€’æ•°ç¬¬äºŒä¸ªä½ç½®
        else if (i == m - 2) {
            //  å¦‚æœå½“å‰å­—ç¬¦åŠå…¶åä¸¤ä½æ‰€ç»„æˆçš„æ•°å­—å¤§äº 25 æˆ–å½“å‰å­—ç¬¦ä¸º 0ï¼Œåˆ™å½“å‰å­—ç¬¦åŠå…¶åä¸¤ä½å­—ç¬¦ç»„æˆçš„å­—ç¬¦ä¸²ä¸èƒ½è¢«è§£ç ï¼Œ
            //  ä»¥è¯¥å­—ç¬¦å¼€å¤´çš„å­—ç¬¦ä¸²çš„è§£ç æ–¹æ³•æ€»æ•°ç­‰äºä»¥ä¸‹ä¸€ä¸ªå­—ç¬¦å¼€å¤´çš„å­—ç¬¦ä¸²çš„è§£ç æ–¹æ³•æ€»æ•°
            if (Integer.parseInt(s.substring(i, i + 2)) > 25 || s.charAt(i) == '0') {dp[i] = dp[i + 1];}
            //  å¦‚æœå½“å‰å­—ç¬¦åŠå…¶åä¸¤ä½æ‰€ç»„æˆçš„æ•°å­—ä¸å¤§äº 26ï¼Œåˆ™å½“å‰å­—ç¬¦åŠå…¶åä¸¤ä½å­—ç¬¦ç»„æˆçš„å­—ç¬¦ä¸²å¯ä»¥è¢«è§£ç ï¼Œ
            //  ä»¥è¯¥å­—ç¬¦å¼€å¤´çš„å­—ç¬¦ä¸²çš„è§£ç æ–¹æ³•æ€»æ•°ç­‰äºä»¥ä¸‹ä¸€ä¸ªå­—ç¬¦å¼€å¤´çš„å­—ç¬¦ä¸²çš„è§£ç æ–¹æ³•æ€»æ•°åŠ  1
            else {dp[i] = dp[i + 1] + 1;}
        }
        //  å½“å‰å­—ç¬¦ä¸ä½äºå€’æ•°ç¬¬äºŒä¸ªä½ç½®
        //  å¦‚æœå½“å‰å­—ç¬¦åŠå…¶åä¸¤ä½æ‰€ç»„æˆçš„æ•°å­—å¤§äº 25 æˆ–å½“å‰å­—ç¬¦ä¸º 0ï¼Œåˆ™å½“å‰å­—ç¬¦åŠå…¶åä¸¤ä½å­—ç¬¦ç»„æˆçš„å­—ç¬¦ä¸²ä¸èƒ½è¢«è§£ç ï¼Œ
        //  ä»¥è¯¥å­—ç¬¦å¼€å¤´çš„å­—ç¬¦ä¸²çš„è§£ç æ–¹æ³•æ€»æ•°ç­‰äºä»¥ä¸‹ä¸€ä¸ªå­—ç¬¦å¼€å¤´çš„å­—ç¬¦ä¸²çš„è§£ç æ–¹æ³•æ€»æ•°
        else if (Integer.parseInt(s.substring(i, i + 2)) > 25 || s.charAt(i) == '0') {dp[i] = dp[i + 1];}
        //  å¦‚æœå½“å‰å­—ç¬¦åŠå…¶åä¸¤ä½æ‰€ç»„æˆçš„æ•°å­—ä¸å¤§äº 25ï¼Œåˆ™å½“å‰å­—ç¬¦åŠå…¶åä¸¤ä½å­—ç¬¦ç»„æˆçš„å­—ç¬¦ä¸²å¯ä»¥è¢«è§£ç ï¼Œ
        //  ä»¥è¯¥å­—ç¬¦å¼€å¤´çš„å­—ç¬¦ä¸²çš„è§£ç æ–¹æ³•æ€»æ•°ç­‰äºä»¥ä¸‹ä¸€ä¸ªå­—ç¬¦å¼€å¤´çš„å­—ç¬¦ä¸²çš„è§£ç æ–¹æ³•æ€»æ•°åŠä»¥ä¸‹é¢ç¬¬äºŒä¸ªå­—ç¬¦å¼€å¤´çš„å­—ç¬¦ä¸²çš„è§£ç æ–¹æ³•æ€»æ•°
        else {dp[i] = dp[i + 1] + dp[i + 2];}
    }

    //  è¿”å›æœ€åçš„ç»“æœ
    return dp[0];
}
```

### æ‰“å®¶åŠ«èˆ II

> é¢˜ç›®æ¥æºï¼š[213. æ‰“å®¶åŠ«èˆ II](https://leetcode-cn.com/problems/house-robber-ii)ã€‚

#### è§£é¢˜æ€è·¯

##### åŠ¨æ€è§„åˆ’

###### é—®é¢˜åˆ†æ

1. å¯¹äºè¿™ç§**åœ†ç¯å‹**çš„é—®é¢˜ï¼Œæˆ‘ä»¬å¯ä»¥**æŠŠä»–æ‹†åˆ†æˆä¸¤éƒ¨åˆ†**ï¼Œå¹¶å¯¹å…¶**åˆ†åˆ«å»æ±‚ç»“æœ**ï¼Œç„¶åå†**å°†ä¸¤éƒ¨åˆ†çš„ç»“æœå–æœ€å€¼**å³å¯ã€‚
2. è¯¥é¢˜ç›®ä¸­ $dp$ æ•°ç»„çš„å«ä¹‰ä¸º $dp[i]$ è¡¨ç¤ºç¬¬ $i$ æˆ·åŠä¹‹åæ‰€èƒ½å·åˆ°çš„æœ€å¤§é‡‘é¢ï¼Œä¸”ï¼š

   $$
   dp[i] = max(dp[i + 1], dp[i + 2] + nums[i]);
   $$

###### å‚è€ƒä»£ç 

```java
/**
 * 213. æ‰“å®¶åŠ«èˆ II
 * @param nums  æ¯ä¸ªæˆ¿å±‹å­˜æ”¾é‡‘é¢çš„éè´Ÿæ•´æ•°æ•°ç»„
 * @return  åœ¨ä¸è§¦åŠ¨è­¦æŠ¥è£…ç½®çš„æƒ…å†µä¸‹ ï¼Œä»Šæ™šèƒ½å¤Ÿå·çªƒåˆ°çš„æœ€é«˜é‡‘é¢
 */
public int rob(int[] nums) {
    int m = nums.length;
    //  å°†æ•´ä¸ªæ•°ç»„æ‹†åˆ†æˆä¸¤éƒ¨åˆ†ï¼Œåˆ†åˆ«ä¸º nums[0, nums.length - 2] å’Œ nums[1, nums.length - 1]ï¼Œç„¶åå¯¹è¿™ä¸¤éƒ¨åˆ†åˆ†åˆ«æ±‚èƒ½å¤Ÿå·çªƒåˆ°çš„æœ€å¤§é‡‘é¢ï¼Œå¹¶å–äºŒè€…çš„æœ€å¤§å€¼å³å¯
    return m > 1 ? Math.max(subRob(nums, 0, m - 1), subRob(nums, 1, m)) : nums[0];
}

/**
 * åœ¨ä¸è§¦åŠ¨è­¦æŠ¥è£…ç½®çš„æƒ…å†µä¸‹ ï¼Œä»Šæ™šèƒ½å¤Ÿå·çªƒåˆ°çš„æœ€é«˜é‡‘é¢
 * @param nums  æ¯ä¸ªæˆ¿å±‹å­˜æ”¾é‡‘é¢çš„éè´Ÿæ•´æ•°æ•°ç»„
 * @param start èµ·å§‹ä½ç½®
 * @param end   ç»“æŸä½ç½®
 * @return  åœ¨ä¸è§¦åŠ¨è­¦æŠ¥è£…ç½®çš„æƒ…å†µä¸‹ ï¼Œä»Šæ™šèƒ½å¤Ÿå·çªƒåˆ°çš„æœ€é«˜é‡‘é¢
 */
public int subRob(int[] nums, int start, int end) {
    int m = nums.length;
    //  dp æ•°ç»„ï¼Œå…¶ä¸­ dp[i] è¡¨ç¤ºä»ç¬¬ i æˆ·åŠåé¢ä½æˆ·ä¸­æ‰€èƒ½å·çªƒåˆ°çš„æœ€é«˜é‡‘é¢
    int[] dp = new int[m];

    //   base case
    if (end >= 1) {
        dp[end - 1] = nums[end - 1];
    }
    if (end >= 2) {
        if (nums[end - 2] >= nums[end - 1]) {
            dp[end - 2] = nums[end - 2];
        } else {
            dp[end - 2] = nums[end - 1];
        }
    }

    for (int i = end - 3; i >= start; i--) {
        //  ç¬¬ i æˆ·åŠä¹‹åæ‰€èƒ½å·åˆ°çš„æœ€å¤§é‡‘é¢ ç­‰äº ç¬¬ i æˆ·åŠä¹‹åæ‰€èƒ½å·åˆ°çš„æœ€å¤§é‡‘é¢ ä¸ ç¬¬ i + 2 æˆ·æ‰€èƒ½å·åˆ°çš„æœ€å¤§é‡‘é¢å’Œç¬¬ i æˆ·é‡‘é¢ä¹‹å’Œ çš„æœ€å¤§å€¼
        dp[i] = Math.max(dp[i + 1], dp[i + 2] + nums[i]);
    }

    return dp[start];
}
```

### æœ€é•¿é‡å¤å­æ•°ç»„

> é¢˜ç›®æ¥æºï¼š[718. æœ€é•¿é‡å¤å­æ•°ç»„](https://leetcode-cn.com/problems/maximum-length-of-repeated-subarray)ã€‚

> ç±»ä¼¼çš„é¢˜ç›®è¿˜æœ‰ï¼š
>
> 1. [NC127 æœ€é•¿å…¬å…±å­ä¸²](https://www.nowcoder.com/practice/f33f5adc55f444baa0e0ca87ad8a6aac)ã€‚

> å¦‚æœéœ€è¦è¿”å›æœ€é•¿é‡å¤å­æ•°ç»„çš„å…ƒç´ ï¼Œåˆ™å°½é‡é‡‡ç”¨ **æ»‘åŠ¨çª—å£** çš„æ–¹æ³•ã€‚

##### åŠ¨æ€è§„åˆ’

###### é—®é¢˜åˆ†æ

1. å¯¹äºæ±‚**æœ€å€¼**çš„é¢˜ç›®ï¼Œéƒ½å¯ä»¥æ€è€ƒä¸€ä¸‹çœ‹æ˜¯å¦å¯ä»¥ç”¨**åŠ¨æ€è§„åˆ’**æ¥æ±‚è§£ï¼Œè€Œ**åŠ¨æ€è§„åˆ’çš„æ ¸å¿ƒå°±æ˜¯å®šä¹‰ $dp$ æ•°ç»„**ï¼Œ**å¯»æ‰¾çŠ¶æ€è½¬ç§»æ–¹ç¨‹**ã€‚
2. $dp$**æ•°ç»„çš„å®šä¹‰æœ‰ä¸€ç»´å’ŒäºŒç»´æ•°ç»„ä¸¤ç§**ï¼Œè¿™ä¸ª**éœ€è¦æ ¹æ®å…·ä½“çš„é¢˜ç›®æ¥å…·ä½“åˆ†æ**ã€‚
3. æœ¬é¢˜ä¸­ $dp$ æ•°ç»„å¯ä»¥å®šä¹‰ä¸º $dp[i][j]$ï¼Œ**è¡¨ç¤º $nums1[i]$ å’Œ $nums2[j]$ çš„æœ€é•¿å…¬å…±å‰ç¼€çš„é•¿åº¦**ï¼Œè¿™æ · $dp$**æ•°ç»„ä¸­æœ€å¤§çš„å…ƒç´ å³ä¸º $nums1$ å’Œ $nums2$ çš„æœ€é•¿é‡å¤å­æ•°ç»„çš„é•¿åº¦**ã€‚
4. ç„¶ååˆ†åˆ«éå† $nums1$ å’Œ $nums2$ï¼š

   1. **å¦‚æœ $nums1[i] = nums2[j]$**ï¼Œ**åˆ™ $dp[i][j] = dp[i + 1][j + 1] + 1$**ã€‚
   2. **å¦åˆ™**ï¼Œ$dp[i][j] = 0$ã€‚

      > è¯¥é¢˜ç›®ç±»ä¼¼äº[æœ€é•¿å…¬å…±å­åºåˆ—](#1-3-æœ€é•¿å…¬å…±å­åºåˆ—)ï¼Œä¸åŒçš„æ˜¯åœ¨æœ€é•¿å…¬å…±å­åºåˆ—ä¸­å½“ $nums1[i] \ne nums2[j]$ æ—¶ï¼Œ$dp[i][j] = max(dp[i + 1][j], dp[i][j + 1])$ï¼Œè€Œåœ¨æœ€é•¿é‡å¤å­æ•°ç»„ä¸­å½“ $nums1[i] \ne nums2[j]$ æ—¶ï¼Œ$dp[i][j] = 0$ï¼Œè¿™æ˜¯å› ä¸º**åºåˆ—ä¸è¦æ±‚è¿ç»­**ï¼Œè€Œ**æ•°ç»„è¦æ±‚è¿ç»­**ã€‚
      >

   ![](https://notebook.ricear.com/media/202107/2021-07-16_212026.png)

###### å‚è€ƒä»£ç 

```java
/**
 * 718. æœ€é•¿é‡å¤å­æ•°ç»„ï¼ˆç‰ˆæœ¬ 2ï¼šåŠ¨æ€è§„åˆ’ï¼‰
 * @param nums1 æ•°ç»„ 1
 * @param nums2 æ•°ç»„ 2
 * @return  ä¸¤ä¸ªæ•°ç»„ä¸­å…¬å…±çš„ã€é•¿åº¦æœ€é•¿çš„å­æ•°ç»„çš„é•¿åº¦
 */
public int findLengthV2(int[] nums1, int[] nums2) {
    int n1 = nums1.length;
    int n2 = nums2.length;
    int res = 0;
    //  dp æ•°ç»„ï¼Œå…¶ä¸­ dp[i][j] è¡¨ç¤º nums1[i:] å’Œ nums2[j:] çš„æœ€é•¿å…¬å…±å‰ç¼€çš„é•¿åº¦ï¼Œåˆ™ dp æ•°ç»„ä¸­æœ€å¤§çš„å…ƒç´ å³ä¸º nums1 å’Œ nums2 çš„æœ€é•¿é‡å¤å­æ•°ç»„çš„é•¿åº¦
    int[][] dp = new int[n1 + 1][n2 + 1];

    //  åˆ†åˆ«éå† nums1 å’Œ nums2ï¼Œè®¡ç®—æœ€é•¿é‡å¤å­æ•°ç»„çš„é•¿åº¦
    for (int i = n1 - 1; i >= 0; i--) {
        for (int j = n2 - 1; j >=0; j--) {
            //  å¦‚æœ nums1[i] = nums2[j]ï¼Œåˆ™ dp[i][j] = dp[i + 1][j + 1]ï¼Œå¦åˆ™ï¼Œdp[i][j] = 0
            dp[i][j] = (nums1[i] == nums2[j] ? dp[i + 1][j + 1] + 1 : 0);
            res = Math.max(res, dp[i][j]);
        }
    }

    //  è¿”å›ç»“æœ
    return res;
}
```

##### æ»‘åŠ¨çª—å£

###### é—®é¢˜åˆ†æ

1. å¯¹äº**ä¸¤ä¸ªæ•°ç»„çš„éå†**ï¼Œå¯ä»¥**é€šè¿‡æ»‘åŠ¨çª—å£çš„æ–¹æ³•æ¥å‡å°‘éå†çš„æ¬¡æ•°**ï¼Œå› ä¸º**æ¯æ¬¡æ¯”è¾ƒçš„åªæ˜¯æ»‘åŠ¨çª—å£å†…éƒ¨ç›¸åŒåŒºåŸŸçš„å…ƒç´ **ï¼Œ**ç›¸æ¯”äºæš´åŠ›è§£æ³•è€Œè¨€**ï¼Œ**å¯ä»¥æ˜¾è‘—å‡å°‘éå†çš„æ¬¡æ•°**ã€‚
2. æœ¬é¢˜ç›®ä¸­å¯ä»¥å…ˆ**æŠŠ $nums1$ æ”¾åœ¨ä¸Šé¢**ï¼Œ$nums2$**æ”¾åœ¨ä¸‹è¾¹**ï¼Œç„¶å**å°† $nums1$ çš„ç¬¬ä¸€ä¸ªå…ƒç´ å’Œ $nums2$ çš„æœ€åä¸€ä¸ªå…ƒç´ å¯¹é½**ï¼Œç„¶å**å°† $nums2$ ä»åšå¾€å³æ»‘åŠ¨**ï¼Œ**ç›´åˆ° $nums1$ çš„ç¬¬ä¸€ä¸ªå…ƒç´ å’Œ $nums2$ çš„ç¬¬ä¸€ä¸ªå…ƒç´ å¯¹é½**ï¼Œä¸”**æ¯æ»‘åŠ¨ä¸€æ¬¡**ï¼Œ**éƒ½å¯¹ä¸¤ä¸ªæ•°ç»„æ»‘å—å†…éƒ¨ç›¸åŒåŒºåŸŸçš„å…ƒç´ è¿›è¡Œæ¯”è¾ƒ**ã€‚
3. ç„¶å**æŠŠ $nums2$ æ”¾åœ¨ä¸Šé¢**ï¼Œ$nums1$**æ”¾åœ¨ä¸‹é¢**ï¼Œå¹¶ä¸”**æŠŠ $nums2$ çš„ç¬¬ä¸€ä¸ªå…ƒç´ å’Œ $nums1$ çš„ç¬¬ä¸€ä¸ªå…ƒç´ å¯¹é½**ï¼Œç„¶å**æŠŠ $nums1$ ä»å³å¾€å·¦æ»‘åŠ¨**ï¼Œ**ç›´åˆ° $nums2$ çš„ç¬¬ä¸€ä¸ªå…ƒç´ å’Œ $nums1$ çš„æœ€åä¸€ä¸ªå…ƒç´ å¯¹é½**ï¼Œä¸”**æ¯æ»‘åŠ¨ä¸€æ¬¡**ï¼Œ**éƒ½å¯¹ä¸¤ä¸ªæ•°ç»„æ»‘å—å†…éƒ¨ç›¸åŒåŒºåŸŸçš„å…ƒç´ è¿›è¡Œæ¯”è¾ƒ**ã€‚
4. å…¶å®**ç¬¬ä¸‰æ­¥å¯ä»¥åˆåˆ°ç¬¬äºŒæ­¥é‡Œé¢**ï¼Œå³**åœ¨ç¬¬äºŒæ­¥ä¸­ä¸€ç›´æŠŠ $nums2$ æ»‘åŠ¨åˆ°ç¬¬ä¸€ä¸ªå…ƒç´ å’Œ $nums1$ çš„ç¬¬ä¸€ä¸ªå…ƒç´ å¯¹é½**ï¼Œä½†è¿™æ ·**ä¸å¤ªå¥½å®ç°**ï¼Œå› æ­¤**åé¢ä¸€æ­¥æ‹†åˆ†æˆç­‰ä»·çš„ç¬¬å››æ­¥æ¥å®ç°**ã€‚

   ![](https://notebook.ricear.com/media/202107/718-æœ€é•¿é‡å¤å­æ•°ç»„ï¼ˆè§£æ³•ä¸‰ï¼šæ»‘åŠ¨çª—å£ï¼‰_1626441966.gif)

###### å‚è€ƒä»£ç 

```java
/**
 * 718. æœ€é•¿é‡å¤å­æ•°ç»„ï¼ˆç‰ˆæœ¬ 3ï¼šæ»‘åŠ¨çª—å£ï¼‰
 * @param nums1 æ•°ç»„ 1
 * @param nums2 æ•°ç»„ 2
 * @return  ä¸¤ä¸ªæ•°ç»„ä¸­å…¬å…±çš„ã€é•¿åº¦æœ€é•¿çš„å­æ•°ç»„çš„é•¿åº¦
 */
public int findLengthV3(int[] nums1, int[] nums2) {
    int n1 = nums1.length;
    int n2 = nums2.length;
    int res = 0;

    //  nums1 çš„ç¬¬ä¸€ä¸ªå…ƒç´ å’Œ nums2 çš„æœ€åä¸€ä¸ªå…ƒç´ å¯¹é½ï¼Œç„¶åå°† num2 ä»å·¦å¾€å³æ»‘åŠ¨ï¼Œç›´åˆ° nums2 çš„ç¬¬ä¸€ä¸ªå…ƒç´ å’Œ nums1 çš„ç¬¬ä¸€ä¸ªå…ƒç´ å¯¹é½
    for (int i = n2 - 1; i >= 0; i--) {
        int minLen = Math.min(n1, n2 - i);
        int tempRes = 0;
        //  éå† nums1 å’Œ nums2 äº¤å‰çš„éƒ¨åˆ†ï¼Œå¹¶è®¡ç®—è¿™ä¸€éƒ¨åˆ†çš„æœ€é•¿é‡å¤å­æ•°ç»„çš„é•¿åº¦
        for (int j = 0; j < minLen; j++) {
            if (tempRes != 0 && nums1[j] != nums2[i + j]) {
                res = Math.max(res, tempRes);
                tempRes = 0;
            }
            if (nums1[j] == nums2[i + j]) {
                tempRes++;
            }
        }
        res = Math.max(res, tempRes);
    }

    //  nums2 çš„ç¬¬ä¸€ä¸ªå…ƒç´ å’Œ nums1 çš„ç¬¬ä¸€ä¸ªå…ƒç´ å¯¹é½ï¼Œç„¶åå°† num1 ä»å³å¾€å·¦æ»‘åŠ¨ï¼Œç›´åˆ° nums2 çš„ç¬¬ä¸€ä¸ªå…ƒç´ å’Œ nums1 çš„æœ€åä¸€ä¸ªå…ƒç´ å¯¹é½
    for (int i = 0; i < n1; i++) {
        int minLen = Math.min(n1 - i, n2);
        int tempRes = 0;
        //  éå† nums1 å’Œ nums2 äº¤å‰çš„éƒ¨åˆ†ï¼Œå¹¶è®¡ç®—è¿™ä¸€éƒ¨åˆ†çš„æœ€é•¿é‡å¤å­æ•°ç»„çš„é•¿åº¦
        for (int j = 0; j < minLen; j++) {
            if (tempRes != 0 && nums1[i + j] != nums2[j]) {
                res = Math.max(res, tempRes);
                tempRes = 0;
            }
            if (nums1[i + j] == nums2[j]) {
                tempRes++;
            }
        }
        res = Math.max(res, tempRes);
    }

    return res;
}
```

## å‚è€ƒæ–‡çŒ®

1. [åŠ¨æ€è§„åˆ’è®¾è®¡ï¼šæœ€é•¿é€’å¢å­åºåˆ—](https://labuladong.gitbook.io/algo/mu-lu-ye-2/mu-lu-ye-1/dong-tai-gui-hua-she-ji-zui-chang-di-zeng-zi-xu-lie)ã€‚
2. [åŠ¨æ€è§„åˆ’ä¹‹å­åºåˆ—é—®é¢˜è§£é¢˜æ¨¡æ¿](https://labuladong.gitbook.io/algo/dong-tai-gui-hua-xi-lie/zi-xu-lie-lei-xing-wen-ti/zi-xu-lie-wen-ti-mo-ban)ã€‚
3. [æœ€å¤§å­åºå’Œ c++ å®ç°å››ç§è§£æ³• æš´åŠ›æ³•ã€åŠ¨æ€è§„åˆ’ã€è´ªå¿ƒæ³•å’Œåˆ†æ²»æ³• å›¾ç¤ºè®²è§£](https://leetcode-cn.com/problems/maximum-subarray/solution/zui-da-zi-xu-he-cshi-xian-si-chong-jie-fa-bao-li-f)ã€‚
4. [ä¹˜ç§¯æœ€å¤§å­æ•°ç»„](https://leetcode-cn.com/problems/maximum-product-subarray/solution/cheng-ji-zui-da-zi-shu-zu-by-leetcode-solution)ã€‚
5. [æœ€é•¿é‡å¤å­æ•°ç»„](https://leetcode-cn.com/problems/maximum-length-of-repeated-subarray/solution/zui-chang-zhong-fu-zi-shu-zu-by-leetcode-solution)ã€‚
6. [æ»‘åŠ¨çª—å£è§£æ³•](https://leetcode-cn.com/problems/maximum-length-of-repeated-subarray/solution/wu-li-jie-fa-by-stg-2)ã€‚
7. [é¢˜è§£ | #æœ€é•¿é€’å¢å­åºåˆ—#](https://www.nowcoder.com/practice/9cf027bf54714ad889d4f30ff0ae5481?tpId=117&tqId=37796&rp=1&ru=/exam/oj&qru=/exam/oj&sourceUrl=%2Fexam%2Foj%3Fpage%3D1%26tab%3D%25E7%25AE%2597%25E6%25B3%2595%25E7%25AF%2587%26topicId%3D117&difficulty=undefined&judgeStatus=undefined&tags=&title=)ã€‚
