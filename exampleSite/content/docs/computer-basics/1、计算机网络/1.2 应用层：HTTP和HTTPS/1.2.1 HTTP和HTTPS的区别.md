---
weight: 1
---

# HTTP和HTTPS的区别

## 1 HTTP和HTTPS有什么区别

1. **端口不同**：HTTP使用80端口，HTTPS使用443端口。
2. **HTTP**（超文本传输协议）信息**是明文传输**，**HTTPS**运行在SSL（Secure Socket Layer）之上，**添加了加密和认证机制，更加安全**。
3. HTTPS由于**加密解密会带来更大的CPU和内存开销**。
4. HTTPS通信**需要证书**，一般需向证书颁发机构购买。

## 2 HTTPS的连接过程

1. 客户端**向服务器发出请求**，同时**发送客户端支持的一套加密规则**（包括对称加密、非对称加密、摘要算法）。
2. **服务器从中选取一种加密算法与HASH算法，并将自己的身份信息以证书的形式发回给浏览器**。证书里面包含了网站地址、**加密公钥**（用于非对称加密）以及证书的颁发机构等信息（证书中的私钥只能用于服务器端进行解密）。
3. **客户端验证服务器的合法性**，包括证书是否过期、CA是否可靠、发行者证书的公钥能否正确解开服务器证书的发行者的数字签名、服务器证书的域名是否和服务器的实际域名相匹配。
4. 如果**证书受信任**，或者**用户接受了不受信任的证书**，**浏览器会生成一个随机密钥**，并**用于服务器提供的公钥加密**，然后**使用HASH算法对握手消息进行摘要计算**，并**对摘要使用之前产生的密钥加密**，最后**将加密后的随机密钥和摘要一起发送给服务器**。
5. **服务器使用自己的私钥解密**，**得到对称加密的密钥**，**用这个密钥解密出HASH摘要值**，并**验证握手消息是否一致**，**如果一致**，服务器**使用对称加密的密钥加密握手消息发送给浏览器**。
6. **浏览器解密并验证摘要，若一致，则握手结束**，**之后的数据传送都使用对称加密的密钥进行加密**。

> 1. **非对称加密算法**用于在**握手过程中加密生成的密码**。
> 2. **对称加密算法**用于**对真正传输的数据进行加密**。
> 3. **HASH算法**主要用于**验证数据的完整性**。

## 3 输入www.baidu.com，怎么变成https://www.baidu.com，怎么确定用HTTP还是HTTPS

1. 一种是原始的302跳转，服务器把所有的HTTP流量跳转到HTTPS，但这样有一个漏洞，就是中间人可能在第一次访问站点的时候就劫持。
2. 解决方法是引入HSTS机制，返回的302报文中有这样一条`Strict-Transport-Security: max-age=31536000`，其含义是强制浏览器在`max-age`到期之前，把所有的`http://www.baidu.com`自动转换成`https://www.baidu.com`，这是浏览器实现的URL转换，不用每次访问两次服务器，避免了302跳转到80再跳转到443的中间人劫持的问题，所以只有第一次的时候会出现302，以后访问就不会出现了。

## 4 什么是对称加密、非对称加密，区别是什么

* **对称加密：**
  1. 加密和解密采用**相同的密钥**，如DES、RC2、RC4。
* **非对称加密：**
  1. **需要两个密钥**：**公钥和私钥**。
  2. 如果**用公钥加密，需要用私钥才能解密**，如RSA。
* **区别：**
  1. **对称加密速度更快，通常用于大量数据的加密**。
  2. **非对称加密安全性更高（不需要传送私钥）**。

## 5 数字签名、报文摘要的原理

1. **发送者A用私钥进行签名**，**接收者B用公钥验证签名**，因为除A外没有人有私钥，所以B相信签名是来自A，A不可抵赖，B也不能伪造报文。
2. **摘要算法：** MD5、SHA。

## 6 参考文献

1. [HTTP和HTTPS有什么区别？](https://github.com/wolverinn/Waking-Up/blob/master/Computer%20Network.md#HTTP%E5%92%8CHTTPS%E6%9C%89%E4%BB%80%E4%B9%88%E5%8C%BA%E5%88%AB)
2. [输入网址的时候，浏览器是如何判断你是http协议还是https协议的](https://blog.csdn.net/gui951753/article/details/82227800)。
